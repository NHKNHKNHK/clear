# å¸¸è¯†

## i++ä¸++i

i++ ä¸ ++i çš„**åŒºåˆ«**

-   i++ï¼šåç½®é€’å¢ï¼Œå…ˆè¿”å›å½“å‰å€¼ï¼Œå†è‡ªå¢
-   ++iï¼šå‰ç½®é€’å¢ï¼Œå…ˆè‡ªå¢ï¼Œå†è¿”å›æ–°å€¼

**ç¤ºä¾‹ï¼š**

```java
public static void main(String[] args){
    int i = 1;

    System.out.println("i: "  +   i);	// 1
    System.out.println("++i: "+   ++i); // 2
    System.out.println("i++: "+   i++); // 2
    System.out.println("i: "  +     i); // 3
    System.out.println("--i: "+   --i); // 2
    System.out.println("i--: "+   i--); // 2
    System.out.println("i: "  +   i);   // 1
}
```

## æœåŠ¡å¯ç”¨æ€§å‡ ä¸ª9çš„å«ä¹‰

æœåŠ¡å¯ç”¨æ€§ç”¨â€œå‡ ä¸ª9â€æ¥è¡¨ç¤ºæ˜¯ä¸€ç§å¸¸è§çš„è¡¡é‡æ ‡å‡†ï¼Œç”¨æ¥æè¿°ç³»ç»Ÿåœ¨ä¸€å®šæ—¶é—´å†…çš„å¯é æ€§ã€‚æ¯ä¸ªâ€œ9â€ä»£è¡¨ç³»ç»Ÿä¸å¯ç”¨æ—¶é—´çš„æ¯”ä¾‹å‡å°‘äº†ä¸€ä¸ªæ•°é‡çº§ã€‚ä¸‹é¢æ˜¯ä¸åŒæ•°é‡çš„â€œ9â€æ‰€ä»£è¡¨çš„æœåŠ¡å¯ç”¨æ€§æ°´å¹³ï¼š

|                                  | **é€šä¿—å«æ³•** | **å¯ç”¨æ€§çº§åˆ«** | **å¹´åº¦å®•æœºæ—¶é—´** |
| -------------------------------- | ------------ | -------------- | ---------------- |
| **åŸºæœ¬å¯ç”¨**                     | **2ä¸ª9**     | **99%**        | **87.6å°æ—¶**     |
| **è¾ƒé«˜å¯ç”¨**                     | **3ä¸ª9**     | **99.9%**      | **8.8å°æ—¶**      |
| **å…·æœ‰æ•…éšœè‡ªåŠ¨æ¢å¤èƒ½åŠ›çš„å¯ç”¨æ€§** | 4ä¸ª9         | 99.99%         | 53åˆ†é’Ÿ           |
| **æé«˜å¯ç”¨æ€§**                   | 5ä¸ª9         | 99.999%        | 5åˆ†é’Ÿ            |
| **å®¹é”™å¯ç”¨æ€§**                   | 6ä¸ª9         | 99.9999%       | 31ç§’             |

```
1å¹´ = 365å¤© = 8760å°æ—¶
99.9 = 8760*0.1%= 8760*0.001 = 8.76å°æ—¶
99.99 = 8760*0.01%= 8760*0.0001 = 0.876å°æ—¶ = 0.876*60 = 52.6åˆ†é’Ÿ
99.999 = 8760*0.001%= 8760*0.00001 = 0.0876å°æ—¶ = 0.0876*60 = 5.26åˆ†é’Ÿ
```

-   è¾ƒé«˜å¯ç”¨ï¼šé€šå¸¸è¢«è®¤ä¸ºæ˜¯åŸºæœ¬çš„å•†ä¸šçº§å¯ç”¨æ€§æ ‡å‡†
-   å…·æœ‰æ•…éšœè‡ªåŠ¨æ¢å¤èƒ½åŠ›çš„å¯ç”¨æ€§ï¼šè¿™é€šå¸¸è¢«è®¤ä¸ºæ˜¯è¾ƒé«˜çš„å¯ç”¨æ€§æ ‡å‡†ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ä¼ä¸šçº§åº”ç”¨
-   åœ¨è®¾è®¡é«˜å¯ç”¨ç³»ç»Ÿæ—¶ï¼Œé€šå¸¸ä¼šé‡‡å–å¤šç§æªæ–½æ¥æé«˜æœåŠ¡çš„å¯ç”¨æ€§ï¼Œå¦‚è´Ÿè½½å‡è¡¡ã€å†—ä½™æ¶æ„ã€æ•…éšœåˆ‡æ¢ç­‰

## JDKã€JREã€JVMçš„å…³ç³»ï¼Ÿ

- JDKï¼ˆJava Development Kitï¼‰ï¼šJavaå¼€å‘å·¥å…·åŒ…ï¼Œå®ƒåŒ…å«äº†JREå’Œä¸€ç³»åˆ—Javaå¼€å‘å·¥å…·ã€‚
- JREï¼ˆJava Runtime Environmentï¼‰ï¼šJREæ˜¯è¿è¡ŒJavaåº”ç”¨ç¨‹åºæ‰€éœ€çš„ç¯å¢ƒï¼Œå®ƒåŒ…å«äº†JVMå’ŒJavaæ ¸å¿ƒç±»åº“ã€‚JREåªèƒ½ç”¨æ¥è¿è¡ŒJavaåº”ç”¨ç¨‹åºï¼Œä¸èƒ½ç”¨æ¥å¼€å‘ç¼–è¯‘ï¼Œå®ƒæ˜¯JDKçš„å­é›†ã€‚
- JVMï¼ˆJava Virtual Machineï¼‰ï¼šJavaè™šæ‹Ÿæœºã€‚Javaç¨‹åºå¿…é¡»åœ¨JVMä¸­ã€‚


## Javaä¸­èƒ½ä¸èƒ½ä½¿ç”¨ä¸­æ–‡å½“ä½œæ ‡è¯†ç¬¦ï¼Ÿ

å¯ä»¥ï¼Œå› ä¸ºJavaæ”¯æŒUnicodeå­—ç¬¦é›†ï¼Œè€ŒUnicodeåŒ…æ‹¬äº†ä¸­æ–‡ã€‚ä½†æ˜¯ï¼Œä¸ºäº†ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œé€šå¸¸å»ºè®®ä½¿ç”¨è‹±æ–‡ä½œä¸ºæ ‡è¯†ç¬¦ã€‚

```java
public class æµ‹è¯• {
    public static void main(String[] arags) {
        String å§“å = "å¼ ä¸‰";
        System.out.println("å§“åï¼š" + å§“å);
    }
}
```

## ç®€è¿°Javaæ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™ï¼Ÿ

- æ ‡è¯†ç¬¦å¯ä»¥åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å’Œç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰
- æ ‡è¯†ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
- æ ‡è¯†ç¬¦ä¸èƒ½ä½¿ç”¨å…³é”®å­—ã€ä¿ç•™å­—ï¼ˆgotoã€constã€_ï¼‰ã€ç‰¹æ®Šå€¼ï¼ˆtrueã€falseã€nullï¼‰
- æ ‡è¯†ç¬¦åŒºåˆ†å¤§å°å†™
- æ ‡è¯†ç¬¦ä¸èƒ½åŒ…å«ç©ºæ ¼ï¼Œå¦åˆ™ä¼šè¢«è¯†åˆ«ä¸ºæ˜¯ä¸¤ä¸ªæ ‡è¯†ç¬¦


## ä¸ºä»€ä¹ˆåœ¨ç¼–å†™Javaä»£ç ä¼šé‡åˆ°ä¹±ç é—®é¢˜ï¼Ÿ

## Javaä¸­çš„å¸¸é‡ä¸å˜é‡

- æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
  - å¸¸é‡ï¼Œfinalä¿®é¥°çš„å˜é‡ï¼Œä¸€æ—¦èµ‹å€¼åï¼Œå°±ä¸èƒ½è¢«ä¿®æ”¹
  - å˜é‡ï¼Œå¯ä»¥é‡æ–°èµ‹å€¼
- Javaä¸­çš„å¸¸é‡æœ‰å‡ ç§ï¼Ÿ
  - å±€éƒ¨å˜é‡ + finalï¼Œä¸€èˆ¬ç›´æ¥åˆå§‹åŒ–
  - å®ä¾‹å˜é‡ + finalï¼Œä¸€èˆ¬é€šè¿‡æ„é€ å™¨åˆå§‹åŒ–
  - é™æ€å˜é‡ + finalï¼Œå»ºè®®å¤§å†™ï¼Œä¸€èˆ¬ç›´æ¥åˆå§‹åŒ–
```java
class Test {
    static final int MAX_COUNT = 10; // é™æ€å¸¸é‡
    private final int a = 1; // å®ä¾‹å˜é‡
    private final int b;
    private final int c;

    public Test(int b, int c) {
        this.b = b;
        this.c = c;
    }

    public static void main(String[] args) {
        final int d = 10; // å±€éƒ¨å˜é‡

    }

}
```



## Javaä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹æœ‰é‚£äº›ï¼Ÿ
Javaä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬8ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š

| æ•°æ®ç±»å‹               | å­—èŠ‚ | å€¼èŒƒå›´                       | é»˜è®¤å€¼    | å¯¹åº”åŒ…è£…ç±» |
| ---------------------- | ---- | ---------------------------- | --------- | ---------- |
| byte                   | 1    | -128 ~ 127                   | 0         | Byte       |
| shortï¼ˆçŸ­æ•´å‹ï¼‰        | 2    | -32768 ~ 32767               | 0         | Short      |
| int                    | 4    | -2^31 ~ 2^31-1               | 0         | Integer    |
| long                   | 8    | -2^63 ~ 2^63-1               | 0         | Long       |
| doubleï¼ˆå•ç²¾åº¦æµ®ç‚¹å‹ï¼‰ | 4    |                              | 0.0F      | Double     |
| floatï¼ˆåŒç²¾åº¦æµ®ç‚¹å‹ï¼‰  | 8    |                              | 0.0D      | Float      |
| char                   | 2    | 0 ~ 65535ï¼Œé‡‡ç”¨Unicodeå­—ç¬¦é›† | \`\u0000` | Character  |
| boolean                | 1bit | true ä¸ false                | false     | Boolean    |

>   é—®ï¼šbooleanç±»å‹çš„å­—èŠ‚å®½åº¦æ˜¯å¤šå°‘ï¼Ÿ
>
>   ç­”ï¼šbooleanç±»å‹çš„å˜é‡ç”¨äºå­˜å‚¨çœŸï¼ˆtrueï¼‰æˆ–å‡ï¼ˆfalseï¼‰çš„å€¼ã€‚JVMè§„èŒƒä¸­å¹¶æ²¡æœ‰è§„å®šbooleanç±»å‹çš„å…·ä½“ä½æ•°ï¼Œè¿™å–å†³äºJVMçš„å®ç°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ºäº†è€ƒè™‘æ•ˆç‡ï¼Œbooleanå¾ˆå¯èƒ½ä¼šè¢«å®ç°ä¸º8ä½ï¼ˆ1å­—èŠ‚ï¼‰ï¼Œä½†è¿™ä¸æ˜¯å›ºå®šçš„ï¼Œä¹Ÿå¯èƒ½å ç”¨æ›´å°‘æˆ–æ›´å¤šä½ã€‚



## charèƒ½å­˜å‚¨ä¸­æ–‡å—ï¼Ÿ

åœ¨ Java ä¸­ï¼Œ`char` ç±»å‹ç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦ã€‚å®ƒä½¿ç”¨çš„æ˜¯ Unicode ç¼–ç ï¼Œç†è®ºä¸Šå¯ä»¥å­˜å‚¨ä»»ä½• Unicode å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸­æ–‡å­—ç¬¦ã€‚ç„¶è€Œï¼Œ`char` ç±»å‹çš„å¤§å°æ˜¯å›ºå®šçš„ 16 ä½ï¼ˆ2 å­—èŠ‚ï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥è¡¨ç¤ºçš„æœ€å¤§ Unicode ç ç‚¹æ˜¯ `0xFFFF`ï¼Œå³åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰ä¸­çš„å­—ç¬¦ã€‚

ç¤ºä¾‹ï¼š

```java
char ch = 'é¾—';
System.out.println(ch); // è¾“å‡ºï¼šé¾—
```

**å…³é”®ç‚¹**

1.  **Unicode ç¼–ç **ï¼š
    -   Java çš„ `char` ç±»å‹åŸºäº Unicode ç¼–ç ï¼Œæ”¯æŒ BMP ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚
    -   BMP åŒ…å«äº†å¤§éƒ¨åˆ†å¸¸ç”¨çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬å¸¸è§çš„ä¸­æ—¥éŸ©ï¼ˆCJKï¼‰å­—ç¬¦ã€‚
2.  **BMP å’Œ è¡¥å……å¹³é¢**ï¼š
    -   BMPï¼ˆBasic Multilingual Planeï¼‰ï¼šåŒ…å«ç ç‚¹ä» `U+0000` åˆ° `U+FFFF` çš„å­—ç¬¦ã€‚
    -   è¡¥å……å¹³é¢ï¼ˆSupplementary Planesï¼‰ï¼šåŒ…å«ç ç‚¹ä» `U+10000` åˆ° `U+10FFFF` çš„å­—ç¬¦ï¼Œä¾‹å¦‚ä¸€äº›ä¸å¸¸ç”¨çš„æ±‰å­—ã€è¡¨æƒ…ç¬¦å·ç­‰ã€‚
3.  **char å’Œ è¡¥å……å­—ç¬¦**ï¼š
    -   `char` ç±»å‹åªèƒ½è¡¨ç¤º BMP ä¸­çš„å­—ç¬¦ã€‚
    -   å¯¹äºè¡¥å……å­—ç¬¦ï¼ˆå¦‚æŸäº›ç½•è§çš„æ±‰å­—æˆ–è¡¨æƒ…ç¬¦å·ï¼‰ï¼ŒJava ä½¿ç”¨ä¸¤ä¸ª `char` æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œç§°ä¸ºä»£ç†å¯¹ï¼ˆsurrogate pairï¼‰

**å¤„ç†è¡¥å……å­—ç¬¦**

å¯¹äºä¸åœ¨ BMP ä¸­çš„å­—ç¬¦ï¼ˆå¦‚æŸäº›ç½•è§çš„æ±‰å­—æˆ–è¡¨æƒ…ç¬¦å·ï¼‰ï¼Œéœ€è¦ä½¿ç”¨ `String` æˆ– `Character.toCodePoint` æ–¹æ³•æ¥å¤„ç†ï¼š

```java
public class Main {
    public static void main(String[] args) {
        String emoji = "\ud83d\ude00"; // è¡¨æƒ…ç¬¦å· ğŸ˜Š
        System.out.println("å­—ç¬¦ä¸²: " + emoji);
        int codePoint = emoji.codePointAt(0);
        System.out.println("å­—ç¬¦çš„ Unicode ç ç‚¹: " + codePoint); // è¾“å‡º Unicode ç ç‚¹
    }
}


å­—ç¬¦ä¸²: ğŸ˜Š
å­—ç¬¦çš„ Unicode ç ç‚¹: 128512
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¡¨æƒ…ç¬¦å· `ğŸ˜Š` ä¸åœ¨ BMP ä¸­ï¼Œå› æ­¤ä½¿ç”¨äº†ä¸¤ä¸ª `char` æ¥è¡¨ç¤ºå®ƒã€‚é€šè¿‡ `codePointAt` æ–¹æ³•å¯ä»¥è·å–å®Œæ•´çš„ Unicode ç ç‚¹

**æ€»ç»“**

-   **char å¯ä»¥å­˜å‚¨ä¸­æ–‡å­—ç¬¦**ï¼Œå› ä¸ºè¿™äº›å­—ç¬¦å¤§å¤šä½äº BMP ä¸­ã€‚
-   **å¯¹äºè¡¥å……å­—ç¬¦**ï¼ˆå¦‚æŸäº›ç½•è§çš„æ±‰å­—æˆ–è¡¨æƒ…ç¬¦å·ï¼‰ï¼Œ`char` æ— æ³•ç›´æ¥è¡¨ç¤ºï¼Œéœ€è¦ä½¿ç”¨ `String` æˆ–å…¶ä»–æ–¹æ³•æ¥å¤„ç†ã€‚
-   **æœ€ä½³å®è·µ**ï¼šå¦‚æœä½ éœ€è¦å¤„ç†æ‰€æœ‰ Unicode å­—ç¬¦ï¼ˆåŒ…æ‹¬è¡¥å……å­—ç¬¦ï¼‰ï¼Œå»ºè®®ä½¿ç”¨ `String` ç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥æ­£ç¡®å¤„ç†ä»£ç†å¯¹å’Œè¡¥å……å­—ç¬¦



## å¦‚ä½•ç†è§£è‡ªåŠ¨ç±»å‹æå‡ï¼Ÿ

è‡ªåŠ¨ç±»å‹æå‡æ˜¯æŒ‡å½“æˆ‘ä»¬åœ¨**è®¡ç®—æ—¶**ï¼Œå°†`å–å€¼èŒƒå›´å°çš„ç±»å‹`è‡ªåŠ¨æå‡ä¸º`å–å€¼èŒƒå›´å¤§çš„ç±»å‹`ã€‚è‡ªåŠ¨ç±»å‹æå‡è§„åˆ™å¦‚å›¾æ‰€ç¤ºï¼š

![1739699406807](./assets/æ•°æ®ç±»å‹è‡ªåŠ¨æå‡.png)

ï¼ˆ1ï¼‰å½“æŠŠå­˜å‚¨èŒƒå›´**å°**çš„å€¼ï¼ˆå­—é¢é‡ã€å˜é‡å€¼ã€è¡¨è¾¾å¼è®¡ç®—çš„ç»“æœå€¼ï¼‰èµ‹å€¼ç»™å­˜å‚¨èŒƒå›´**å¤§**çš„å˜é‡æ—¶

ï¼ˆ2ï¼‰å½“å­˜å‚¨èŒƒå›´å°çš„æ•°æ®ç±»å‹ä¸å­˜å‚¨èŒƒå›´å¤§çš„æ•°æ®ç±»å‹ä¸€èµ·**æ··åˆ**è¿ç®—æ—¶ï¼Œä¼šæŒ‰ç…§å¤§çš„ç±»å‹è¿ç®—

ï¼ˆ3ï¼‰å½“**btyeã€shortã€char**æ•°æ®ç±»å‹è¿›è¡Œ**ç®—æœ¯**æˆ–**ä½**è¿ç®—æ—¶ï¼ŒæŒ‰ç…§**int**ç±»å‹å¤„ç†

>   é—®ï¼šè‡ªåŠ¨ç±»å‹æå‡å°±ä¸€å®šæ˜¯å®‰å…¨çš„å—ï¼Ÿ
>
>   ç­”ï¼šä¸æ˜¯ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨ç²¾åº¦ä¸¢å¤±

```java
int i = 'A'; // charè‡ªåŠ¨å‡çº§ä¸ºint
double j = 19; // intè‡ªåŠ¨å‡çº§ä¸ºdouble
System.out.println(i); // 65
System.out.println(i); // 19.0

int a = 1;
char b = 'A';
long c = 1L;
flaot d = 1.0F;
System.out.println(a + b + c + d); // å‡çº§ä¸ºfloat  68.0
```



## å¦‚ä½•ç†è§£å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Ÿ

å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯æŒ‡ï¼Œå°†`å–å€¼èŒƒå›´å¤§çš„ç±»å‹`å¼ºåˆ¶è½¬æ¢ä¸º`å–å€¼èŒƒå›´å°çš„ç±»å‹`ã€‚æˆ–æœ‰æ—¶å€™ä¹Ÿå¯ä»¥å°†`å–å€¼èŒƒå›´å°çš„ç±»å‹`å¼ºåˆ¶æå‡ä¸º`å–å€¼èŒƒå›´å¤§çš„ç±»å‹`

![1739699406807](D:/video/workspace/easy-interview/01-Java%E5%9F%BA%E7%A1%80/assets/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E6%8F%90%E5%8D%87.png)

ï¼ˆ1ï¼‰å½“æŠŠå­˜å‚¨èŒƒå›´**å¤§**çš„å€¼ï¼ˆå­—é¢é‡ã€å˜é‡å€¼ã€è¡¨è¾¾å¼è®¡ç®—çš„ç»“æœå€¼ï¼‰èµ‹å€¼ç»™å­˜å‚¨èŒƒå›´**å°**çš„å˜é‡æ—¶ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ï¼Œæç¤ºï¼šæœ‰é£é™©ï¼Œå¯èƒ½ä¼šæŸå¤±ç²¾åº¦

```java
int i = 200;
byte b = (byte)i; // æº¢å‡º

double a = 1.2;
int j = (int)a; // æŸå¤±ç²¾åº¦
```

ï¼ˆ2ï¼‰å½“æŸä¸ªå€¼æƒ³è¦æå‡æ•°æ®ç±»å‹æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢

```java
int x = 1;
int y = 2;
double z = (double)x/y;
```



## short s1 = 1; s1 = s1 + 1;æœ‰é”™å—?short s1 = 1; s1 += 1;æœ‰é”™å—ï¼Ÿ

æœ¬é¢˜è€ƒç‚¹ä¸ºï¼šè‡ªåŠ¨ç±»å‹æå‡ã€éšå¼è½¬æ¢

```java
short s1 = 1;
s1 = s1 + 1;
```

åœ¨è¿™ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œs1 = s1 + 1;ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚s1æ˜¯shortç±»å‹çš„å˜é‡ï¼Œ1æ˜¯intç±»å‹çš„å˜é‡ã€‚å…¶ä¸­shortã€byteã€charç±»å‹åœ¨è¿›è¡Œä½è¿ç®—ã€ç®—æœ¯è¿ç®—æ—¶ï¼Œä¼š**è‡ªåŠ¨æå‡**ä¸ºintç±»å‹ï¼Œå› æ­¤ s1 + 1 çš„ç»“æœæ˜¯intç±»å‹çš„å€¼ï¼Œå°è¯•å°†intç±»å‹çš„ç»“æœèµ‹å€¼ç»™shortç±»å‹çš„å˜é‡s1æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ½œåœ¨çš„ç²¾åº¦ä¸¢å¤±ï¼Œéœ€è¦æ˜¾å¼çš„ç±»å‹è½¬æ¢ã€‚

```
Type mismatch: cannot convert from int to short
```

è¦ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œå¯ä»¥è¿›è¡Œæ˜¾å¼çš„ç±»å‹è½¬æ¢ï¼š

```java
short s1 = 1;
s1 = (short) (s1 + 1);
```



```java
short s1 = 1;
s1 += 1;
```

è¿™ä¸ªä»£ç ç‰‡æ®µæ˜¯æ­£ç¡®çš„ã€‚å› ä¸ºs1 += 1æ˜¯ä¸€ä¸ªå¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œç­‰ä»·äº s1 = (short) (s1 + 1)ã€‚åœ¨å¤åˆèµ‹å€¼è¿ç®—ç¬¦ä¸­ï¼Œå­˜åœ¨**éšå¼ç±»å‹è½¬æ¢**ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚



## Javaä¸­æœ‰å“ªäº›è®¿é—®ä¿®é¥°ç¬¦ï¼Ÿ



## privateã€publicã€protectedä»¥åŠä¸å†™çš„åŒºåˆ«ï¼Ÿ

åœ¨Javaä¸­ï¼Œè®¿é—®ä¿®é¥°ç¬¦ï¼ˆaccess modifiersï¼‰ç”¨äºæ§åˆ¶ç±»ã€æ–¹æ³•å’Œå˜é‡çš„è®¿é—®çº§åˆ«ã€‚ä¸»è¦æœ‰å››ç§è®¿é—®ä¿®é¥°ç¬¦ï¼šprivateã€publicã€protectedå’Œ é»˜è®¤ï¼ˆä¸å†™ï¼‰ã€‚

å®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š

**private**

-   **è®¿é—®èŒƒå›´**ï¼šä»…åœ¨åŒä¸€ä¸ªç±»å†…å¯è®¿é—®ã€‚

-   **ä½¿ç”¨åœºæ™¯**ï¼šç”¨äºéšè—ç±»çš„å®ç°ç»†èŠ‚ï¼Œä¿æŠ¤ç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ä¸è¢«å¤–éƒ¨ç±»è®¿é—®å’Œä¿®æ”¹

**public**

-   **è®¿é—®èŒƒå›´**ï¼šåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ã€‚

-   **ä½¿ç”¨åœºæ™¯**ï¼šç”¨äºç±»ã€æ–¹æ³•æˆ–å˜é‡éœ€è¦è¢«å…¶ä»–ç±»è®¿é—®çš„æƒ…å†µ

**protected**

-   **è®¿é—®èŒƒå›´**ï¼šåœ¨åŒä¸€ä¸ªåŒ…å†…ï¼Œä»¥åŠåœ¨ä¸åŒåŒ…ä¸­çš„å­ç±»ä¸­å¯è®¿é—®ã€‚

-   **ä½¿ç”¨åœºæ™¯**ï¼šç”¨äºå¸Œæœ›åœ¨åŒä¸€ä¸ªåŒ…å†…æˆ–å­ç±»ä¸­è®¿é—®ï¼Œä½†ä¸å¸Œæœ›åœ¨åŒ…å¤–çš„éå­ç±»ä¸­è®¿é—®çš„æƒ…å†µ

**é»˜è®¤ï¼ˆä¸å†™ï¼‰**

-   **è®¿é—®èŒƒå›´**ï¼šä»…åœ¨åŒä¸€ä¸ªåŒ…å†…å¯è®¿é—®ã€‚

-   **ä½¿ç”¨åœºæ™¯**ï¼šç”¨äºåŒ…çº§è®¿é—®æ§åˆ¶ï¼Œä¸å¸Œæœ›ç±»ã€æ–¹æ³•æˆ–å˜é‡è¢«åŒ…å¤–çš„ç±»è®¿é—®

| ä¿®é¥°ç¬¦       | åŒä¸€ä¸ªç±» | åŒä¸€ä¸ªåŒ… | å­ç±»ï¼ˆä¸åŒåŒ…ï¼‰ | å…¶ä»–åŒ… |
| ------------ | -------- | -------- | -------------- | ------ |
| private      | æ˜¯       | å¦       | å¦             | å¦     |
| é»˜è®¤ï¼ˆä¸å†™ï¼‰ | æ˜¯       | æ˜¯       | å¦             | å¦     |
| protected    | æ˜¯       | æ˜¯       | æ˜¯             | å¦     |
| public       | æ˜¯       | æ˜¯       | æ˜¯             | æ˜¯     |

```java
package package1;

public class PublicClass {
    private int privateVar;
    int defaultVar;
    protected int protectedVar;
    public int publicVar;

    private void privateMethod() {}
    void defaultMethod() {}
    protected void protectedMethod() {}
    public void publicMethod() {}
}

package package2;

import package1.PublicClass;

public class SubClass extends PublicClass {
    public void accessMethods() {
        // privateMethod(); // é”™è¯¯ï¼Œæ— æ³•è®¿é—®
        // defaultMethod(); // é”™è¯¯ï¼Œæ— æ³•è®¿é—®
        protectedMethod(); // æ­£ç¡®ï¼Œå¯ä»¥è®¿é—®
        publicMethod(); // æ­£ç¡®ï¼Œå¯ä»¥è®¿é—®
    }
}

package package1;

public class SamePackageClass {
    public void accessMethods() {
        PublicClass obj = new PublicClass();
        // obj.privateMethod(); // é”™è¯¯ï¼Œæ— æ³•è®¿é—®
        obj.defaultMethod(); // æ­£ç¡®ï¼Œå¯ä»¥è®¿é—®
        obj.protectedMethod(); // æ­£ç¡®ï¼Œå¯ä»¥è®¿é—®
        obj.publicMethod(); // æ­£ç¡®ï¼Œå¯ä»¥è®¿é—®
    }
}
```



## finalå…³é”®å­—æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

final å…³é”®å­—å¯ç”¨ä¿®é¥°ç±»ã€æˆå‘˜å˜é‡ã€æ–¹æ³•ã€å±€éƒ¨å˜é‡

-   finalä¿®é¥°ç±»ï¼šè¢« final ä¿®é¥°çš„ç±»**ä¸èƒ½è¢«ç»§æ‰¿**ï¼Œå³è¯¥ç±»ä¸º**æœ€ç»ˆç±»**ã€‚
-   finalä¿®é¥°æ–¹æ³•ï¼šè¢« final ä¿®é¥°çš„æ–¹æ³•**ä¸èƒ½è¢«å­ç±»é‡å†™**ï¼Œå³è¯¥æ–¹æ³•ä¸ºæœ€ç»ˆæ–¹æ³•ã€‚
-   finalä¿®é¥°å˜é‡ï¼šè¢« final ä¿®é¥°çš„å˜é‡ä¸º**å¸¸é‡**ï¼Œ**ä¸€æ—¦è¢«èµ‹å€¼åå°±ä¸èƒ½å†æ¬¡ä¿®æ”¹**ã€‚
    -   ä¿®é¥°é™æ€å˜é‡ï¼šå¸¸é‡
    -   ä¿®é¥°å®ä¾‹å˜é‡ï¼šå¾ˆå°‘ä½¿ç”¨
    -   å˜é‡ç±»å‹ä¸ºåŸºæœ¬ç±»å‹ï¼šè¢«finalä¿®é¥°å**æ•°æ®å€¼ä¸èƒ½å‘ç”Ÿæ”¹å˜**ã€‚
    -   å˜é‡ç±»å‹ä¸ºå¼•ç”¨ç±»å‹ï¼šè¢«finalä¿®é¥°å**åœ°å€å€¼ä¸èƒ½æ”¹å˜ï¼Œä½†åœ°å€é‡Œçš„å†…å®¹å¯ä»¥æ”¹å˜**ã€‚
    -   éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**finalä¿®é¥°çš„å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–è€…æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šç¼–è¯‘é”™è¯¯**ã€‚
-   final ä¿®é¥° å±€éƒ¨å˜é‡
    -   å˜é‡ç±»å‹ä¸ºåŸºæœ¬ç±»å‹ï¼šè¢«finalä¿®é¥°å**æ•°æ®å€¼ä¸èƒ½å‘ç”Ÿæ”¹å˜**ã€‚
    -   å˜é‡ç±»å‹ä¸ºå¼•ç”¨ç±»å‹ï¼šè¢«finalä¿®é¥°å**åœ°å€å€¼ä¸èƒ½æ”¹å˜ï¼Œä½†åœ°å€é‡Œçš„å†…å®¹å¯ä»¥æ”¹å˜**ã€‚

**fianlä¿®é¥°ç±»**

å½“ä¸€ä¸ªç±»è¢«å£°æ˜ä¸ºfinalæ—¶ï¼Œå®ƒ**ä¸èƒ½è¢«ç»§æ‰¿**ã€‚è¿™å¯¹äºåˆ›å»ºä¸å¯å˜ç±»ï¼ˆimmutable classï¼‰æˆ–ç¡®ä¿ç±»çš„å®ç°ä¸è¢«æ”¹å˜æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚

ä¾‹å¦‚ï¼ŒStringç±»å°±æ˜¯ä¸€ä¸ªä¸å¯å˜ç±»

**finalä¿®é¥°å˜é‡**

å½“ä¸€ä¸ªå˜é‡è¢«å£°æ˜ä¸ºfinalæ—¶ï¼Œå®ƒçš„å€¼åœ¨åˆå§‹åŒ–ä¹‹åå°±ä¸èƒ½è¢«æ”¹å˜ã€‚finalå˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–

-   å˜é‡æ˜¯**åŸºæœ¬ç±»å‹**ï¼šfinalä¿®é¥°æŒ‡çš„æ˜¯åŸºæœ¬ç±»å‹çš„**æ•°æ®å€¼ä¸èƒ½å‘ç”Ÿæ”¹å˜**ã€‚

-   å˜é‡æ˜¯**å¼•ç”¨ç±»å‹**ï¼šfinalä¿®é¥°æŒ‡çš„æ˜¯å¼•ç”¨ç±»å‹çš„**åœ°å€å€¼ä¸èƒ½æ”¹å˜ï¼Œä½†åœ°å€é‡Œçš„å†…å®¹å¯ä»¥æ”¹å˜**ã€‚

```java
public class Example {
    final int finalVar = 10; // å£°æ˜æ—¶åˆå§‹åŒ–

    final int anotherFinalVar;

    public Example(int value) {
        anotherFinalVar = value; // é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–
    }

    public void changeValue() {
        // finalVar = 20; // ç¼–è¯‘é”™è¯¯ï¼Œfinalå˜é‡çš„å€¼ä¸èƒ½è¢«æ”¹å˜
    }
}
```

**finalä¿®é¥°æ–¹æ³•**

å½“ä¸€ä¸ªæ–¹æ³•è¢«å£°æ˜ä¸ºfinalæ—¶ï¼Œå®ƒä¸èƒ½è¢«å­ç±»é‡å†™ï¼ˆoverrideï¼‰ã€‚è¿™å¯ä»¥ç”¨æ¥é˜²æ­¢å­ç±»æ”¹å˜çˆ¶ç±»ä¸­å…³é”®çš„æ–¹æ³•å®ç°ã€‚

**fianlä¿®é¥°å±€éƒ¨å˜é‡**

finalä¹Ÿå¯ä»¥ç”¨äºå±€éƒ¨å˜é‡ï¼Œå°¤å…¶æ˜¯åœ¨åŒ¿åç±»æˆ–lambdaè¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ã€‚è¢«å£°æ˜ä¸ºfinalçš„å±€éƒ¨å˜é‡åœ¨æ–¹æ³•æ‰§è¡ŒæœŸé—´ä¸èƒ½è¢«ä¿®æ”¹ã€‚

-   å˜é‡æ˜¯**åŸºæœ¬ç±»å‹**ï¼šfinalä¿®é¥°æŒ‡çš„æ˜¯åŸºæœ¬ç±»å‹çš„**æ•°æ®å€¼ä¸èƒ½å‘ç”Ÿæ”¹å˜**ã€‚

-   å˜é‡æ˜¯**å¼•ç”¨ç±»å‹**ï¼šfinalä¿®é¥°æŒ‡çš„æ˜¯å¼•ç”¨ç±»å‹çš„**åœ°å€å€¼ä¸èƒ½æ”¹å˜ï¼Œä½†åœ°å€é‡Œçš„å†…å®¹å¯ä»¥æ”¹å˜**ã€‚

```java
public class Example {
    public void method() {
        final int localVar = 10;

        // localVar = 20; // ç¼–è¯‘é”™è¯¯ï¼Œæ— æ³•ä¿®æ”¹finalå±€éƒ¨å˜é‡

        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                System.out.println(localVar); // å¯ä»¥åœ¨åŒ¿åç±»ä¸­è®¿é—®finalå±€éƒ¨å˜é‡
            }
        };

        runnable.run();
    }
}
```

**finalå’Œä¸å¯å˜å¯¹è±¡**

finalå…³é”®å­—åœ¨åˆ›å»ºä¸å¯å˜å¯¹è±¡æ—¶éå¸¸æœ‰ç”¨ã€‚ä¸å¯å˜å¯¹è±¡çš„çŠ¶æ€åœ¨åˆ›å»ºä¹‹åä¸èƒ½è¢«æ”¹å˜ï¼Œè¿™åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å°¤å…¶é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æ˜¯çº¿ç¨‹å®‰å…¨çš„

```java
public final class ImmutableClass {
    private final int value;

    public ImmutableClass(int value) {
        this.value = value;
    }

    public int getValue() {
        return value;
    }
}
```



## finalã€finallyã€finalizeçš„åŒºåˆ«ï¼Ÿ

**final**

final æ˜¯ä¸€ä¸ªä¿®é¥°ç¬¦ï¼Œå¯ä»¥ç”¨äºç±»ã€æ–¹æ³•å’Œå˜é‡ã€‚

-   ä¿®é¥°ç±»ï¼šè¢« final ä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚

-   ä¿®é¥°æ–¹æ³•ï¼šè¢« final ä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ï¼ˆoverrideï¼‰ã€‚

-   ä¿®é¥°å˜é‡ï¼šè¢« final ä¿®é¥°çš„å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œä¸€æ—¦èµ‹å€¼åå°±ä¸èƒ½å†ä¿®æ”¹ã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒçš„å€¼ä¸èƒ½æ”¹å˜ï¼›å¯¹äºå¼•ç”¨ç±»å‹ï¼Œè¿™æ„å‘³ç€å¼•ç”¨ä¸èƒ½æŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œä½†å¯¹è±¡æœ¬èº«çš„å†…å®¹å¯ä»¥ä¿®æ”¹ã€‚

**finally**

finally æ˜¯ä¸€ä¸ªå—ï¼Œé€šå¸¸ä¸ try-catch ç»“æ„ä¸€èµ·ä½¿ç”¨ã€‚

finally å—ä¸­çš„ä»£ç æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œã€‚å®ƒé€šå¸¸ç”¨äºç¡®ä¿æŸäº›å…³é”®æ“ä½œï¼ˆå¦‚èµ„æºé‡Šæ”¾ï¼‰æ€»æ˜¯è¢«æ‰§è¡Œ

**finalize**

finalize æ˜¯ Object ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åœ¨å¯¹è±¡è¢«åƒåœ¾å›æ”¶ä¹‹å‰è°ƒç”¨ã€‚

finalize æ–¹æ³•å…è®¸å¯¹è±¡åœ¨è¢«åƒåœ¾å›æ”¶ä¹‹å‰æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚ç„¶è€Œï¼Œ**ç”±äºå…¶ä¸å¯é¢„æµ‹çš„è¡Œä¸ºå’Œæ€§èƒ½é—®é¢˜**ï¼Œç°ä»£ Java ç¼–ç¨‹ä¸­å·²ç»**å¾ˆå°‘ä½¿ç”¨ finalize**ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´å¯é çš„èµ„æºç®¡ç†æ–¹å¼ï¼Œå¦‚ try-with-resources æˆ–æ˜¾å¼çš„å…³é—­æ–¹æ³•ã€‚

æ³¨æ„ï¼Œä» Java 9 å¼€å§‹ï¼Œfinalize æ–¹æ³•å·²ç»è¢«æ ‡è®°ä¸ºä¸æ¨èä½¿ç”¨ï¼ˆdeprecatedï¼‰ï¼Œå¹¶ä¸”åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šè¢«ç§»é™¤ã€‚

| ç‰¹æ€§     | final                                     | finally              | finalize                            |
| -------- | ----------------------------------------- | -------------------- | ----------------------------------- |
| å®šä¹‰     | ä¿®é¥°ç¬¦                                    | å¼‚å¸¸å¤„ç†å—           | Object ç±»ä¸­çš„æ–¹æ³•                   |
| ä½œç”¨     | é˜²æ­¢ç»§æ‰¿ã€é‡å†™æˆ–é‡æ–°èµ‹å€¼                  | ç¡®ä¿å…³é”®ä»£ç æ€»æ˜¯æ‰§è¡Œ | å¯¹è±¡è¢«åƒåœ¾å›æ”¶å‰æ‰§è¡Œæ¸…ç†æ“ä½œ        |
| ä½¿ç”¨åœºæ™¯ | ç±»ã€æ–¹æ³•ã€å˜é‡                            | èµ„æºé‡Šæ”¾ç­‰å…³é”®æ“ä½œ   | ä¸æ¨èä½¿ç”¨ï¼Œå·²åºŸå¼ƒ                  |
| ç¤ºä¾‹     | final classã€final methodã€final variable | try-catch-finally    | @Override protected void finalize() |

 

## ä»€ä¹ˆæ˜¯Javaä¸­çš„ç½‘ç»œç¼–ç¨‹ï¼Ÿ



## &å’Œ&&ã€|å’Œ||çš„åŒºåˆ«ï¼Ÿ



## >>ã€>>>ä¸<<çš„åŒºåˆ«ï¼Ÿ



## Javaçš„è¿ç®—ç¬¦å¯ä»¥é‡è½½å—ï¼Ÿ



## if-elseå’Œswitch-caseçš„åŒºåˆ«ï¼Ÿ

-   é€‚ç”¨æ€§ï¼š

    -   ifè¯­å¥çš„æ¡ä»¶æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹å€¼ï¼Œå¯ç”¨äºèŒƒå›´çš„åˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥ç”¨äºç­‰å€¼çš„åˆ¤æ–­ï¼Œé€‚ç”¨èŒƒå›´æ›´å¹¿ã€‚

    -   switchè¯­å¥çš„æ¡ä»¶æ˜¯ä¸€ä¸ªå¸¸é‡å€¼ï¼ˆbyteã€shortã€intã€charåŠå®ƒä»¬çš„åŒ…è£…ç±»ï¼‰ï¼Œåªèƒ½åˆ¤æ–­æŸä¸ªå˜é‡æˆ–è¡¨è¾¾å¼çš„ç»“æœæ˜¯å¦ç­‰äºæŸä¸ªå¸¸é‡ï¼Œä½¿ç”¨èŒƒå›´è¾ƒçª„ã€‚

-   æ•ˆç‡ï¼šå½“æ¡ä»¶æ˜¯åˆ¤æ–­æŸä¸ªå˜é‡æˆ–è¡¨è¾¾å¼çš„ç»“æœæ˜¯å¦ç­‰äºæŸä¸ªå›ºå®šçš„å¸¸é‡å€¼æ—¶ï¼Œä½¿ç”¨switchæ•ˆç‡æ›´é«˜

-   ç©¿é€æ€§ï¼šä½¿ç”¨switchå¯ä»¥åˆ©ç”¨ç©¿é€æ€§ï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªåˆ†æ”¯ï¼Œè€Œif-elseæ²¡æœ‰ç©¿é€æ€§



OOP

## Javaä¸‰å¤§ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ





## **ä»€ä¹ˆæ˜¯å°è£…ï¼Ÿ**

## ä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼Ÿ

## **ä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿ**

## ä»€ä¹ˆæ˜¯Javaçš„å°è£…ç‰¹æ€§ï¼Ÿ

## **é‡è½½å’Œé‡å†™çš„åŒºåˆ«ï¼Ÿ**

## **æ„é€ å™¨æ˜¯å¦å¯è¢«é‡å†™ï¼Ÿ**



## çˆ¶ç±»çš„é™æ€æ–¹æ³•èƒ½å¦è¢«å­ç±»é‡å†™?

é™æ€æ–¹æ³•å³è¢«staticæ‰€ä¿®é¥°çš„æˆå‘˜æ–¹æ³•ã€‚è¢«staticä¿®é¥°çš„æ–¹æ³•æˆ–å±æ€§åªäºç±»æœ¬èº«æœ‰å…³ï¼Œè¢«ç±»çš„æ‰€æœ‰å¯¹è±¡æ‰€å…±äº«ã€‚

é™æ€æ–¹æ³•æ˜¯é€šè¿‡ç±»åè°ƒç”¨çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å®ä¾‹è°ƒç”¨çš„ï¼Œæ‰€ä»¥å®ƒä»¬ä¸èƒ½è¡¨ç°å‡ºå¤šæ€æ€§ã€‚

å› æ­¤çˆ¶ç±»çš„é™æ€æ–¹æ³•**ä¸èƒ½**è¢«å­ç±»é‡å†™ï¼ˆoverrideï¼‰ã€‚

ä¸è¿‡ï¼Œå­ç±»å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸çˆ¶ç±»é™æ€æ–¹æ³•åŒåçš„æ–¹æ³•ï¼Œè¿™ç§æƒ…å†µç§°ä¸ºæ–¹æ³•éšè—ï¼ˆmethod hidingï¼‰ï¼Œè€Œä¸æ˜¯æ–¹æ³•é‡å†™ã€‚



## Javaä¸­ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªç±»å—ï¼Ÿ



## Javaä¸ºä»€ä¹ˆä¸æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ



## **æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?**



## ä»€ä¹ˆæ˜¯Javaçš„è¿­ä»£å™¨ï¼Ÿ



## compareä¸





## æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªé“¾æ¡æ˜¯ä¸æ˜¯ç¯å½¢é“¾è¡¨ï¼Ÿ





## ä»€ä¹ˆæ˜¯æ¥å£ï¼Ÿ



## ä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼Ÿ



## æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ



## Javaä¸­çš„å‚æ•°ä¼ é€’æ˜¯æŒ‰å€¼è¿˜æ˜¯æŒ‰å¼•ç”¨ï¼Ÿ



## å¯å˜ç±»ä¸ä¸å¯å˜ç±»ï¼Ÿ



## ä»€ä¹ˆæ˜¯Javaä¸­çš„ä¸å¯å˜ç±»ï¼Ÿ



## ç®€è¿°Javaå¼‚å¸¸çš„ä½“ç³»ç»“æ„ï¼Ÿ

Java çš„å¼‚å¸¸ä½“ç³»æ˜¯åŸºäºç±»å±‚æ¬¡ç»“æ„çš„ï¼Œæ‰€æœ‰çš„å¼‚å¸¸å’Œé”™è¯¯éƒ½ç»§æ‰¿è‡ª `Throwable `ç±»ã€‚Throwable ç±»æœ‰ä¸¤ä¸ªä¸»è¦çš„å­ç±»ï¼š`Error` å’Œ `Exception`ã€‚

`Throwable`ç±»

-   å®šä¹‰ï¼šæ‰€æœ‰å¼‚å¸¸å’Œé”™è¯¯çš„è¶…ç±»ï¼ˆåŸºç±»ï¼‰

-   ä½œç”¨ï¼šè¡¨ç¤ºç¨‹åºä¸­å‘ç”Ÿçš„ä¸€äº›ä¸¥é‡é—®é¢˜ï¼Œè¿™äº›é—®é¢˜æ˜¯ç¨‹åºæœ¬èº«æ— æ³•å¤„ç†çš„

`Throwable`ç±»æœ‰ä¸¤ä¸ªä¸»è¦çš„å­ç±»ï¼š

-   `Error`ç±»ï¼š è¡¨ç¤ºä¸¥é‡çš„ç³»ç»Ÿçº§é”™è¯¯æˆ–èµ„æºè€—å°½ç­‰é—®é¢˜    è¡¨ç¤ºä¸¥é‡çš„é”™è¯¯ï¼Œé€šå¸¸æ˜¯ç”±äºç³»ç»Ÿçº§é—®é¢˜å¯¼è‡´çš„ï¼Œä¾‹å¦‚`OutOfMemoryError`ã€`StackOverflowError`ç­‰ã€‚`Error`é€šå¸¸æ˜¯ä¸å¯æ¢å¤çš„ï¼Œç¨‹åºæ— æ³•å¤„ç†å®ƒä»¬
    -   ç‰¹ç‚¹ï¼šé€šå¸¸æ˜¯ç”± JVM æŠ›å‡ºï¼Œè¡¨ç¤ºç¨‹åºæ— æ³•ç»§ç»­æ‰§è¡Œ
    -   ç¨‹åºå‘˜é€šå¸¸ä¸éœ€è¦æ•è·æˆ–å¤„ç† Errorï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸æ˜¯ä¸å¯æ¢å¤çš„ã€‚
    -   å¸¸è§ç±»å‹ï¼š`OutOfMemoryError`ã€`StackOverflowError`ã€`NoClassDefFoundError`ç­‰
-   `Exception` ç±»ï¼šè¡¨ç¤ºç¨‹åºè¿è¡Œæ—¶å¯ä»¥è¢«æ•è·å’Œå¤„ç†çš„å¼‚å¸¸ã€‚
    -   ç‰¹ç‚¹ï¼šå¯ä»¥é€šè¿‡ try-catch å—æ•è·å¹¶å¤„ç†æˆ–é€šè¿‡ throws å£°æ˜
    -   åˆ†ä¸ºç¼–è¯‘æ—¶å¼‚å¸¸ï¼ˆChecked Exceptionsï¼‰å’Œè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆUnchecked Exceptionsï¼‰ã€‚
        -   ç¼–è¯‘æ—¶å¼‚å¸¸ï¼ˆChecked Exceptionsï¼‰
            -   å®šä¹‰ï¼šå¿…é¡»åœ¨ç¼–è¯‘æ—¶å¤„ç†çš„å¼‚å¸¸ã€‚
            -   ç‰¹ç‚¹ï¼šç¼–è¯‘å™¨å¼ºåˆ¶è¦æ±‚ç¨‹åºå‘˜å¤„ç†è¿™äº›å¼‚å¸¸ã€‚
            -   å¦‚æœæ–¹æ³•ä¸­æŠ›å‡ºäº†ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œè°ƒç”¨è€…å¿…é¡»é€šè¿‡ try-catch æ•è·å¼‚å¸¸æˆ–é€šè¿‡ throws å£°æ˜è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚
            -   å¸¸è§ç±»å‹ï¼š`IOException`ã€`SQLException`ã€`ClassNotFoundException`
        -   è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆUnchecked Exceptionsï¼‰
            -   å®šä¹‰ï¼šä¸å¿…åœ¨ç¼–è¯‘æ—¶å¤„ç†çš„å¼‚å¸¸ã€‚
            -   ç‰¹ç‚¹ï¼šç¼–è¯‘å™¨ä¸è¦æ±‚å¿…é¡»æ•è·æˆ–å£°æ˜è¿™äº›å¼‚å¸¸ï¼Œä½†å¯ä»¥é€‰æ‹©æ€§åœ°å¤„ç†ã€‚é€šå¸¸ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·ã€‚
            -   å¸¸è§ç±»å‹ï¼š`NullPointerException`ã€`ArrayIndexOutOfBoundsException`ã€`IllegalArgumentException`ã€`ArithmeticException` ã€`ClassCastException`

å¼‚å¸¸ä½“ç³»å›¾

```java
java.lang.Throwable:å¼‚å¸¸ä½“ç³»çš„æ ¹çˆ¶ç±»
	|---java.lang.Error:é”™è¯¯ã€‚Javaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ã€‚å¦‚JVMç³»ç»Ÿå†…éƒ¨é”™è¯¯ï¼Œèµ„æºè€—å°½ç­‰ä¸¥é‡æƒ…å†µ
							ä¸€èˆ¬ä¸ç¼–å†™é’ˆå¯¹æ€§ä»£ç è¿›è¡Œå¤„ç†
		|----StackOverflowErrorã€OutOfMemroyError
	
	// å¸¸è§å¼‚å¸¸
	|---java.lang.Exception:å¼‚å¸¸ã€‚æˆ‘ä»¬å¯ä»¥ç¼–å†™é’ˆå¯¹æ€§ä»£ç è¿›è¡Œå¤„ç†ã€‚
		|----ç¼–è¯‘æ—¶å¼‚å¸¸ï¼šï¼ˆå—æ£€å¼‚å¸¸ã€checkedå¼‚å¸¸ï¼‰åœ¨æ‰§è¡Œjavac.exeå‘½ä»¤æ—¶ï¼Œå‡ºç°çš„å¼‚å¸¸
			|----ClassNotFoundException
			|----FileNotFoundException
			|----IOException
			|---- ParseExceptionï¼ˆè§£æå¼‚å¸¸ï¼‰
		|----è¿è¡Œæ—¶å¼‚å¸¸ï¼šï¼ˆéå—æ£€å¼‚å¸¸ã€uncheckedå¼‚å¸¸ï¼‰åœ¨æ‰§è¡Œjava.exeå‘½ä»¤æ—¶ï¼Œå‡ºç°çš„å¼‚å¸¸
			|----ArrayIndexOutOfBoundsExceptionï¼ˆæ•°ç»„ç´¢å¼•è¶Šç•Œï¼‰
			|----NullPointerExceptionï¼ˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰
			|----ClassCastExceptionï¼ˆç±»å‹è½¬æ¢å¼‚å¸¸ï¼‰
			|----NumberFormatExceptionï¼ˆæ•°å­—æ ¼å¼åŒ–å¼‚å¸¸ï¼‰
			|----InputMismatchException
			|----ArithmeticExceptionï¼ˆç®—æ•°å¼‚å¸¸ï¼‰
			|----IllegalArgumentExceptionï¼ˆå‚æ•°é”™è¯¯ï¼Œæ¯”å¦‚æ–¹æ³•å…¥å‚ç±»å‹é”™è¯¯ï¼‰
```



## å¸¸è§çš„Errorï¼Ÿ

æœ€å¸¸è§çš„å°±æ˜¯ `VirtualMachineError`ï¼Œå®ƒæœ‰ä¸¤ä¸ªç»å…¸çš„å­ç±»ï¼š`StackOverflowError`ã€`OutOfMemoryError`

```java
public class ErrorTest {

    @Test
    public void testStackOverError() {
        recursion();  // StackOverflowErrorï¼ˆæ ˆå†…å­˜æº¢å‡ºï¼‰
    }

    // æ²¡æœ‰å‡ºå£çš„é€’å½’
    public void recursion() {
        recursion();
    }

    
    @Test
    public void testOutOfMemoryError01() {
        // OutOfMemoryError
        // æ–¹å¼ä¸€  
        int[] arr = new int[Integer.MAX_VALUE];
    }

    @Test
    public void testOutOfMemoryError02() {
        // æ–¹å¼ä¸€
        StringBuilder s = new StringBuilder();
        while (true) {
            s.append("hello");
        }
    }
}
```



## Javaè¿è¡Œæ—¶å¼‚å¸¸å’Œç¼–è¯‘æ—¶å¼‚å¸¸çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

>   é¦–å…ˆæ˜ç¡®
>
>   â€‹	è¿è¡Œæ—¶å¼‚å¸¸ == éå—æ£€å¼‚å¸¸ 
>
>   â€‹	éè¿è¡Œå¼‚å¸¸ == å—æ£€å¼‚å¸¸ == ç¼–è¯‘æ—¶å¼‚å¸¸

åœ¨ Java ä¸­ï¼Œå¼‚å¸¸åˆ†ä¸ºä¸¤å¤§ç±»ï¼šå—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionsï¼‰ å’Œ éå—æ£€å¼‚å¸¸ï¼ˆUnchecked Exceptionsï¼‰
-   **å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰**ï¼šè¿™äº›å¼‚å¸¸åœ¨**ç¼–è¯‘æ—¶å¿…é¡»è¢«æ•è·æˆ–å£°æ˜æŠ›å‡ºï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™**ã€‚ä¾‹å¦‚`IOException`ã€`SQLException`ç­‰ã€‚
-   **éå—æ£€å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰**ï¼šè¿™äº›å¼‚å¸¸ä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶æ•è·æˆ–å£°æ˜æŠ›å‡ºï¼Œç¼–è¯‘å™¨ä¸ä¼šå¼ºåˆ¶è¦æ±‚å¤„ç†å®ƒä»¬ã€‚é€šå¸¸æ˜¯ç”±äºç¼–ç¨‹é”™è¯¯å¯¼è‡´çš„ï¼Œä¾‹å¦‚`NullPointerException`ã€`ArrayIndexOutOfBoundsException`ç­‰ã€‚

**å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰**

å—æ£€å¼‚å¸¸æ˜¯æŒ‡é‚£äº›åœ¨**ç¼–è¯‘é˜¶æ®µ**å°±å¿…é¡»å¤„ç†çš„å¼‚å¸¸ã€‚ç¼–è¯‘å™¨ä¼šå¼ºåˆ¶è¦æ±‚ç¨‹åºå‘˜å¤„ç†è¿™äº›å¼‚å¸¸ï¼Œå¦åˆ™ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚

ç‰¹ç‚¹

-   å¿…é¡»å¤„ç†ï¼šå¦‚æœæ–¹æ³•ä¸­æŠ›å‡ºäº†ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œè°ƒç”¨è€…**å¿…é¡»é€šè¿‡ try-catch å—æ•è·å¼‚å¸¸æˆ–é€šè¿‡ throws å…³é”®å­—å£°æ˜**è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚
-   å¸¸è§ç±»å‹ï¼š`IOException`ã€`SQLException`ã€`ClassNotFoundException` ã€`FileNotFoundException`ç­‰ã€‚

**éå—æ£€å¼‚å¸¸ï¼ˆUnchecked Exceptionï¼‰**

éå—æ£€å¼‚å¸¸æ˜¯æŒ‡é‚£äº›åœ¨**è¿è¡Œæ—¶**æ‰å‘ç”Ÿçš„å¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¼ºåˆ¶è¦æ±‚ç¨‹åºå‘˜å¤„ç†è¿™äº›å¼‚å¸¸ã€‚å®ƒä»¬**é€šå¸¸æ˜¯ç”±äºç¨‹åºä¸­çš„é€»è¾‘é”™è¯¯å¼•èµ·çš„**ã€‚

ç‰¹ç‚¹

-   æ— éœ€å¤„ç†ï¼šç¼–è¯‘å™¨ä¸è¦æ±‚å¿…é¡»æ•è·æˆ–å£°æ˜è¿™äº›å¼‚å¸¸ï¼Œä½†å¯ä»¥é€‰æ‹©æ€§åœ°å¤„ç†ã€‚

-   å¸¸è§ç±»å‹ï¼š`NullPointerException`ã€`ArrayIndexOutOfBoundsException`ã€`IllegalArgumentException`ã€`ArithmeticException` ã€`ClassCastException`ç­‰ã€‚
-   ç»§æ‰¿è‡ª RuntimeExceptionï¼šæ‰€æœ‰è¿è¡Œæ—¶å¼‚å¸¸éƒ½æ˜¯ RuntimeException ç±»åŠå…¶å­ç±»çš„å®ä¾‹ã€‚

| ç‰¹æ€§       | å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionsï¼‰                    | éå—æ£€å¼‚å¸¸ï¼ˆUnchecked Exceptionsï¼‰                           |
| ---------- | ------------------------------------------------- | ------------------------------------------------------------ |
| åˆ«å       | ç¼–è¯‘æ—¶å¼‚å¸¸ã€éè¿è¡Œæ—¶å¼‚å¸¸                          | è¿è¡Œæ—¶å¼‚å¸¸                                                   |
| å®šä¹‰       | å¿…é¡»åœ¨ç¼–è¯‘æ—¶å¤„ç†çš„å¼‚å¸¸                            | è¿è¡Œæ—¶æ‰å‘ç”Ÿçš„å¼‚å¸¸                                           |
| ç¼–è¯‘å™¨è¦æ±‚ | å¿…é¡»æ•è·æˆ–å£°æ˜                                    | ä¸éœ€è¦æ•è·æˆ–å£°æ˜                                             |
| å¸¸è§ç±»å‹   | IOException, SQLException, ClassNotFoundException | NullPointerException, ArrayIndexOutOfBoundsException, IllegalArgumentException |
| ç»§æ‰¿è‡ª     | Exception ç±»åŠå…¶å­ç±»                              | RuntimeException ç±»åŠå…¶å­ç±»                                  |
| ä½¿ç”¨åœºæ™¯   | å¤–éƒ¨ç¯å¢ƒå¯¼è‡´çš„å¼‚å¸¸ï¼Œå¦‚æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¿æ¥ç­‰        | ç¨‹åºé€»è¾‘é”™è¯¯ï¼Œå¦‚ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œã€ç±»è½¬æ¢å¼‚å¸¸ç­‰               |
| å¤„ç†æ–¹å¼   | ä½¿ç”¨ try-catch æˆ– throws                          | å¯ä»¥é€‰æ‹©æ€§åœ°ä½¿ç”¨ try-catch                                   |



## å¸¸è§çš„ç¼–è¯‘æ—¶å¼‚å¸¸ï¼ˆéè¿è¡Œæ—¶å¼‚å¸¸ï¼‰Checked Exceptionsï¼Ÿ

ç¼–è¯‘æ—¶å¼‚å¸¸ï¼ˆå—æ£€å¼‚å¸¸ï¼‰æ˜¯æŒ‡é‚£äº›åœ¨**ç¼–è¯‘é˜¶æ®µ**å°±å¿…é¡»å¤„ç†çš„å¼‚å¸¸ã€‚ç¼–è¯‘å™¨ä¼šå¼ºåˆ¶è¦æ±‚ç¨‹åºå‘˜å¤„ç†è¿™äº›å¼‚å¸¸ï¼Œå¦åˆ™ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚

è°ƒç”¨è€…**å¿…é¡»é€šè¿‡ try-catch å—æ•è·å¼‚å¸¸æˆ–é€šè¿‡ throws å…³é”®å­—å£°æ˜**è¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚

å¸¸è§ç±»å‹ï¼š`IOException`ã€`SQLException`ã€`ClassNotFoundException` ã€`FileNotFoundException`ç­‰ã€‚

`ParseException`

```java
public static void main(String[] args) throws ParseException {
    String data = " 2020-04-10 14:25:25";
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    Date d = simpleDateFormat.parse(data);  // æŠ›å‡ºç¼–è¯‘æ—¶å¼‚å¸¸
    System.out.println(d);
}
```

`InterruptedException`

```java
@Test
public void test1() {
    try {
        Thread.sleep(1000);  // InterruptedException
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
```

`ClassNotFoundException`

```java
@Test
public void test2() {
    try {
        Class.forName("java.lang.String");  // ClassNotFoundException
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}
```

`FileNotFoundException`

```java
@Test
    public void test3() {
        try {
            // FileNotFoundException
            FileInputStream fis = new FileInputStream("hello.txt");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }
```

`SQLException`

```java
@Test
public void test4() {
    try {
        DriverManager.getConnection("...");  // SQLException
    } catch (SQLException throwables) {
        throwables.printStackTrace();
    }
}
```

`IOException`

```java
@Test
public void test5() {
    try {
        FileInputStream fis = new FileInputStream("hello.txt");  // FileNotFoundException
        fis.read();  // IOException
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```



## å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆéå—æ£€å¼‚å¸¸ï¼‰UnChecked Exceptionsï¼Ÿ

éå—æ£€å¼‚å¸¸æ˜¯æŒ‡é‚£äº›åœ¨**è¿è¡Œæ—¶**æ‰å‘ç”Ÿçš„å¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¼ºåˆ¶è¦æ±‚ç¨‹åºå‘˜å¤„ç†è¿™äº›å¼‚å¸¸ã€‚å®ƒä»¬**é€šå¸¸æ˜¯ç”±äºç¨‹åºä¸­çš„é€»è¾‘é”™è¯¯å¼•èµ·çš„**ã€‚

ç‰¹ç‚¹

-   æ— éœ€å¤„ç†ï¼šç¼–è¯‘å™¨ä¸è¦æ±‚å¿…é¡»æ•è·æˆ–å£°æ˜è¿™äº›å¼‚å¸¸ï¼Œä½†å¯ä»¥é€‰æ‹©æ€§åœ°å¤„ç†ã€‚

-   å¸¸è§ç±»å‹ï¼š`NullPointerException`ã€`ArrayIndexOutOfBoundsException`ã€`IllegalArgumentException`ã€`ArithmeticException` ã€`ClassCastException`ç­‰ã€‚

`ArrayIndexOutOfBoundsException`

```java
    @Test
    public void test1() {
        int[] arr = {1, 2, 3};
        System.out.println(arr[3]);  // ArrayIndexOutOfBoundsException æ•°ç»„è§’æ ‡è¶Šç•Œå¼‚å¸¸
        // åœ¨å¼€å‘ä¸­ï¼Œæ•°ç»„çš„è¶Šç•Œå¼‚å¸¸æ˜¯ä¸èƒ½å‡ºç°çš„ï¼Œä¸€æ—¦å‡ºç°äº†ï¼Œå°±å¿…é¡»è¦ä¿®æ”¹æˆ‘ä»¬ç¼–å†™çš„ä»£ç 
    }
```

`NullPointerException`

```java
@Test
public void test2() {
    String srt = null;
    System.out.println(srt.equals("hello"));  // NullPointerException ç©ºæŒ‡é’ˆå¼‚å¸¸
}
```

`ClassCastException`

```java
@Test
public void test3() {
    Object n = 15;
    String str = (String) n;  // ClassCastException
}
```

`NumberFormatException`

```java
@Test
public void test4() {
    String s = "12ab";
    Integer.parseInt(s);  // NumberFormatException
}
```

`InputMismatchException`

```java
@Test
public void test5() {
    Scanner sc = new Scanner(System.in);
    System.out.print("è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°:");
    int n = sc.nextInt();// æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªéæ•´æ•°ï¼Œè®©ç¨‹åºæŠ¥é”™ InputMismatchException
    sc.close();
}
```

`ArithmeticException`ç®—æœ¯å¼‚å¸¸

```java
@Test
public void test6() {
    System.out.println(10 / 0);  // ArithmeticException
}
```



## throwå’Œthrowsçš„åŒºåˆ«ï¼Ÿ

-   throwsä½¿ç”¨äºæ–¹æ³•å£°æ˜ï¼ˆæ–¹æ³•ç­¾åï¼‰å¤„ï¼ŒæŒ‡æ˜å°†äº§ç”Ÿçš„å¼‚å¸¸å‘ä¸Šä¸€å±‚æŠ›å‡ºï¼ˆæŠ›ç»™æ–¹æ³•è°ƒç”¨è€…ï¼‰ã€‚
-   trhowä½¿ç”¨äºæ–¹æ³•å†…éƒ¨ï¼Œåé¢ç´§è·Ÿç€çš„æ˜¯å¼‚å¸¸ç±»å¯¹è±¡ï¼Œè¡¨ç¤ºæ‰‹åŠ¨æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ç±»å¯¹è±¡ã€‚
    -   ä¾‹å¦‚ï¼š`throw new Exception("è¾“å…¥çš„idéæ³•");`
-   throwsæ˜¯ç”¨æ¥å¤„ç†å¼‚å¸¸å¯¹è±¡çš„
-   throwæ˜¯ç”¨æ¥äº§ç”Ÿå¼‚å¸¸å¯¹è±¡çš„



## ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿä¸æ™®é€šçš„åŒºåˆ«ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ



## JDK8çš„æ–°ç‰¹æ€§ï¼Ÿ

### Java8æ–°å¢äº†å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ

-   æ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•
    -   é»˜è®¤æ–¹æ³•ï¼šæ¥å£ä¸­å¯ä»¥å®šä¹‰é»˜è®¤æ–¹æ³•ï¼Œå­ç±»å¯ä»¥é€‰æ‹©æ€§åœ°é‡å†™è¿™äº›æ–¹æ³•ã€‚
    -   é™æ€æ–¹æ³•ï¼šæ¥å£ä¸­å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æ¥å£è°ƒç”¨ã€‚
-   æ–°çš„æ—¥æœŸå’Œæ—¶é—´APIï¼šjava8å¼•å…¥äº†`java.time`åŒ…ï¼Œæä¾›äº†æ›´ä¸°å¯Œçš„æ—¥æœŸå’Œæ—¶é—´å¤„ç†åŠŸèƒ½ã€‚
-   Optionç±»ï¼šOptionç±»ç”¨äºè¡¨ç¤ºå¯èƒ½ä¸ºnullçš„å€¼ï¼Œé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚
-   å‡½æ•°å¼æ¥å£ï¼šå‡½æ•°å¼æ¥å£æ˜¯åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œå¯ä»¥ç”¨`@FunctionalInterface`æ³¨è§£æ ‡è®°ã€‚å‡½æ•°å¼æ¥å£çš„å˜é‡å¯ä»¥é‡‡ç”¨Lambdaè¡¨è¾¾å¼è¿›è¡Œèµ‹å€¼ã€‚
-   Lambdaè¡¨è¾¾å¼ï¼šLambdaè¡¨è¾¾å¼å…è®¸ä½ å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ã€‚
-   æ–¹æ³•å¼•ç”¨ï¼šæ–¹æ³•å¼•ç”¨å…è®¸ä½ ç›´æ¥å¼•ç”¨å·²æœ‰çš„æ–¹æ³•æˆ–æ„é€ å™¨ï¼Œè€Œæ— éœ€æ˜¾å¼åœ°åˆ›å»ºLambdaè¡¨è¾¾å¼ã€‚
-   ç§»é™¤PermGenç©ºé—´ï¼šJava8ç§»é™¤äº†PermGenï¼ˆæ°¸ä¹…ä»£ï¼‰ç©ºé—´ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Metaspaceï¼ˆå…ƒç©ºé—´ï¼‰

### æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•

åœ¨jdk8ä¹‹å‰ï¼Œinterfaceä¹‹ä¸­å¯ä»¥å®šä¹‰å˜é‡å’Œæ–¹æ³•ï¼Œ**å˜é‡å¿…é¡»æ˜¯`public`ã€`static`ã€`final`çš„**ï¼Œ**æ–¹æ³•å¿…é¡»æ˜¯`public`ã€`abstract`çš„**ï¼Œç”±äºè¿™äº›ä¿®é¥°ç¬¦éƒ½æ˜¯é»˜è®¤çš„ï¼Œæ‰€ä»¥åœ¨ä¹¦å†™çš„æ—¶å€™å¯ä»¥çœç•¥ä¸å†™ã€‚

-   æ¥å£å®šä¹‰æ–¹æ³•ï¼špublic  abstract â€”â€” éœ€è¦å­ç±»å®ç°

-   æ¥å£å®šä¹‰å˜é‡ï¼špublicã€staticã€final ï¼ˆè®°ä½ï¼Œæ¥å£ä¸­çš„å˜é‡å¿…é¡»åˆå§‹åŒ–ï¼‰

åœ¨JDK 1.8å¼€å§‹ æ”¯æŒä½¿ç”¨`static`å’Œ`default` ä¿®é¥° å¯ä»¥å†™æ–¹æ³•ä½“ï¼Œä¸éœ€è¦å­ç±»é‡å†™ï¼ˆå¯ä»¥é€‰æ‹©æ€§çš„é‡å†™ï¼‰ã€‚

```java
public interface MyInterface {
    // public final static int age=18;
    int age = 18;  // æ¥å£ä¸­çš„å˜é‡ å¿…é¡»åˆå§‹åŒ–

    //public abstract void doSomething(String input);
    void doSomething(String input);  // æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³• ä¸å¿…å£°æ˜æ–¹æ³•ä½“

    /**
     * é»˜è®¤æ–¹æ³• å¯ä»¥å†™æ–¹æ³•ä½“
     */
    default void getDefaultOrder() {
        System.out.println("æˆ‘æ˜¯é»˜è®¤æ–¹æ³• æˆ‘å¯ä»¥å†™æ–¹æ³•ä½“");
    }

    /**
     * é™æ€æ–¹æ³• å¯ä»¥å†™æ–¹æ³•ä½“
     */
    static void getStaticOrder() {
        System.out.println("æˆ‘æ˜¯é™æ€çš„æ–¹æ³• å¯ä»¥å†™æ–¹æ³•ä½“");
    }
}


public class MyInterfaceImpl implements MyInterface{

    // æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³• å¿…é¡»é‡å†™
    @Override
    public void doSomething(String input) {

    }

    // é»˜è®¤æ–¹æ³•å¯ä»¥é‡å†™ï¼Œä½†æ²¡å¿…è¦
    @Override
    public void getDefaultOrder() {

    }
}
```



### Option



### HashMapåº•å±‚æ•°æ®ç»“æ„çš„æ”¹å˜



### æ—¥æœŸç±»



### CompletableFuture



### Lambda

Javaä¸­ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼ˆLambda expressionï¼‰æ˜¯ä¸ºäº†**ç®€åŒ–åŒ¿åå†…éƒ¨ç±»çš„ä»£ç å½¢å¼**

Lambdaè¡¨è¾¾å¼**é€‚ç”¨äºå•æ¥å£åŒ¿åç±»**(**æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„åŒ¿åå†…éƒ¨ç±»**)

ä»¥ä¸‹æ˜¯Lambdaè¡¨è¾¾å¼ç®€åŒ–åŒ¿åå†…éƒ¨ç±»çš„æ ¼å¼

```java
(åŒ¿åå†…éƒ¨ç±»è¢«é‡å†™æ–¹æ³•çš„å½¢å‚åˆ—è¡¨) -> {
    è¢«é‡å†™æ–¹æ³•çš„æ–¹æ³•ä½“ï¼ˆLambdaä½“ï¼‰
}

lambdaå½¢å‚åˆ—è¡¨ -> lambdaä½“
 
// -> æ˜¯è¯­æ³•å½¢å¼ï¼Œæ— å®é™…æ„ä¹‰
```

æ³¨æ„ï¼š

â€‹	Lamdbaè¡¨è¾¾å¼åªèƒ½ç®€åŒ–**å‡½æ•°å¼æ¥å£çš„åŒ¿åå†…éƒ¨ç±»**çš„å†™æ³•å½¢å¼ï¼ˆæ¢å¥è¯è¯´ï¼ŒLambdaæ˜¯å®ç°å‡½æ•°å¼æ¥å£çš„ä¸€ç§è¯­æ³•ç³–ï¼‰

**å‡½æ•°å¼æ¥å£**ï¼ˆjdk8æ–°ç‰¹æ€§ï¼‰

-   å¿…é¡»æ˜¯æ¥å£
-   æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ˆæ¥å£ä¸­å¯ä»¥æœ‰å¤šä¸ªstaticæ–¹æ³•ã€defaultæ–¹æ³•ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼‰
-   ä¸€èˆ¬å¯ä»¥åŠ ä¸Š**@FunctionalInterface**æ³¨è§£ï¼Œæ¥å£°æ˜è¿™æ˜¯å‡½æ•°å¼æ¥å£

>   Lambdaè¡¨è¾¾å¼åŸºæœ¬ä½œç”¨ï¼Ÿ
>
>   -   ç®€åŒ–å‡½æ•°å¼æ¥å£çš„åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•
>
>   Lambdaè¡¨è¾¾å¼ä½¿ç”¨è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ
>
>   -   å¿…é¡»æ˜¯æ¥å£çš„å•æ¥å£åŒ¿åå†…éƒ¨ç±»
>
>   Lambdaè¡¨è¾¾å¼è¯¥ä½•æ—¶ä½¿ç”¨ï¼Ÿ
>
>   -   éœ€è¦ä½œä¸ºæ¥å£çš„å®ç°ç±»å¯¹è±¡æ—¶ä½¿ç”¨
>
>   Lambdaè¡¨è¾¾å¼çš„å¥½å¤„
>
>   -   Lambdaæ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠLambdaè¡¨è¾¾å¼ç†è§£ä¸ºæ˜¯ä¸€æ®µå¯ä»¥ä¼ é€’çš„ä»£ç ï¼ˆå³ï¼Œ**Lambdaè¡¨è¾¾å¼å¯ä»¥è¢«ç”¨ä½œå‚æ•°ä¼ é€’æˆ–è¿”å›å€¼**ï¼‰ï¼Œå®ƒå¯ä»¥å†™å‡ºæ›´ç®€æ´ã€æ›´çµæ´»çš„ä»£ç ï¼ŒåŒæ—¶ä½¿ä»£ç é£æ ¼æ›´åŠ ç´§å‡‘ï¼Œ**ä½¿Javaè¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾—åˆ°äº†æå‡**
>
>   **Lambdaè¡¨è¾¾å¼çš„æœ¬è´¨ï¼š**
>
>   -   ä¸€æ–¹é¢ï¼ŒLambdaè¡¨è¾¾å¼ä½œä¸ºæ¥å£çš„å®ç°ç±»å¯¹è±¡ã€‚
>   -   å¦ä¸€æ–¹é¢ï¼ŒLambdaè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°



### å‡½æ•°å¼æ¥å£

**ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£**

-   **æ¥å£ä¸­åªå£°æ˜ä¸€ä¸ªæŠ½è±¡æ–¹æ³•**ï¼ˆSingle Abstract Methodï¼Œç®€ç§° SAMï¼‰çš„æ¥å£ï¼Œç§°ä¸ºå‡½æ•°å¼æ¥å£ã€‚
    -   å½“ç„¶è¯¥æ¥å£å¯ä»¥åŒ…å«å…¶ä»–éæŠ½è±¡æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥æœ‰staticæ–¹æ³•ã€defaultæ–¹æ³•ï¼‰ã€‚ 
-   ä½ **å¯ä»¥é€šè¿‡ Lambda è¡¨è¾¾å¼æ¥åˆ›å»ºè¯¥æ¥å£çš„å¯¹è±¡**ã€‚ï¼ˆè‹¥ Lambda è¡¨è¾¾å¼æŠ›å‡ºä¸€ä¸ªå—æ£€å¼‚å¸¸(å³éè¿è¡Œæ—¶å¼‚å¸¸)ï¼Œé‚£ä¹ˆè¯¥å¼‚å¸¸éœ€è¦åœ¨ç›®æ ‡æ¥å£çš„æŠ½è±¡æ–¹æ³•ä¸Šè¿›è¡Œå£°æ˜ï¼‰ã€‚  
-   æˆ‘ä»¬**å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸Šä½¿ç”¨ `@FunctionalInterface` æ³¨è§£**ï¼Œè¿™æ ·åš**å¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£**ã€‚åŒæ—¶ javadoc ä¹Ÿä¼šåŒ…å«ä¸€æ¡å£°æ˜ï¼Œè¯´æ˜è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚  
-   åœ¨ `java.util.function` åŒ…ä¸‹å®šä¹‰äº† Java 8 çš„ä¸°å¯Œçš„å‡½æ•°å¼æ¥å£

**å¯¹å‡½æ•°å¼æ¥å£çš„ç†è§£**

-   Java ä»è¯ç”Ÿæ—¥èµ·å°±æ˜¯ä¸€ç›´å€¡å¯¼**ä¸€åˆ‡çš†å¯¹è±¡**ï¼Œåœ¨ Java é‡Œé¢é¢å‘å¯¹è±¡(OOP)ç¼–ç¨‹æ˜¯ä¸€åˆ‡ã€‚ä½†æ˜¯éšç€ pythonã€scala ç­‰è¯­è¨€çš„å…´èµ·å’Œæ–°æŠ€æœ¯çš„æŒ‘æˆ˜ï¼ŒJava ä¸å¾—ä¸åšå‡ºè°ƒæ•´ä»¥ä¾¿æ”¯æŒæ›´åŠ å¹¿æ³›çš„æŠ€æœ¯è¦æ±‚ï¼Œå³ Java ä¸ä½†å¯ä»¥æ”¯æŒ OOP è¿˜å¯ä»¥æ”¯æŒ OOFï¼ˆé¢å‘å‡½æ•°ç¼–ç¨‹ï¼‰
    -   Java8 å¼•å…¥äº† Lambda è¡¨è¾¾å¼ä¹‹åï¼ŒJava ä¹Ÿå¼€å§‹æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚
    -   Lambda è¡¨è¾¾å¼ä¸æ˜¯ Java æœ€æ—©ä½¿ç”¨çš„ã€‚ç›®å‰ C++ï¼ŒC#ï¼ŒPythonï¼ŒScala ç­‰
        å‡æ”¯æŒ Lambda è¡¨è¾¾å¼ã€‚
-   é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼š
    -   åšä¸€ä»¶äº‹æƒ…ï¼Œæ‰¾ä¸€ä¸ªèƒ½è§£å†³è¿™ä¸ªäº‹æƒ…çš„å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œå®Œæˆäº‹æƒ…ã€‚
-   å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼š
    -   åªè¦èƒ½è·å–åˆ°ç»“æœï¼Œè°å»åšçš„ï¼Œæ€ä¹ˆåšçš„éƒ½ä¸é‡è¦ï¼Œé‡è§†çš„æ˜¯ç»“æœï¼Œä¸é‡è§†è¿‡ç¨‹ã€‚
-   åœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å½“ä¸­ï¼Œå‡½æ•°è¢«å½“åšä¸€ç­‰å…¬æ°‘å¯¹å¾…ã€‚åœ¨å°†å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒLambda è¡¨è¾¾å¼çš„ç±»å‹æ˜¯å‡½æ•°ã€‚ä½†æ˜¯åœ¨ Java8 ä¸­ï¼Œæœ‰æ‰€ä¸åŒã€‚åœ¨ Java8 ä¸­ï¼ŒLambda è¡¨è¾¾å¼æ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°ï¼Œå®ƒä»¬å¿…é¡»ä¾é™„äºä¸€ç±»ç‰¹åˆ«çš„å¯¹è±¡ç±»å‹â€”â€”å‡½æ•°å¼æ¥å£ã€‚
-   ç®€å•çš„è¯´ï¼Œ**åœ¨ Java8 ä¸­ï¼ŒLambda è¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚**è¿™å°±æ˜¯ Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£çš„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**åªè¦ä¸€ä¸ªå¯¹è±¡æ˜¯å‡½æ•°å¼æ¥å£çš„å®ä¾‹ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±å¯ä»¥ç”¨ Lambda è¡¨è¾¾å¼æ¥è¡¨ç¤ºã€‚**

**æ ¸å¿ƒå‡½æ•°å¼æ¥å£**

| ç§°è°“       | å‡½æ•°å¼æ¥å£      | æŠ½è±¡æ–¹æ³•                | æŠ½è±¡æ–¹æ³•ç‰¹ç‚¹          |
| ---------- | --------------- | ----------------------- | --------------------- |
| ä»»åŠ¡å‹æ¥å£ | Runable         | void run()              | æ— å‚æ— è¿”å›å€¼          |
| æ¶ˆè´¹å‹æ¥å£ | Consumer\<T>    | void accept(T t)        | æœ‰å‚æ— è¿”å›å€¼          |
| ä¾›ç»™å‹æ¥å£ | Supplier\<T>    | T get()                 | æ— å‚æœ‰è¿”å›å€¼          |
| å‡½æ•°å‹æ¥å£ | Function\<T, R> | R apply(T t)            | æœ‰å‚æœ‰è¿”å›å€¼          |
| åˆ¤æ–­å‹æ¥å£ | Predicate\<T>   | boolean test(T t)       | æœ‰å‚æœ‰è¿”å›å€¼ï¼Œboolean |
| æ¯”è¾ƒå‹æ¥å£ | Comparator\<T>  | int compare(T t1, T t2) | æœ‰å‚æœ‰è¿”å›å€¼ï¼Œint     |



### æ–¹æ³•å¼•ç”¨

æ–¹æ³•å¼•ç”¨æ˜¯ Java 8 å¼•å…¥çš„ä¸€ç§ç®€æ´è¯­æ³•ï¼Œç”¨äºç›´æ¥å¼•ç”¨å·²æœ‰æ–¹æ³•æˆ–æ„é€ å‡½æ•°ï¼Œè€Œæ— éœ€æ˜¾å¼åœ°ä½¿ç”¨ Lambda è¡¨è¾¾å¼ã€‚å®ƒä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“è¯»ã€‚

ç®€å•æ¥è¯´ï¼š

-   æ–¹æ³•å¼•ç”¨ï¼Œå¯ä»¥çœ‹åšæ˜¯åŸºäºLambdaè¡¨è¾¾å¼çš„è¿›ä¸€æ­¥åˆ»ç”»ã€‚
-   å½“éœ€è¦æä¾›ä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æä¾›æ­¤å®ä¾‹ã€‚
-   **å½“æ»¡è¶³ä¸€å®šçš„æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨æˆ–æ„é€ å™¨å¼•ç”¨æ›¿æ¢lambdaè¡¨è¾¾å¼**

æ–¹æ³•å¼•ç”¨çš„æœ¬è´¨ï¼š

â€‹	**æ–¹æ³•å¼•ç”¨ä½œä¸ºäº†å‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚** ===> ä½“ç°äº† â€ä¸‡ç‰©çš†å¯¹è±¡â€œ



æ–¹æ³•å¼•ç”¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»ï¼š

-   é™æ€æ–¹æ³•å¼•ç”¨
    -   å¼•ç”¨ç±»çš„é™æ€æ–¹æ³•ã€‚
    -   æ ¼å¼ï¼šClassName::staticMethodName

-   å®ä¾‹æ–¹æ³•å¼•ç”¨
    -   å¼•ç”¨æŸä¸ªå¯¹è±¡çš„å®ä¾‹æ–¹æ³•ã€‚
    -   æ ¼å¼ï¼šobjectReference::instanceMethodName

-   ç‰¹å®šç±»å‹çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨ï¼ˆç±»::å®ä¾‹æ–¹æ³•ï¼‰
    -   å¼•ç”¨æŸä¸ªç±»å‹çš„æ‰€æœ‰å®ä¾‹å…±æœ‰çš„æ–¹æ³•ï¼ˆå³è¯¥ç±»å‹æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨çš„æ–¹æ³•ï¼‰ã€‚
    -   æ ¼å¼ï¼šClassName::instanceMethodName
-   æ„é€ å™¨å¼•ç”¨
    -   å¼•ç”¨ç±»çš„æ„é€ æ–¹æ³•æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚
    -   æ ¼å¼ï¼šClassName::new



**é™æ€æ–¹æ³•å¼•ç”¨**

**è¦æ±‚**

-   å‡½æ•°å¼æ¥å£ä¸­çš„**æŠ½è±¡æ–¹æ³•aä¸å…¶å†…éƒ¨å®ç°æ—¶è°ƒç”¨çš„å¯¹è±¡çš„æŸä¸ªé™æ€æ–¹æ³•bçš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹éƒ½ç›¸åŒï¼ˆä¸€è‡´ï¼‰**
-   æ­¤æ—¶ï¼Œå¯ä»¥**è€ƒè™‘ä½¿ç”¨æ–¹æ³•bå¯¹æ–¹æ³•açš„æ›¿æ¢ã€è¦†ç›–**ã€‚æ­¤æ›¿æ¢æˆ–è¦†ç›–å³ä¸º**æ–¹æ³•å¼•ç”¨**

**æ³¨æ„**

-   æ­¤æ–¹æ³•bæ˜¯é™æ€ï¼ˆstaticä¿®é¥°ï¼‰æ–¹æ³•ï¼Œéœ€è¦ç±»è°ƒç”¨

**ä½¿ç”¨åœºæ™¯**

-   å¦‚æœæŸä¸ªLambdaè¡¨è¾¾å¼é‡Œåªæ˜¯è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¹¶ä¸”å‰åå‚æ•°çš„å½¢å¼ä¸€è‡´ï¼Œå°±å¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•å¼•ç”¨

```java
public class MethodRefTest {

    /**
     * ç±» :: é™æ€æ–¹æ³•ï¼ˆé™æ€æ–¹æ³•å¼•ç”¨ï¼‰
     * Comparatorä¸­çš„ int compare(T o1, T o2)
     * Integerä¸­çš„ int compare(int x, int y)
     */
    @Test
    public void test1() {
        // 1.åŒ¿åå†…éƒ¨ç±»
        Comparator<Integer> com1 = new Comparator<Integer>() {
            @Override
            public int compare(Integer o1, Integer o2) {
                return Integer.compare(o1, o2);
            }
        };
        System.out.println(com1.compare(12, 21));

        System.out.println("--------------");
        // 2.Lambdaè¡¨è¾¾å¼ç®€åŒ–
        Comparator<Integer> com2 = (o1, o2) -> Integer.compare(o1, o2);
        System.out.println(com2.compare(12, 21))
        ;
        System.out.println("--------------");
        // 3.æ–¹æ³•å¼•ç”¨ç®€åŒ–
        Comparator<Integer> com3 = Integer::compare;  // ç±»::é™æ€æ–¹æ³•
        System.out.println(com3.compare(34, 34));
    }

    /**
     * Functionä¸­çš„ R apply(T t)
     * Mathåœ¨çš„ long round(double a)
     */
    @Test
    public void test2() {
        // 1.åŒ¿åå†…éƒ¨ç±»
        Function<Double, Long> fun1 = new Function<Double, Long>() {
            @Override
            public Long apply(Double aDouble) {
                return Math.round(aDouble);
            }
        };
        System.out.println(fun1.apply(2.0));

        System.out.println("--------------");
        // 2.Lambdaè¡¨è¾¾å¼
        Function<Double, Long> fun2 = (aDouble) -> Math.round(aDouble);

        System.out.println("--------------");
        // 3.æ–¹æ³•å¼•ç”¨
        // Functionçš„æŠ½è±¡æ–¹æ³•applyä¸Mathç±»çš„é™æ€æ–¹æ³•roundçš„å½¢å‚åˆ—è¡¨ä¸è¿”å›å€¼ç±»å‹ä¸€è‡´
        // å› æ­¤ä½¿ç”¨roundæ–¹æ³•æ›¿æ¢apply
        Function<Double, Long> fun3 = Math::round;  // ç±»::é™æ€æ–¹æ³•
    }
}
```



**å®ä¾‹æ–¹æ³•å¼•ç”¨**

**è¦æ±‚**

-   å‡½æ•°å¼æ¥å£ä¸­çš„**æŠ½è±¡æ–¹æ³•aä¸å…¶å†…éƒ¨å®ç°æ—¶è°ƒç”¨çš„å¯¹è±¡çš„æŸä¸ªæ–¹æ³•bçš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹éƒ½ç›¸åŒï¼ˆä¸€è‡´ï¼‰**
-   æ­¤æ—¶ï¼Œå¯ä»¥**è€ƒè™‘ä½¿ç”¨æ–¹æ³•bå¯¹æ–¹æ³•açš„æ›¿æ¢ã€è¦†ç›–**ã€‚æ­¤æ›¿æ¢æˆ–è¦†ç›–å³ä¸º**æ–¹æ³•å¼•ç”¨**

**æ³¨æ„**

-   æ­¤æ–¹æ³•bæ˜¯éé™æ€ï¼ˆä¸å«staticä¿®é¥°ï¼‰æ–¹æ³•ï¼Œéœ€è¦å¯¹è±¡è°ƒç”¨

**ä½¿ç”¨åœºæ™¯**

å¦‚æœæŸä¸ªLambdaè¡¨è¾¾å¼åªæ˜¯æƒ³è°ƒç”¨ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¸”å‰åå‚æ•°çš„å½¢å¼ä¸€è‡´ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ä¾‹æ–¹æ³•å¼•ç”¨

```java
public class MethodRefTest {

    /**
     * å¯¹è±¡ :: å®ä¾‹æ–¹æ³•ï¼ˆå®ä¾‹æ–¹æ³•å¼•ç”¨ï¼‰
     */
    @Test
    public void test1() {
        // 1.åŒ¿åå†…éƒ¨ç±»
        Consumer<String> con = new Consumer<String>() {
            @Override
            public void accept(String s) {
                System.out.println(s);
            }
        };
        con.accept("hello world");

        System.out.println("--------------");
        // 2.Lambdaè¡¨è¾¾å¼
        Consumer<String> con2 = s -> System.out.println(s);
        con2.accept("hello world");

        System.out.println("--------------");
        // 3.æ–¹æ³•å¼•ç”¨
        Consumer<String> con3 = System.out::println;  // å¯¹è±¡å::å®ä¾‹æ–¹æ³•
        con3.accept("hello world");
    }

    /**
     * Supplierä¸­çš„getæ–¹æ³•
     * Employeeä¸­çš„String getNameæ–¹æ³•
     */
    @Test
    public void test2() {
        Employee emp = new Employee(1001, "é©¬åŒ–è…¾", 34, 6000.38);
        // 1.åŒ¿åå†…éƒ¨ç±»
        Supplier<String> sup1 = new Supplier<String>() {
            @Override
            public String get() {
                return emp.getName();
            }
        };
        System.out.println(sup1.get());

        System.out.println("--------------");
        // 2.Lambdaè¡¨è¾¾å¼
        Supplier<String> sup2 = ()->emp.getName();
        System.out.println(sup2.get());

        System.out.println("--------------");
        // 3.æ–¹æ³•å¼•ç”¨
        // Supplierçš„æŠ½è±¡æ–¹æ³•getä¸empå¯¹è±¡çš„getNameæ–¹æ³•çš„å½¢å‚åˆ—è¡¨ä¸è¿”å›å€¼ç±»å‹ä¸€è‡´
        // å› æ­¤ä½¿ç”¨getNameæ–¹æ³•æ›¿æ¢get
        Supplier<String> sup3 = emp::getName;
        System.out.println(sup3.get());
    }
}
```



**ç±» :: å®ä¾‹æ–¹æ³•** ï¼ˆéš¾ç‚¹ï¼‰

**è¦æ±‚**

-   å‡½æ•°å¼æ¥å£ä¸­çš„**æŠ½è±¡æ–¹æ³•aä¸å…¶å†…éƒ¨å®ç°æ—¶è°ƒç”¨çš„å¯¹è±¡çš„æŸä¸ªæ–¹æ³•bçš„å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹éƒ½ç›¸åŒï¼ˆä¸€è‡´ï¼‰**
-   åŒæ—¶ï¼ŒæŠ½è±¡æ–¹æ³•aä¸­æœ‰nä¸ªå‚æ•°ï¼Œæ–¹æ³•bæœ‰n-1ä¸ªå‚æ•°ï¼Œä¸”**æŠ½è±¡æ–¹æ³•a**çš„**ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ–¹æ³•bçš„è°ƒç”¨è€…**ï¼Œä¸”**æŠ½è±¡æ–¹æ³•açš„ån-1ä¸ªå‚æ•°ä¸æ–¹æ³•bçš„n-1ä¸ªå‚æ•°çš„ç±»å‹ç›¸åŒï¼ˆä¸€è‡´ï¼‰**ã€‚
-   åˆ™æ­¤æ—¶ï¼Œå¯ä»¥**è€ƒè™‘ä½¿ç”¨æ–¹æ³•bå¯¹æ–¹æ³•açš„æ›¿æ¢ã€è¦†ç›–**ã€‚æ­¤æ›¿æ¢æˆ–è¦†ç›–å³ä¸º**æ–¹æ³•å¼•ç”¨**

**æ³¨æ„**

-   æ­¤**æ–¹æ³•bæ˜¯éé™æ€ï¼ˆä¸å«staticä¿®é¥°ï¼‰æ–¹æ³•**ï¼Œéœ€è¦å¯¹è±¡è°ƒç”¨ï¼Œä½†**å½¢å¼ä¸Šï¼Œå†™æˆå¯¹è±¡aæ‰€å±çš„ç±»æ¥è°ƒç”¨**

**ä½¿ç”¨åœºæ™¯**

-   å¦‚æœæŸä¸ªLambdaè¡¨è¾¾å¼é‡Œåªæ˜¯æƒ³è°ƒç”¨ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¸”å‰é¢å‚æ•°åˆ—è¡¨çš„**ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ–¹æ³•çš„ä¸»è°ƒ**ï¼Œ**åé¢æ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯ä½œä¸ºæ”¹å®ä¾‹æ–¹æ³•çš„å…¥å‚**ï¼Œåˆ™å°±å¯ä»¥ä½¿ç”¨ç‰¹å®šç±»å‹çš„æ–¹æ³•å¼•ç”¨ã€‚

```java
public class MethodRefTest3 {

    /**
     * ç±» :: å®ä¾‹æ–¹æ³•ï¼ˆéš¾ç‚¹ï¼‰
     *      todo æœ¬è´¨ä¸Šä¾ç„¶æ˜¯å¯¹è±¡æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•
     * Comparatorä¸­çš„int compare(T o1, T o2)
     * Stringä¸­çš„int t1.compareTo(t2)
     */
    @Test
    public void test1() {
        // 1.åŒ¿åå†…éƒ¨ç±»
        Comparator<String> com1 = new Comparator<String>() {
            @Override
            public int compare(String o1, String o2) {
                return o1.compareTo(o2);
            }
        };
        System.out.println(com1.compare("abc","abd"));
        System.out.println("--------------");

        // 2.Lambdaè¡¨è¾¾å¼
        Comparator<String> com2 = (o1,o2)->o1.compareTo(o2);
        System.out.println(com2.compare("abc","abd"));
        System.out.println("--------------");

        // 3.æ–¹æ³•å¼•ç”¨
        Comparator<String> com3 = String::compareTo;  // ç±»ï¼ˆç‰¹å®šç±»å‹ï¼‰::å®ä¾‹æ–¹æ³•
        System.out.println(com3.compare("abc","abd"));
    }

    /**
     * BiPredicateä¸­çš„boolean test(T t, U u)
     * Stringä¸­çš„boolean s1.equals(s2)
     */
    @Test
    public void test2() {
        // 1.åŒ¿åå†…éƒ¨ç±»
        BiPredicate<String,String> biPre1 = new BiPredicate<String, String>() {
            @Override
            public boolean test(String s1, String s2) {
                return s1.equals(s2);
            }
        };
        System.out.println("--------------");

        // 2.Lambdaè¡¨è¾¾å¼
        BiPredicate<String,String> biPre2 = (S1,S2)->S1.equals(S2);
        System.out.println("--------------");

        // 3.æ–¹æ³•å¼•ç”¨
        // BiPredicateçš„æŠ½è±¡æ–¹æ³•testä¸Stringç±»çš„å®ä¾‹æ–¹æ³•equalsçš„å½¢å‚åˆ—è¡¨ä¸è¿”å›å€¼ç±»å‹ä¸€è‡´
        // ä¸”æŠ½è±¡æ–¹æ³•testç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå®ä¾‹æ–¹æ³•equalsçš„è°ƒç”¨è€…
        // å› æ­¤ä½¿ç”¨equalsæ–¹æ³•æ›¿æ¢test
        BiPredicate<String,String> biPre3 = String::equals;
        System.out.println(biPre3.test("abc","abd"));
    }


    /**
     * Functionä¸­çš„R apply(T t)
     * Employeeä¸­çš„String getNameæ–¹æ³•
     */
    @Test
    public void test3() {
        Employee emp = new Employee(1001, "é©¬åŒ–è…¾", 34, 6000.38);
        // 1.åŒ¿åå†…éƒ¨ç±»
        Function<Employee,String> fun1 = new Function<Employee, String>() {
            @Override
            public String apply(Employee employee) {
                return employee.getName();
            }
        };
        System.out.println(fun1.apply(emp));
        System.out.println("--------------");

        // 2.Lambdaè¡¨è¾¾å¼
        Function<Employee,String> fun2 = employee-> employee.getName();
        System.out.println("--------------");

        // 3.æ–¹æ³•å¼•ç”¨
        // Functionçš„æŠ½è±¡æ–¹æ³•applyä¸Employeeç±»çš„å®ä¾‹æ–¹æ³•getNameçš„å½¢å‚åˆ—è¡¨ä¸è¿”å›å€¼ç±»å‹ä¸€è‡´
        // ä¸”æŠ½è±¡æ–¹æ³•applyç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºå®ä¾‹æ–¹æ³•getNameçš„è°ƒç”¨è€…
        // å› æ­¤ä½¿ç”¨getNameæ–¹æ³•æ›¿æ¢apply
        Function<Employee,String> fun3 = Employee::getName;
        System.out.println(fun3.apply(emp));
    }
}
```



**æ„é€ å™¨å¼•ç”¨**

å½“ Lambda è¡¨è¾¾å¼æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ»¡è¶³ Lambda è¡¨è¾¾å¼å½¢å‚ï¼Œæ­£å¥½æ˜¯ç»™åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ„é€ å™¨çš„å®å‚åˆ—è¡¨ï¼Œå°±å¯ä»¥ä½¿ç”¨æ„é€ å™¨å¼•ç”¨

**è¯´æ˜**

-   è°ƒç”¨äº†ç±»åå¯¹åº”çš„ç±»ä¸­çš„æŸä¸€ä¸ªç¡®å®šçš„æ„é€ å™¨
-   **å…·ä½“è°ƒç”¨çš„æ˜¯ç±»ä¸­çš„å“ªä¸€ä¸ªæ„é€ å™¨è¿™å–å†³äºå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨**

**ä½¿ç”¨åœºæ™¯**

-   å¦‚æœæŸä¸ªLambdaè¡¨è¾¾å¼é‡Œåªæ˜¯åœ¨åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”å‰åå‚æ•°æƒ…å†µä¸€è‡´ï¼Œå°±å¯ä»¥ä½¿ç”¨æ„é€ å™¨å¼•ç”¨ã€‚

```java
public class ConstructorRefTest {
    /**
     * æ„é€ å™¨å¼•ç”¨
     * Supplierä¸­çš„T get()
     */
    @Test
    public void test1(){
        // 1.åŒ¿åå†…éƒ¨ç±»
        Supplier<Employee> sup1 = new Supplier<Employee>() {
            @Override
            public Employee get() {
                return new Employee();
            }
        };
        System.out.println(sup1.get());
        System.out.println("--------------");

        // 2.æ„é€ å™¨å¼•ç”¨
        Supplier<Employee> sup2 = Employee::new;   // è°ƒç”¨çš„æ˜¯Employeeç±»ä¸­ç©ºå‚çš„æ„é€ å™¨
        System.out.println(sup2.get());
    }

    /**
     * Functionä¸­çš„R apply(T t)
     */
    @Test
    public void test2(){
        // 1.åŒ¿åå†…éƒ¨ç±»
        Function<Integer,Employee> fun1 = new Function<Integer, Employee>() {
            @Override
            public Employee apply(Integer id) {
                return new Employee(id);
            }
        };
        System.out.println(fun1.apply(18));
        System.out.println("--------------");

        // 2.æ„é€ å™¨å¼•ç”¨
        Function<Integer,Employee> fun2 = Employee::new;  // è°ƒç”¨çš„æ˜¯Employeeç±»ä¸­å‚æ•°æ˜¯Integer/intç±»å‹çš„æ„é€ å™¨
        System.out.println(fun2.apply(18));
    }

    /**
     * BiFunctionä¸­çš„R apply(T t, U u);
     */
    @Test
    public void test3(){
        // 1.åŒ¿åå†…éƒ¨ç±»
        BiFunction<Integer,String,Employee> fun1 = new BiFunction<Integer, String, Employee>() {
            @Override
            public Employee apply(Integer id, String name) {
                return new Employee(id,name);
            }
        };
        System.out.println(fun1.apply(18,"kk"));
        System.out.println("--------------");

        // 2.æ„é€ å™¨å¼•ç”¨
        BiFunction<Integer,String,Employee> fun2 = Employee::new;  // è°ƒç”¨çš„æ˜¯Employeeç±»ä¸­å‚æ•°æ˜¯Integer/intã€Stringç±»å‹çš„æ„é€ å™¨
        System.out.println(fun2.apply(18,"kk"));
    }
}
```

-   å½“ Lambda è¡¨è¾¾å¼æ˜¯åˆ›å»ºä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œå¹¶ä¸”æ»¡è¶³ Lambda è¡¨è¾¾å¼å½¢å‚ï¼Œæ­£å¥½æ˜¯ç»™åˆ›å»ºè¿™ä¸ªæ•°ç»„å¯¹è±¡çš„é•¿åº¦ï¼Œå°±å¯ä»¥**æ•°ç»„æ„é€ å¼•ç”¨**

```java
/**
     * æ•°ç»„å¼•ç”¨
     * Functionä¸­çš„R apply(T t)
     */
    @Test
    public void test1(){
        // 1.åŒ¿åå†…éƒ¨ç±»
       Function<Integer,Employee[]> fun1 = new Function<Integer, Employee[]>() {
           @Override
           public Employee[] apply(Integer length) {
               return new Employee[length];
           }
       };
        System.out.println(fun1.apply(10));
        System.out.println("--------------");

        // 2.æ•°ç»„å¼•ç”¨
        Function<Integer,Employee[]> fun2 = Employee[]::new;
        System.out.println(fun2.apply(10));

    }
```



### Stream

**Streamæµæ˜¯ä»€ä¹ˆï¼Ÿ**

Streamæµæ˜¯Java8å¼•å…¥çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œç”¨äºå¤„ç†æ•°æ®é›†åˆï¼ˆå¦‚é›†åˆã€æ•°ç»„ï¼‰ã€‚Streamæä¾›äº†ä¸€ç§é«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„å¤„ç†æ•°æ®çš„æ–¹å¼ï¼Œæ”¯æŒé¡ºåºå’Œå¹¶è¡Œå¤„ç†ã€‚Streamä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡ç®¡é“æ“ä½œï¼ˆå¦‚è¿‡æ»¤ã€æ˜ å°„ã€è§„çº¦ç­‰ï¼‰å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚

Streamçš„ä¸»è¦ç‰¹ç‚¹

-   **æ‡’åŠ è½½**ï¼šStreamçš„è®¸å¤šæ“ä½œéƒ½æ˜¯æ‡’åŠ è½½çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨ç»ˆæ­¢æ“ä½œï¼ˆå¦‚collectã€forEachç­‰ï¼‰æ—¶æ‰ä¼šæ‰§è¡Œã€‚
-   **é“¾å¼è°ƒç”¨**ï¼šStreamæ”¯æŒé“¾å¼è°ƒç”¨ï¼Œå¯ä»¥å°†å¤šä¸ªæ“ä½œä¸²è”èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæµæ°´çº¿ã€‚
-   **å‡½æ•°å¼ç¼–ç¨‹**ï¼šStreamæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼Œå¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨æ¥ç®€åŒ–ä»£ç ã€‚
-   **å¹¶è¡Œå¤„ç†**ï¼šStreamå¯ä»¥å¾ˆå®¹æ˜“åœ°è½¬æ¢ä¸ºå¹¶è¡Œæµï¼Œåˆ©ç”¨å¤šæ ¸å¤„ç†å™¨è¿›è¡Œå¹¶è¡Œå¤„ç†ï¼Œæé«˜æ€§èƒ½ã€‚



**Stream å’Œ Collection é›†åˆçš„åŒºåˆ«**

**Collection æ˜¯ä¸€ç§é™æ€çš„å†…å­˜æ•°æ®ç»“æ„ï¼Œ è®²çš„æ˜¯æ•°æ®ï¼Œè€Œ Stream æ˜¯æœ‰å…³è®¡ç®—çš„ï¼Œè®²çš„æ˜¯è®¡ç®—ã€‚**å‰è€…æ˜¯ä¸»è¦é¢å‘å†…å­˜ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œåè€…ä¸»è¦æ˜¯é¢å‘ CPUï¼Œé€šè¿‡ CPU å®ç°è®¡ç®—

æµè¡¨é¢ä¸Šçœ‹æ¥å»å’Œé›†åˆå¾ˆç±»ä¼¼ï¼Œéƒ½å¯ä»¥è®©æˆ‘ä»¬è½¬æ¢å’Œè·å–æ•°æ®ã€‚ä½†æ˜¯ä»–ä»¬ä¹‹é—´å­˜åœ¨ç€æ˜¾è‘—çš„å·®è·ï¼š

-   **Stream æµå¹¶ä¸å­˜å‚¨æ•°æ®ã€‚**è¿™äº›å…ƒç´ å¯èƒ½å­˜å‚¨åœ¨åº•å±‚çš„é›†åˆä¸­ï¼Œæˆ–è€…æ˜¯æŒ‰éœ€ç”Ÿæˆçš„ã€‚
-   **Stream æµæ“ä½œä¸ä¼šä¿®æ”¹å…¶æ•°æ®æºã€‚**ä¾‹å¦‚ï¼Œfilteræ–¹æ³•ä¸ä¼šä»æµä¸­ç§»é™¤å…ƒç´ ï¼Œ**è€Œæ˜¯ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æµ**ï¼Œå…¶ä¸­ä¸åŒ…å«è¿‡æ»¤æ‰çš„å…ƒç´ ã€‚
-   **æµçš„æ“ä½œæ˜¯å°½å¯èƒ½çš„æƒ°æ€§æ‰§è¡Œçš„ã€‚**è¿™æ„å‘³ç€ç›´è‡³éœ€è¦å…¶ç»“æœæ—¶ï¼Œæ“ä½œæ‰ä¼šæ‰§è¡Œï¼ˆå³ ä¸€æ—¦æ‰§è¡Œç»ˆæ­¢æ“ä½œï¼Œå°±æ‰§è¡Œä¸­é—´æ“ä½œé“¾ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åªæƒ³æŸ¥æ‰¾å‰5ä¸ªé•¿å•è¯è€Œä¸æ˜¯æ‰€ä»¥é•¿å•è¯ï¼Œé‚£ä¹ˆfilteræ–¹æ³•å°±ä¼šåœ¨åŒ¹é…ç¬¬5ä¸ªå•è¯ååœæ­¢è¿‡æ»¤ã€‚ç”±æ­¤ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æ“ä½œæ— é™æµã€‚
-   Stream æµä¸€æ—¦æ‰§è¡Œäº†ç»ˆæ­¢æ“ä½œï¼Œå°±ä¸èƒ½è°ƒç”¨å…¶ä»–ä¸­é—´æ“ä½œæˆ–ç»ˆæ­¢æ“ä½œäº†



**æ“ä½œæµçš„å…¸å‹æµç¨‹**

1.  **åˆ›å»ºä¸€ä¸ªæµ** ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚ï¼šé›†åˆã€æ•°ç»„ï¼‰ï¼Œè·å–ä¸€ä¸ªæµ

2.  **ä¸­é—´æ“ä½œ**ï¼ˆæŒ‡å®šå°†åˆå§‹æµè½¬æ¢ä¸ºå…¶ä»–æµï¼Œå¯èƒ½åŒ…å«å¾ˆå¤šæ­¥éª¤ï¼Œå³ä¸­é—´æ“ä½œçš„æ–¹æ³• 

    è¿”å›å€¼ä»ç„¶æ˜¯ Stream ç±»å‹çš„å¯¹è±¡ã€‚å› æ­¤ä¸­é—´æ“ä½œå¯ä»¥æ˜¯ä¸ª**æ“ä½œé“¾**ï¼Œå¯å¯¹æ•°æ®æº 

    çš„æ•°æ®è¿›è¡Œ n æ¬¡å¤„ç†ï¼Œä½†æ˜¯åœ¨ç»ˆç»“æ“ä½œå‰ï¼Œå¹¶ä¸ä¼šçœŸæ­£æ‰§è¡Œï¼‰

3.  **ç»ˆæ­¢æ“ä½œ**ã€‚ï¼ˆè¿™ä¸ªæ“ä½œä¼šå¼ºåˆ¶æ‰§è¡Œä¹‹å‰çš„æƒ°æ€§æ“ä½œï¼Œä¹‹åè¿™ä¸ªæµå°±ä¸èƒ½å†ç”¨äº†ï¼‰



**Streamæµåˆ†ä¸ºå“ªå‡ ç±»ï¼Ÿæ€ä¹ˆåˆ›å»ºï¼Ÿ**

â€‹	Streamæµåœ¨Java8ä¸­ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šé¡ºåºæµï¼ˆSequential Streamï¼‰å’Œå¹¶è¡Œæµï¼ˆPerallel Streamï¼‰ã€‚è¿™ä¸¤ç±»æµçš„ä¸»è¦åŒºåˆ«åœ¨äºå¤„ç†æ•°æ®çš„æ–¹å¼å’Œæ€§èƒ½è¡¨ç°ã€‚

**é¡ºåºæµï¼ˆSequential Streamï¼‰**

é¡ºåºæµæŒ‰é¡ºåºå¤„ç†æ•°æ®ï¼Œæ¯æ¬¡åªå¤„ç†ä¸€ä¸ªå…ƒç´ ã€‚å•çº¿ç¨‹æ‰§è¡Œã€‚é€‚ç”¨äºæ•°æ®é‡è¾ƒå°æˆ–å¯¹é¡ºåºæœ‰è¦æ±‚çš„åœºæ™¯ã€‚ä»£ç å®¹æ˜“ç†è§£å’Œè°ƒå¼

åˆ›å»ºæ–¹å¼ï¼š

-   ä½¿ç”¨`Collection`æ¥å£çš„stream()æ–¹æ³•

-   ä½¿ç”¨`Arrays`ç±»çš„stream()æ–¹æ³•

-   ä½¿ç”¨`Stream`ç±»çš„é™æ€æ–¹æ³•of()ã€iterate()ã€generate()ç­‰

**å¹¶è¡Œæµï¼ˆPerallel Streamï¼‰**

å¹¶è¡Œæµå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå…ƒç´ ï¼Œåˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€‚å¤šçº¿ç¨‹æ‰§è¡Œã€‚é€‚ç”¨äºæ•°æ®é‡è¾ƒå¤§ä¸”å¯¹é¡ºåºæ— ä¸¥æ ¼è¦æ±‚çš„åœºæ™¯ã€‚æ€§èƒ½æå‡æ˜æ˜¾ï¼Œä½†å¯èƒ½ä¼šå¢åŠ ä»£ç å¤æ‚æ€§å’Œè°ƒå¼éš¾åº¦ã€‚

åˆ›å»ºæ–¹å¼ï¼š

-   ä½¿ç”¨`Collection`æ¥å£çš„parallerStream()æ–¹æ³•

-   ä½¿ç”¨`Stream`ç±»çš„parallel()æ–¹æ³•å°†é¡ºåºæµè½¬åŒ–ä¸ºå¹¶è¡Œæµ



## Streamæµä¸­çš„mapå’ŒflatMapæ–¹æ³•çš„åŒºåˆ«ï¼Ÿ

mapæ–¹æ³•ä¸ä¼šå½±å“æµä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œä½†æ˜¯æµä¸­å…ƒç´ çš„ç±»å‹ã€å…ƒç´ å€¼å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚å®ƒçš„åŸç†æ˜¯æŒ‰ç…§ç»Ÿä¸€çš„è§„åˆ™å°†ç°åœ¨çš„æµä¸­æ¯ä¸€ä¸ªå…ƒç´ æ”¹é€ ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ã€‚

mapæ–¹æ³•ä¼šå½±å“æµä¸­å…ƒç´ çš„ä¸ªæ•°ï¼ŒåŒæ—¶æµä¸­å…ƒç´ çš„ç±»å‹ã€å…ƒç´ å€¼å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚å®ƒçš„åŸç†æ˜¯æŒ‰ç…§æŸä¸ªè§„åˆ™å°†ç°åœ¨çš„æµä¸­æ¯ä¸€ä¸ªå…ƒç´ è®¡ç®—ä¸ºä¸€ä¸ªæ–°çš„Streamï¼Œç„¶åæœ€åå°†æ‰€æœ‰Streamåˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„Stream

`map` æ–¹æ³•

-   **ä½œç”¨**ï¼šå°†æ¯ä¸ªå…ƒç´ é€šè¿‡ç»™å®šçš„å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æµã€‚
-   **è¿”å›å€¼**ï¼šè¿”å›ä¸€ä¸ªä¸åŸå§‹æµå¤§å°ç›¸åŒçš„æ–°æµï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç»è¿‡è½¬æ¢åçš„ç»“æœã€‚
-   **é€‚ç”¨åœºæ™¯**ï¼šå½“ä½ éœ€è¦å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹ä¸€çš„è½¬æ¢æ—¶ä½¿ç”¨

```java
List<String> words = Arrays.asList("hello", "world");

List<Integer> wordLengths = words.stream()
    .map(String::length)
    .collect(Collectors.toList());

System.out.println(wordLengths); // è¾“å‡º: [5, 5]
```

`flatMap` æ–¹æ³•

-   **ä½œç”¨**ï¼šå°†æ¯ä¸ªå…ƒç´ é€šè¿‡ç»™å®šçš„å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå¹¶å°†ç»“æœæµå±•å¹³ï¼ˆflattenï¼‰ä¸ºä¸€ä¸ªå•ä¸€çš„æµã€‚
-   **è¿”å›å€¼**ï¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰è½¬æ¢åå…ƒç´ çš„æ–°æµï¼Œå¯èƒ½ä¼šæ¯”åŸå§‹æµæ›´é•¿æˆ–æ›´çŸ­ï¼Œå…·ä½“å–å†³äºè½¬æ¢å‡½æ•°çš„è¾“å‡ºã€‚
-   **é€‚ç”¨åœºæ™¯**ï¼šå½“ä½ éœ€è¦å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹å¤šçš„è½¬æ¢ï¼Œæˆ–è€…å°†åµŒå¥—çš„æµå±•å¹³ä¸ºä¸€ä¸ªå•ä¸€çš„æµæ—¶ä½¿ç”¨ã€‚

```java
List<List<Integer>> nestedLists = Arrays.asList(
    Arrays.asList(1, 2),
    Arrays.asList(3, 4)
);

List<Integer> flatList = nestedLists.stream()
    .flatMap(List::stream)
    .collect(Collectors.toList());

System.out.println(flatList); // è¾“å‡º: [1, 2, 3, 4]
```

**å…³é”®åŒºåˆ«**

| ç‰¹æ€§         | `map`                    | `flatMap`                            |
| :----------- | :----------------------- | :----------------------------------- |
| **è½¬æ¢æ–¹å¼** | ä¸€å¯¹ä¸€è½¬æ¢               | ä¸€å¯¹å¤šè½¬æ¢æˆ–å±•å¹³åµŒå¥—æµ               |
| **è¿”å›ç»“æœ** | æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªæ–°å…ƒç´  | æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå¤šä¸ªå…ƒç´ æˆ–å±•å¹³ä¸ºå•ä¸€æµ |
| **æµçš„ç»“æ„** | ç»´æŒåŸæœ‰çš„æµç»“æ„         | å±•å¹³åµŒå¥—çš„æµç»“æ„                     |



## Streamä¸­mapã€peekã€forEachæ–¹æ³•çš„åŒºåˆ«ï¼Ÿ

`map`

-   **ä½œç”¨**ï¼šå°†æ¯ä¸ªå…ƒç´ é€šè¿‡ç»™å®šçš„å‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æµã€‚
-   **è¿”å›å€¼**ï¼šè¿”å›ä¸€ä¸ªä¸åŸå§‹æµå¤§å°ç›¸åŒçš„æ–°æµï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç»è¿‡è½¬æ¢åçš„ç»“æœã€‚
-   **é€‚ç”¨åœºæ™¯**ï¼šå½“ä½ éœ€è¦å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹ä¸€çš„è½¬æ¢æ—¶ä½¿ç”¨ã€‚
-   **æ˜¯å¦ç»ˆæ­¢æ“ä½œ**ï¼šä¸æ˜¯ç»ˆæ­¢æ“ä½œï¼ˆä¸­é—´æ“ä½œï¼‰ï¼Œå¯ä»¥é“¾å¼è°ƒç”¨å…¶ä»–æµæ“ä½œã€‚

```java
List<String> words = Arrays.asList("hello", "world");

List<Integer> wordLengths = words.stream()
    .map(String::length)
    .collect(Collectors.toList());

System.out.println(wordLengths); // è¾“å‡º: [5, 5]
```

`peek`

-   **ä½œç”¨**ï¼šç”¨äºè°ƒè¯•ç›®çš„ï¼Œåœ¨ä¸æ”¹å˜æµä¸­å…ƒç´ çš„æƒ…å†µä¸‹å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œï¼ˆå¦‚æ‰“å°æ—¥å¿—ï¼‰ã€‚
-   **è¿”å›å€¼**ï¼šè¿”å›åŒ…å«ç›¸åŒå…ƒç´ çš„æ–°æµï¼Œæµçš„ç»“æ„ä¿æŒä¸å˜ã€‚
-   **é€‚ç”¨åœºæ™¯**ï¼šä¸»è¦ç”¨äºè°ƒè¯•ï¼ŒæŸ¥çœ‹æµä¸­å…ƒç´ çš„çŠ¶æ€ï¼Œè€Œä¸å½±å“åç»­æ“ä½œã€‚
-   **æ˜¯å¦ç»ˆæ­¢æ“ä½œ**ï¼šä¸æ˜¯ç»ˆæ­¢æ“ä½œï¼ˆä¸­é—´æ“ä½œï¼‰ï¼Œå¯ä»¥é“¾å¼è°ƒç”¨å…¶ä»–æµæ“ä½œã€‚

```java
List<String> words = Arrays.asList("hello", "world");

List<String> result = words.stream()
    .peek(System.out::println) // æ‰“å°æ¯ä¸ªå…ƒç´ 
    .map(String::toUpperCase)
    .collect(Collectors.toList());

System.out.println(result); // è¾“å‡º: [HELLO, WORLD]
```

`forEach`

-   **ä½œç”¨**ï¼šå¯¹æµä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œç»™å®šçš„æ“ä½œã€‚
-   **è¿”å›å€¼**ï¼šæ— è¿”å›å€¼ï¼ˆ`void`ï¼‰ï¼Œæ“ä½œå®Œæˆåæµç»“æŸã€‚
-   **é€‚ç”¨åœºæ™¯**ï¼šå½“ä½ éœ€è¦å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŸäº›å‰¯ä½œç”¨æ“ä½œï¼ˆå¦‚æ‰“å°ã€æ›´æ–°çŠ¶æ€ç­‰ï¼‰æ—¶ä½¿ç”¨ã€‚
-   **æ˜¯å¦ç»ˆæ­¢æ“ä½œ**ï¼šæ˜¯ç»ˆæ­¢æ“ä½œï¼ˆç»ˆç«¯æ“ä½œï¼‰ï¼Œæ‰§è¡Œåæµç»“æŸï¼Œä¸èƒ½å†é“¾å¼è°ƒç”¨å…¶ä»–æµæ“ä½œã€‚

```java
List<String> words = Arrays.asList("hello", "world");

words.stream()
    .forEach(System.out::println); // è¾“å‡º: hello world

// æ³¨æ„ï¼šforEachä¹‹åä¸èƒ½å†è°ƒç”¨å…¶ä»–æµæ“ä½œ
```

**å…³é”®åŒºåˆ«**

| ç‰¹æ€§             | `map`                    | `peek`                   | `forEach`                            |
| :--------------- | :----------------------- | :----------------------- | :----------------------------------- |
| **ä½œç”¨**         | è½¬æ¢å…ƒç´                  | è°ƒè¯•/æŸ¥çœ‹å…ƒç´             | æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ                       |
| **è¿”å›å€¼**       | æ–°æµï¼ˆè½¬æ¢åçš„å…ƒç´ ï¼‰     | æ–°æµï¼ˆåŸæ ·å…ƒç´ ï¼‰         | æ— è¿”å›å€¼ï¼ˆ`void`ï¼‰                   |
| **æ˜¯å¦ç»ˆæ­¢æ“ä½œ** | ä¸æ˜¯ç»ˆæ­¢æ“ä½œï¼ˆä¸­é—´æ“ä½œï¼‰ | ä¸æ˜¯ç»ˆæ­¢æ“ä½œï¼ˆä¸­é—´æ“ä½œï¼‰ | æ˜¯ç»ˆæ­¢æ“ä½œï¼ˆç»ˆç«¯æ“ä½œï¼‰               |
| **é€‚ç”¨åœºæ™¯**     | å…ƒç´ è½¬æ¢                 | è°ƒè¯•ã€æ—¥å¿—è®°å½•           | æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼ˆå¦‚æ‰“å°ã€æ›´æ–°çŠ¶æ€ç­‰ï¼‰ |

**ä½¿ç”¨æ³¨æ„äº‹é¡¹**

-   **æ€§èƒ½è€ƒè™‘**ï¼š`peek` ä¸»è¦ç”¨äºè°ƒè¯•ï¼Œä¸åº”åœ¨ç”Ÿäº§ä»£ç ä¸­æ»¥ç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¼•å…¥ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚
-   **å‰¯ä½œç”¨**ï¼š`forEach` é€‚ç”¨äºæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼ˆå¦‚æ‰“å°ã€æ›´æ–°çŠ¶æ€ç­‰ï¼‰ï¼Œä½†å®ƒä¼šç»ˆæ­¢æµï¼Œå› æ­¤ä¸èƒ½ä¸å…¶ä»–æµæ“ä½œé“¾å¼è°ƒç”¨ã€‚
-   **ä¸å¯å˜æ€§**ï¼š`map` å’Œ `peek` éƒ½æ˜¯ä¸­é—´æ“ä½œï¼Œä¸ä¼šæ”¹å˜åŸå§‹æµçš„å†…å®¹ï¼Œè€Œæ˜¯è¿”å›æ–°çš„æµï¼Œè¿™ä½¿å¾—æµæ“ä½œæ›´åŠ å®‰å…¨å’Œå¯é¢„æµ‹ã€‚

**æ€»ç»“**

-   **map**ï¼šç”¨äºè½¬æ¢æµä¸­çš„å…ƒç´ ï¼Œç”Ÿæˆæ–°æµã€‚
-   **peek**ï¼šç”¨äºè°ƒè¯•æˆ–æŸ¥çœ‹æµä¸­å…ƒç´ çš„çŠ¶æ€ï¼Œä¸å½±å“æµçš„ç»“æ„ã€‚
-   **forEach**ï¼šç”¨äºå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼Œç»ˆæ­¢æµ



## Javaä¸­åŒ…è£…ç±»ä¸åŸºç¡€ç±»å‹çš„åŒºåˆ«ï¼Ÿ



## Integerçš„æ„é€ å™¨åœ¨Java8åæœ‰å˜åŠ¨ï¼Ÿ

```java
public Integer(int value) {
    this.value = value;
} // ä»jdk9å¼€å§‹ï¼Œæ­¤æ„é€ å™¨è¢«æ ‡è®°ä¸º @Deprecated ï¼Œè€Œæ¨èä½¿ç”¨valueOfæ–¹æ³•
```



## Integerç±»å‹çš„æ•°å€¼æ¯”è¾ƒï¼Ÿ

```java
Integer a = Integer.valueOf(600);
Integer b = Integer.valueOf(600);
int c = 600;
System.out.println(a == b); // false
System.out.println(a.equals(b)); // true
System.out.println(a == c); // true 


Integer x = Integer.valueOf(99);
Integer y = Integer.valueOf(99);
System.out.println(x == y); // true
System.out.println(x.equals(y)); // true
```

åœ¨ Java ä¸­ï¼ŒInteger æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼ˆwrapper classï¼‰ï¼Œç”¨äºå°†åŸºæœ¬æ•°æ®ç±»å‹ int å°è£…ä¸ºå¯¹è±¡ã€‚ç”±äº Integer æ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤åœ¨è¿›è¡Œæ•°å€¼æ¯”è¾ƒæ—¶éœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ï¼Œå°¤å…¶æ˜¯è‡ªåŠ¨è£…ç®±ï¼ˆautoboxingï¼‰å’Œç¼“å­˜æœºåˆ¶çš„å½±å“ã€‚

**åŸºæœ¬æ•°å€¼æ¯”è¾ƒ**

1ï¼‰ä½¿ç”¨ == æ¯”è¾ƒ Integer å¯¹è±¡

-   == æ¯”è¾ƒçš„æ˜¯å¼•ç”¨ï¼šå½“ä½¿ç”¨ == æ¯”è¾ƒä¸¤ä¸ª Integer å¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯å®ƒä»¬çš„å¼•ç”¨ï¼ˆå³å†…å­˜åœ°å€ï¼‰ï¼Œè€Œä¸æ˜¯å®ƒä»¬å°è£…çš„æ•°å€¼ã€‚
-   å¯èƒ½å¯¼è‡´æ„å¤–ç»“æœï¼šå³ä½¿ä¸¤ä¸ª Integer å¯¹è±¡å°è£…ç›¸åŒçš„æ•°å€¼ï¼Œå¦‚æœå®ƒä»¬æ˜¯ä¸åŒçš„å¯¹è±¡å®ä¾‹ï¼Œ== ä¼šè¿”å› falseã€‚

```java
Integer a = new Integer(100);
Integer b = new Integer(100);
System.out.println(a == b); // è¾“å‡º: false
```

2ï¼‰ä½¿ç”¨ .equals() æ–¹æ³•

-   .equals() æ¯”è¾ƒçš„æ˜¯å€¼ï¼šInteger ç±»é‡å†™äº† Object ç±»çš„ equals() æ–¹æ³•ï¼Œç¡®ä¿å®ƒæ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ª Integer å¯¹è±¡å°è£…çš„æ•°å€¼ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚
-   æ¨èä½¿ç”¨ï¼šä¸ºäº†ç¡®ä¿æ­£ç¡®æ€§ï¼Œåº”è¯¥ä½¿ç”¨ equals() æ–¹æ³•æ¥æ¯”è¾ƒ Integer å¯¹è±¡çš„å€¼ã€‚

```java
Integer a = new Integer(100);
Integer b = new Integer(100);
System.out.println(a.equals(b)); // è¾“å‡º: true
```

**è‡ªåŠ¨è£…ç®±ä¸ç¼“å­˜æœºåˆ¶**

Java ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œåœ¨ -128 åˆ° 127 ä¹‹é—´çš„ Integer å¯¹è±¡ä¼šè¢«ç¼“å­˜ï¼ˆé€šè¿‡ Integer.valueOf() å®ç°ï¼‰ã€‚è¿™æ„å‘³ç€åœ¨è¿™ä¸ªèŒƒå›´å†…çš„ Integer å¯¹è±¡å¯èƒ½ä¼šå…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤ä½¿ç”¨ == æ¯”è¾ƒæ—¶å¯èƒ½ä¼šå¾—åˆ° true çš„ç»“æœã€‚

```java
Integer x = 100; // è‡ªåŠ¨è£…ç®±
Integer y = 100; // è‡ªåŠ¨è£…ç®±
System.out.println(x == y); // è¾“å‡º: true (å› ä¸º 100 åœ¨ç¼“å­˜èŒƒå›´å†…)

Integer m = 150; // è‡ªåŠ¨è£…ç®±
Integer n = 150; // è‡ªåŠ¨è£…ç®±
System.out.println(m == n); // è¾“å‡º: false (å› ä¸º 150 ä¸åœ¨ç¼“å­˜èŒƒå›´å†…)
```

**æ€»ç»“**

ä¸ºäº†é¿å…å› è‡ªåŠ¨è£…ç®±å’Œç¼“å­˜æœºåˆ¶å¯¼è‡´çš„æ„å¤–è¡Œä¸ºï¼Œå§‹ç»ˆä½¿ç”¨ .equals() æ–¹æ³• æ¥æ¯”è¾ƒ Integer å¯¹è±¡çš„å€¼ã€‚

**é˜¿é‡Œè§„çº¦**

![1740924091123](assets/æ•´æ•°ç±»å‹åŒ…è£…ç±»æ¯”è¾ƒ.png)

## ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Ÿ





## é™æ€ï¼ˆç±»ï¼‰å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ï¼Ÿ



## é™æ€ï¼ˆç±»ï¼‰æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ



## hashCodeå’Œequalæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ

equalsæ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼ŒhashCodeæ–¹æ³•ç”¨äºè¿”å›å¯¹è±¡çš„å“ˆå¸Œå€¼ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¿…é¡»ä¸€èµ·é‡å†™ï¼Œè€Œä¸”é€‰æ‹©çš„å±æ€§å¿…é¡»ä¸€è‡´ï¼Œå› ä¸ºï¼š

hashCodeæ–¹æ³•å¿…é¡»éµå¾ªï¼š

ï¼ˆ1ï¼‰å¦‚æœè¿›è¡Œequalsæ¯”è¾ƒæ—¶æ‰€ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨hashCodeæ–¹æ³•æ—¶ï¼Œå¿…é¡»ç»“æœä¸€è‡´

ï¼ˆ2ï¼‰å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsä¸ºtrueï¼Œé‚£ä¹ˆå®ƒä»¬çš„hashCodeå€¼ä¹Ÿå¿…é¡»ç›¸åŒ

ï¼ˆ3ï¼‰å¦‚æœä¸¤ä¸ªå¯¹è±¡equalsä¸ºfalseï¼Œé‚£ä¹ˆå®ƒä»¬çš„hashCodeå€¼ç›¸åŒæˆ–ä¸åŒéƒ½å¯ä»¥ã€‚å½“ç„¶ä¸åŒå¯ä»¥æå‡å“ˆå¸Œè¡¨çš„æ€§èƒ½

å¦å¤–ï¼Œequalsæ–¹æ³•å¿…é¡»éµå¾ªï¼š

ï¼ˆ1ï¼‰è‡ªåæ€§ï¼šxä¸ä¸ºnullï¼Œé‚£ä¹ˆx.equals(x)å¿…é¡»ä¸ºtrue

ï¼ˆ2ï¼‰å¯¹ç§°æ€§ï¼šxã€yä¸ä¸ºnullï¼Œé‚£ä¹ˆx.equals(y)ä¸y.equals(x)ç»“æœå¿…é¡»ç›¸åŒ

ï¼ˆ3ï¼‰ä¼ é€’æ€§ï¼šxã€yã€zä¸ä¸ºnullï¼Œå¦‚æœx.equals(y)ä¸ºtrueï¼Œy.equals(z)ä¸ºtrueï¼Œé‚£ä¹ˆx.equals(z)ç»“æœå¿…é¡»ä¸€è‡´

ï¼ˆ4ï¼‰ä¸€è‡´æ€§ï¼šxã€yä¸ä¸ºnullï¼Œä¸”xå’Œyç”¨äºequalsæ¯”è¾ƒçš„å±æ€§å€¼ä¹Ÿæ²¡æœ‰ä¿®æ”¹ï¼Œé‚£ä¹ˆå¤šæ¬¡è°ƒç”¨x.equals(y)ç»“æœå¿…é¡»ä¸€è‡´

ï¼ˆ5ï¼‰å¦‚æœxä¸ä¸ºnullï¼Œx.eqauls(null)å¿…é¡»è¿”å›false

>   é—®ï¼šä¸¤ä¸ªå¯¹è±¡çš„equalsæ–¹æ³•ç›¸ç­‰ï¼ŒhashCodeæ–¹æ³•ä¹Ÿä¼šç›¸ç­‰å—ï¼Ÿ
>
>   ç­”ï¼šå¯¹
>
>   é—®ï¼šä¸¤ä¸ªå¯¹è±¡çš„hashCodeæ–¹æ³•ç›¸ç­‰ï¼Œequalsæ–¹æ³•ä¹Ÿä¼šç›¸ç­‰å—ï¼Ÿ
>
>   ç­”ï¼šä¸å¯¹
>
>   é—®ï¼šä¸ºä»€ä¹ˆé‡å†™equalså°±è¦é‡å†™hashCodeï¼Ÿ
>
>   ç­”ï¼šå› ä¸ºhashCodeå¿…é¡»éµå¾ªä¸Šè¿°3æ¡å¸¸è§„åå®šï¼Œè¿™äº›è§„å®šæ˜¯ä¸º`HashMap`ã€`HashSet`ç­‰åŸºäºå“ˆå¸Œçš„é›†åˆç±»å‹æä¾›æ­£ç¡®è¡Œä¸ºçš„åŸºç¡€ã€‚å¦‚æœä¸éµå®ˆè¿™ä¸ªçº¦å®šï¼Œå¯¹è±¡åœ¨ä½¿ç”¨è¿™äº›é›†åˆç±»å‹æ—¶å¯èƒ½ä¼šè¡¨ç°å‡ºä¸å¯é¢„æµ‹çš„è¡Œä¸º



## é‡å†™ hashCode() æ–¹æ³•çš„åŸºæœ¬åŸåˆ™ï¼Ÿ

-   åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ hashCode() æ–¹æ³•åº”è¯¥è¿”å›ç›¸åŒçš„å€¼ã€‚ 
-   å½“ä¸¤ä¸ªå¯¹è±¡çš„ equals() æ–¹æ³•æ¯”è¾ƒè¿”å› true æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡çš„ hashCode() æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿåº”ç›¸ç­‰ã€‚ 
-   å¯¹è±¡ä¸­ç”¨ä½œ equals() æ–¹æ³•æ¯”è¾ƒçš„ Fieldï¼Œéƒ½åº”è¯¥ç”¨æ¥è®¡ç®— hashCode å€¼ã€‚

### é‡å†™ equals()æ–¹æ³•çš„åŸºæœ¬åŸåˆ™ï¼Ÿ

-   é‡å†™ equals æ–¹æ³•çš„æ—¶å€™ä¸€èˆ¬éƒ½éœ€è¦åŒæ—¶å¤å†™ hashCode æ–¹æ³•ã€‚é€šå¸¸å‚ä¸è®¡ç®—hashCode çš„å¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å‚ä¸åˆ° equals()ä¸­è¿›è¡Œè®¡ç®—ã€‚ 
-   æ¨èï¼šå¼€å‘ä¸­ç›´æ¥è°ƒç”¨ Eclipse/IDEA é‡Œçš„å¿«æ·é”®è‡ªåŠ¨é‡å†™ equals()å’Œ hashCode()æ–¹æ³•å³å¯ã€‚ 

ä¸ºä»€ä¹ˆç”¨ Eclipse/IDEA å¤å†™ hashCode æ–¹æ³•ï¼Œæœ‰ 31 è¿™ä¸ªæ•°å­—ï¼Ÿ 

é¦–å…ˆï¼Œé€‰æ‹©ç³»æ•°çš„æ—¶å€™è¦é€‰æ‹©å°½é‡å¤§çš„ç³»æ•°ã€‚å› ä¸ºå¦‚æœè®¡ç®—å‡ºæ¥çš„ hash åœ°å€è¶Šå¤§ï¼Œæ‰€è°“çš„â€œå†²çªâ€å°±è¶Šå°‘ï¼ŒæŸ¥æ‰¾èµ·æ¥æ•ˆç‡ä¹Ÿä¼šæé«˜ã€‚ï¼ˆå‡å°‘å†²çªï¼‰ 

å…¶æ¬¡ï¼Œ31 åªå ç”¨ 5bits,ç›¸ä¹˜é€ æˆæ•°æ®æº¢å‡ºçš„æ¦‚ç‡è¾ƒå°ã€‚ 

å†æ¬¡ï¼Œ31 å¯ä»¥ ç”± i*31== (i<<5)-1 æ¥è¡¨ç¤º,ç°åœ¨å¾ˆå¤šè™šæ‹Ÿæœºé‡Œé¢éƒ½æœ‰åšç›¸å…³ä¼˜åŒ–ã€‚ï¼ˆæé«˜ç®—æ³•æ•ˆç‡ï¼‰ 

æœ€åï¼Œ31 æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œç´ æ•°ä½œç”¨å°±æ˜¯å¦‚æœæˆ‘ç”¨ä¸€ä¸ªæ•°å­—æ¥ä¹˜ä»¥è¿™ä¸ªç´ æ•°ï¼Œé‚£ä¹ˆæœ€ç»ˆå‡ºæ¥çš„ç»“æœåªèƒ½è¢«ç´ æ•°æœ¬èº«å’Œè¢«ä¹˜æ•°è¿˜æœ‰ 1 æ¥æ•´é™¤ï¼(å‡å°‘å†²çª) 



## equalä¸==çš„åŒºåˆ«ï¼Ÿ

  å§  

## ä¸ºä»€ä¹ˆé‡å†™equalsæ—¶ä¹Ÿéœ€è¦é‡å†™hashCodeï¼Ÿ



## forå¾ªç¯ä¸foreachå¾ªç¯çš„åŒºåˆ«ï¼Ÿ



## ä¸ºä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ



## JDKåŠ¨æ€ä»£ç†ä¸CGLibåŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Ÿ



## ä»€ä¹ˆæ˜¯Javaä¸­çš„æ³¨è§£ï¼Ÿ



## ä»€ä¹ˆæ˜¯Javaçš„åå°„ï¼Ÿ

Java åå°„ï¼ˆReflectionï¼‰ æ˜¯ä¸€ç§å¼ºå¤§çš„æœºåˆ¶ï¼Œå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å–ç±»çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥æ“ä½œç±»çš„å­—æ®µã€æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚é€šè¿‡åå°„ï¼Œç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æŸ¥æˆ–â€œå†…çœâ€ç±»çš„èƒ½åŠ›ï¼Œç”šè‡³å¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹ç±»çš„è¡Œä¸ºã€‚

åå°„çš„**ä¸»è¦åŠŸèƒ½**åŒ…æ‹¬ï¼š

-   è·å–ç±»ä¿¡æ¯ï¼šå¯ä»¥è·å–ç±»çš„åç§°ã€çˆ¶ç±»ã€å®ç°çš„æ¥å£ç­‰ã€‚

-   åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åˆ›å»ºç±»çš„å®ä¾‹ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶çŸ¥é“å…·ä½“çš„ç±»åã€‚

-   è®¿é—®å’Œä¿®æ”¹å­—æ®µï¼šå¯ä»¥è¯»å–æˆ–ä¿®æ”¹ç±»çš„ç§æœ‰å­—æ®µã€‚

-   è°ƒç”¨æ–¹æ³•ï¼šå¯ä»¥è°ƒç”¨ç±»çš„æ–¹æ³•ï¼Œå³ä½¿è¿™äº›æ–¹æ³•æ˜¯ç§æœ‰çš„ã€‚

-   è·å–å’Œè®¾ç½®æ„é€ å‡½æ•°ï¼šå¯ä»¥è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ã€‚

Javaåå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ï¼š

-   åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»
-   åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡
-   åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•
-   åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ä¿¡æ¯
-   åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•
-   åœ¨è¿è¡Œæ—¶å¤„ç†æ³¨è§£
-   ç”ŸæˆåŠ¨æ€ä»£ç†

**åº”ç”¨åœºæ™¯**

-   æ¡†æ¶å¼€å‘ï¼šè®¸å¤šæ¡†æ¶ï¼ˆå¦‚ Springã€Hibernateï¼‰å¤§é‡ä½¿ç”¨åå°„æ¥å®ç°ä¾èµ–æ³¨å…¥ã€åŠ¨æ€ä»£ç†ç­‰åŠŸèƒ½ã€‚
-   åŠ¨æ€åŠ è½½ç±»ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…¶ä»–æ¡ä»¶åŠ¨æ€åŠ è½½ç±»ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…·ä½“çš„ç±»åã€‚
-   è°ƒè¯•å·¥å…·ï¼šåå°„å¯ä»¥ç”¨äºç¼–å†™è°ƒè¯•å·¥å…·ï¼ŒåŠ¨æ€æŸ¥çœ‹å’Œä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ã€‚
-   åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼šåå°„å¯ä»¥ç”¨äºå®ç°è‡ªå®šä¹‰çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–é€»è¾‘ã€‚
-   æµ‹è¯•å·¥å…·ï¼šå•å…ƒæµ‹è¯•æ¡†æ¶ï¼ˆå¦‚ JUnitï¼‰ä½¿ç”¨åå°„æ¥åŠ¨æ€è°ƒç”¨æµ‹è¯•æ–¹æ³•ã€‚

**åå°„ç›¸å…³çš„ä¸»è¦API**

-   **java.lang.Class**ï¼šä»£è¡¨ä¸€ä¸ªç±»

-   java.lang.reflect.Methodï¼šä»£è¡¨ç±»çš„æ–¹æ³• 

-   java.lang.reflect.Fieldï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡

-   java.lang.reflect.Constructorï¼šä»£è¡¨ç±»çš„æ„é€ å™¨ 

-   ....

**åå°„çš„ä¼˜ç¼ºç‚¹**

**ä¼˜ç‚¹ï¼š**

-   æé«˜äº†Javaç¨‹åºçš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œ**é™ä½äº†è€¦åˆæ€§**ï¼Œæé«˜**è‡ªé€‚åº”**èƒ½åŠ›
-   å…è®¸ç¨‹åºåˆ›å»ºå’Œæ§åˆ¶ä»»ä½•ç±»çš„å¯¹è±¡ï¼Œæ— éœ€æå‰**ç¡¬ç¼–ç **ç›®æ ‡ç±»

**ç¼ºç‚¹ï¼š**

-   åå°„çš„**æ€§èƒ½è¾ƒä½**ã€‚
    -   åå°„æœºåˆ¶ä¸»è¦åº”ç”¨åœ¨å¯¹çµæ´»æ€§å’Œæ‰©å±•æ€§è¦æ±‚å¾ˆé«˜çš„ç³»ç»Ÿæ¡†æ¶ä¸Š
-   åå°„ä¼š**æ¨¡ç³Šç¨‹åºå†…éƒ¨é€»è¾‘ï¼Œå¯è¯»æ€§è¾ƒå·®**ã€‚

åå°„åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œä½¿ç”¨å¹¶ä¸å¤šã€‚ä¸»è¦æ˜¯åœ¨æ¡†æ¶çš„åº•å±‚ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼šSpringï¼‰

**åå°„çš„æºå¤´ Class**	

è¦æƒ³è§£å‰–ä¸€ä¸ªç±»ï¼Œå¿…é¡»å…ˆè¦è·å–åˆ°è¯¥ç±»çš„ Class å¯¹è±¡ã€‚è€Œå‰–æä¸€ä¸ªç±»æˆ–ç”¨åå°„è§£å†³å…·ä½“çš„é—®é¢˜å°±æ˜¯ä½¿ç”¨ç›¸å…³ API: 

-   java.lang.Class 
-   java.lang.reflect.* 

 æ‰€ä»¥ï¼ŒClass å¯¹è±¡æ˜¯åå°„çš„æ ¹æºã€‚ 

â€‹	åœ¨ Java ä¸­ï¼Œ`Class` ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œç”¨äºè¡¨ç¤ºå…¶ä»–ç±»çš„å…ƒæ•°æ®ã€‚å®ƒæä¾›äº†ä¸€ç§åœ¨è¿è¡Œæ—¶è·å–å’Œæ“ä½œç±»çš„æ–¹æ³•å’Œå±æ€§çš„æœºåˆ¶ã€‚**æ¯ä¸ªç±»åœ¨Javaè™šæ‹Ÿæœºä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„Classå¯¹è±¡**ï¼Œå¯ä»¥é€šè¿‡è¯¥å¯¹è±¡è·å–ç±»çš„ä¿¡æ¯ã€‚

**ç†è§£Classç±»**

ä»¥Javaç±»çš„åŠ è½½ä¸ºè¯´æ˜ï¼š

â€‹	é’ˆå¯¹ç¼–å†™å¥½çš„ .java æºæ–‡ä»¶ï¼Œä½¿ç”¨ javac.exe è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª .class å­—èŠ‚ç æ–‡ä»¶ã€‚æ¥ç€ï¼Œä½¿ç”¨ java.exe å‘½ä»¤å¯¹æŒ‡å®šçš„ .class æ–‡ä»¶è¿›è¡Œè§£é‡Šæ‰§è¡Œã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†  .class å­—èŠ‚ç æ–‡ä»¶åŠ è½½ï¼ˆä½¿ç”¨ç±»åŠ è½½å™¨ï¼‰åˆ°å†…å­˜ä¸­ï¼ˆå­˜æ”¾åˆ°æ–¹æ³•åŒºï¼‰ã€‚**åŠ è½½åˆ°å†…å­˜ä¸­çš„  .class æ–‡ä»¶å¯¹åº”çš„ç»“æ„å³ä¸º Classçš„ä¸€ä¸ªå®ä¾‹ã€‚**



## Javaåå°„æœºåˆ¶å¦‚ä½•è·å–Classç±»çš„å®ä¾‹ï¼ŒClassç±»æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ

**è·å–Classç±»çš„å®ä¾‹çš„å››ç§æ–¹å¼**

-   ç±»å‹å.class
-   Javaå¯¹è±¡.getClass()
-   Class.forName("ç±»å‹å…¨åç§°")
-   ClassLoaderç±»åŠ è½½å¯¹è±¡.loadClass("ç±»å‹å…¨åç§°")

**æ–¹å¼ 1ï¼šç±»å‹å.class**

â€‹	**è¦æ±‚ç¼–è¯‘æœŸé—´å·²çŸ¥ç±»å‹å‰æ**ï¼šè‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œ**é€šè¿‡ç±»çš„ class å±æ€§ï¼ˆé™æ€å±æ€§ï¼‰è·å–**ï¼Œ**è¯¥æ–¹æ³•æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜** 

```java
Class clazz = String.class; 	// ç±»è°ƒç”¨é™æ€å±æ€§
```

**æ–¹å¼ 2ï¼šJavaå¯¹è±¡.getClass()**

```java
Class clazz = "hello".getClass(); // å¯¹è±¡.getClass()ï¼Œå› ä¸ºåœ¨æ–¹æ³•å®šä¹‰åœ¨Objectåœ¨ï¼Œä»»æ„å†…éƒ½å¯ä»¥ä½¿æ–¹æ³•
```

 **æ–¹å¼ 3ï¼šClass.forName("ç±»å‹å…¨åç§°")**

â€‹	**å¯ä»¥è·å–ç¼–è¯‘æœŸé—´æœªçŸ¥çš„ç±»å‹** 

**å‰æï¼šå·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»å**ï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œå¯é€šè¿‡ Class ç±»çš„é™æ€æ–¹æ³•forName()è·å–ï¼Œå¯èƒ½æŠ›å‡º `ClassNotFoundException`

```java
Class clazz = Class.forName("java.lang.String"); // Classçš„é™æ€æ–¹æ³•ï¼ŒforName(String className) æ¨èä½¿ç”¨
```

**æ–¹å¼ 4ï¼šClassLoaderç±»åŠ è½½å¯¹è±¡.loadClass("ç±»å‹å…¨åç§°")**

â€‹	**ä½¿ç”¨ç±»çš„åŠ è½½å™¨æ–¹å¼**ï¼ˆå…¶å®æˆ‘ä»¬çŸ¥é“äº†ç±»çš„å…¨é™åï¼Œå®Œæˆå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼‰

å‰æï¼šå¯ä»¥**ç”¨ç³»ç»Ÿç±»åŠ è½½å¯¹è±¡æˆ–è‡ªå®šä¹‰åŠ è½½å™¨å¯¹è±¡åŠ è½½æŒ‡å®šè·¯å¾„ä¸‹çš„ç±»å‹** 

ä¾‹å¦‚ï¼š

```java
ClassLoader cl = this.getClass().getClassLoader(); 
Class clazz4 = cl.loadClass("ç±»çš„å…¨ç±»å")
```



**å“ªäº›ç±»å‹å¯ä»¥æœ‰ Class å¯¹è±¡**

Classçš„å®ä¾‹éƒ½å¯ä»¥æŒ‡å‘å“ªäº›ç»“æ„å‘¢ï¼Ÿ

ç®€è¨€ä¹‹ï¼Œæ‰€æœ‰ Java ç±»å‹ï¼ 

ï¼ˆ1ï¼‰classï¼šå¤–éƒ¨ç±»ï¼Œæˆå‘˜(æˆå‘˜å†…éƒ¨ç±»ï¼Œé™æ€å†…éƒ¨ç±»)ï¼Œå±€éƒ¨å†…éƒ¨ç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»

ï¼ˆ2ï¼‰interfaceï¼šæ¥å£ 

ï¼ˆ3ï¼‰[]ï¼šæ•°ç»„ 

ï¼ˆ4ï¼‰enumï¼šæšä¸¾ 

ï¼ˆ5ï¼‰annotationï¼š æ³¨è§£@interface

ï¼ˆ6ï¼‰primitive typeï¼šåŸºæœ¬æ•°æ®ç±»å‹

ï¼ˆ7ï¼‰void



**Classç±»çš„å¸¸ç”¨æ–¹æ³•**

ï¼ˆ1ï¼‰è·å–ç±»ä¿¡æ¯

-   getName()  è·å–ç±»çš„å®Œå…¨é™å®šå
-    getSimpleName()  è·å–ç±»çš„ç®€å•åç§°
-   getPackage()  è·å–ç±»æ‰€åœ¨çš„åŒ…
-   isInterface()  åˆ¤æ–­è¯¥ç±»æ˜¯å¦æ˜¯ä¸€ä¸ªæ¥å£
-   isEnum()  åˆ¤æ–­è¯¥ç±»æ˜¯å¦æ˜¯ä¸€ä¸ªæšä¸¾
-   isAnnotation()  åˆ¤æ–­è¯¥ç±»æ˜¯å¦æ˜¯ä¸€ä¸ªæ³¨è§£  

ï¼ˆ2ï¼‰è·å–æ„é€ å™¨

-   getConstructor(Class<?>... parameterTypes)  è·å–ç±»çš„æŸä¸ªæ„é€ å™¨ï¼šåªèƒ½æ‹¿publicä¿®é¥°çš„æŸä¸ªæ„é€ å™¨å¯¹è±¡
-   getConstructors()  è·å–ç±»çš„æ‰€æœ‰æ„é€ æ–¹æ³•ï¼Œåªèƒ½è·å–publicä¿®é¥°çš„æ„é€ å™¨  
-   getDeclaredConstructor(Class<?>... parameterTypes)  è·å–æŸä¸ªæ„é€ å™¨ï¼šåªè¦ä½ æ•¢å†™ï¼Œå°±èƒ½æ‹¿åˆ°ï¼Œæ— æ‰€è°“æƒé™æ˜¯å¦å¯åŠï¼ˆåŒ…æ‹¬ç§æœ‰ï¼‰
-   getDeclaredConstructors()  è·å–å…¨éƒ¨çš„æ„é€ å™¨ï¼šåªè¦ä½ æ•¢å†™ï¼Œæ— æ‰€è°“æƒé™æ˜¯å¦å¯åŠ

-   setAccessible(boolean flag) æš´åŠ›åå°„(åå°„ä¼šç ´åå°è£…æ€§)

ï¼ˆ3ï¼‰è·å–æ–¹æ³•

-   getMethod(String name, Class<?>... parameterTypes)  è·å–ç±»ä¸­çš„æŸä¸ªæˆå‘˜æ–¹æ³•ï¼Œåªèƒ½è·å–publicä¿®é¥°çš„
-   getMethods()  è·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•ï¼Œåªèƒ½è·å–publicä¿®é¥°çš„ 
-    getDeclaredMethod(String name, Class<?>... parameterTypes)  è·å–ç±»ä¸­æŸä¸ªæˆå‘˜æ–¹æ³•
-   getDeclaredMethods()  è·å–ç±»å£°æ˜çš„æ‰€æœ‰æ–¹æ³•

ï¼ˆ4ï¼‰è·å–å­—æ®µ

-   getField(String name)  è·å–ç±»çš„æŸä¸ªæˆå‘˜å˜é‡ï¼Œåªèƒ½è·å–publicä¿®é¥°çš„
-   getFields() è·å–ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œåªèƒ½è·å–publicä¿®é¥°çš„
-   è·å–ç±»çš„æŸä¸ªæˆå‘˜å˜é‡ getDeclaredField(String name)
-   getDeclaredFields()  è·å–ç±»å£°æ˜çš„æ‰€æœ‰å­—æ®µ

ï¼ˆ5ï¼‰åˆ›å»ºå®ä¾‹

-   newInstance()  åˆ›å»ºç±»çš„å®ä¾‹
    -   æ³¨æ„ï¼šè¦æƒ³å¯¹è±¡åˆ›å»ºæˆåŠŸï¼Œéœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶
        -   1ã€è¦æ±‚è¿è¡Œæ—¶ç±»ä¸­å¿…é¡»æä¾›ç©ºå‚æ„é€ å™¨
        -   2ã€è¦æ±‚æä¾›çš„ç©ºå‚æ„é€ å™¨çš„æƒé™è¦è¶³å¤Ÿï¼Œå¦åˆ™æŠ¥é”™ IllegalAccessException
    -   ä»JDK9å¼€å§‹ï¼Œæ­¤æ–¹æ³•è¢«æ ‡è®°ä¸º `@Deprecated(since="9") `å·²è¿‡æ—¶   
    -   JDK9ä¹‹åï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Constructor ç±»çš„ newInstanceæ–¹æ³• åˆ›å»ºç±»çš„å®ä¾‹

-   Constructor\<T>.newInstance(Object... initargs)  ä½¿ç”¨æŒ‡å®šçš„æ„é€ å™¨åˆ›å»ºä¸€ä¸ªå®ä¾‹

ï¼ˆ6ï¼‰è·å–çˆ¶ç±»å’Œæ¥å£

-   getSuperclass()  è·å–ç±»çš„çˆ¶ç±»
-   getInterfaces()  è·å–ç±»å®ç°çš„æ¥å£

ï¼ˆ7ï¼‰è·å–æ³¨è§£

-   getAnnotation(Class\<T> annotationClass)  è·å–è¯¥ç±»ä¸Šçš„æŒ‡å®šæ³¨è§£
-   getAnnotations()  è·å–è¯¥ç±»ä¸Šçš„æ‰€æœ‰æ³¨è§£
-   getDeclaredAnnotation(Class\<T> annotationClass)  è·å–è¯¥ç±»ä¸Šçš„æŒ‡å®šæ³¨è§£ï¼ˆåŒ…æ‹¬ç§æœ‰ï¼‰
-   getDeclaredAnnotations()  è·å–è¯¥ç±»ä¸Šçš„æ‰€æœ‰æ³¨è§£



## Javaåå°„æœºåˆ¶å¯ä»¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰æ–¹æ³•å—ï¼Ÿ

å¯ä»¥ï¼Œä½†æ˜¯éœ€è¦è¿›è¡Œä¸€ä¸ªé¢å¤–çš„æ“ä½œæ¥ç»•è¿‡Javaçš„è®¿é—®é™åˆ¶æ§åˆ¶ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š

-   1ã€è·å–çˆ¶ç±»çš„ Class å¯¹è±¡
-   2ã€ä½¿ç”¨ getDeclaredMethod æ–¹æ³•è·å–ç§æœ‰æ–¹æ³•
-   3ã€ä½¿ç”¨ setAccessible æ–¹æ³•è§£é™¤è®¿é—®é™åˆ¶ï¼ˆæš´åŠ›åå°„ï¼‰

-   4ã€ä½¿ç”¨ invoke æ–¹æ³•è°ƒç”¨çˆ¶ç±»ç§æœ‰æ–¹æ³•



## Javaåå°„æœ‰æ²¡æœ‰æ€§èƒ½å½±å“|åå°„åˆ°åº•æ…¢åœ¨å“ªé‡Œï¼Ÿ

Javaåå°„ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹æ–¹é¢

1ã€åˆå§‹åŒ–å¼€é”€

-   ç±»åŠ è½½ï¼šä½¿ç”¨åå°„æ—¶ï¼Œå¦‚æœç±»è¿˜æ²¡æœ‰è¢«åŠ è½½åˆ°JVMä¸­ï¼Œåå°„ä¼šè§¦å‘ç±»çš„åŠ è½½è¿‡ç¨‹ã€‚ç±»åŠ è½½æœ¬èº«å°±æ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„æ“ä½œï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ç±»æ–‡ä»¶çš„è¯»å–ã€è§£æå’ŒéªŒè¯

-   å¯¹è±¡åˆ›å»ºï¼šé€šè¿‡åå°„åˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€è¦æŸ¥æ‰¾å’Œè§£æç±»çš„æ„é€ å™¨ï¼Œè¿™æ¯”ç›´æ¥ä½¿ç”¨ new å…³é”®å­—åˆ›å»ºå¯¹è±¡è¦æ…¢

2ã€æ–¹æ³•è°ƒç”¨å¼€é”€

-   åŠ¨æ€ç»‘å®šï¼šåå°„è°ƒç”¨æ–¹æ³•æ—¶ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€æŸ¥æ‰¾å’Œç»‘å®šæ–¹æ³•ï¼Œè¿™æ¯”ç¼–è¯‘æ—¶é™æ€ç»‘å®šçš„æ–¹æ³•è°ƒç”¨æ…¢å¾—å¤šã€‚æ¯æ¬¡è°ƒç”¨åå°„æ–¹æ³•æ—¶ï¼Œéƒ½éœ€è¦è¿›è¡Œæ–¹æ³•æŸ¥æ‰¾å’Œæƒé™æ£€æŸ¥

-   ç¼“å­˜æœºåˆ¶ï¼šè™½ç„¶ç°ä»£JVMå¯¹åå°„æ–¹æ³•è°ƒç”¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¾‹å¦‚ç¼“å­˜æ–¹æ³•æŸ¥æ‰¾ç»“æœï¼Œä½†ä»ç„¶æ— æ³•å®Œå…¨æ¶ˆé™¤æ€§èƒ½å·®è·

3ã€å®‰å…¨æ£€æŸ¥

-   è®¿é—®æ§åˆ¶ï¼šä½¿ç”¨ setAccessibleæ–¹æ³•æ¥è®¿é—®ç§æœ‰æˆå‘˜æ—¶ï¼ŒJVMéœ€è¦è¿›è¡Œé¢å¤–çš„å®‰å…¨æ£€æŸ¥ï¼Œä»¥ç¡®ä¿è¿™ç§æ“ä½œæ˜¯å…è®¸çš„ï¼Œè¿™äº›å®‰å…¨æ£€æŸ¥ä¼šå¢åŠ é¢å¤–çš„å¼€é”€

4ã€å­—ç¬¦ä¸²æ“ä½œ

-   æ–¹æ³•å’Œå­—æ®µåç§°ï¼šåå°„é€šå¸¸éœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²æ¥æŒ‡å®šæ–¹æ³•å’Œå­—æ®µåç§°ï¼Œè¿™ä¼šå¯¼è‡´é¢å¤–çš„å­—ç¬¦ä¸²å¤„ç†å’Œæ¯”è¾ƒæ“ä½œã€‚

5ã€å†…å­˜å¼€é”€

-   å…ƒæ•°æ®ï¼šåå°„æ“ä½œéœ€è¦ç»´æŠ¤å¤§é‡çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¼šå ç”¨é¢å¤–çš„å†…å­˜



## Javaä¸ºä»€ä¹ˆè¦å¼•å…¥æ¨¡å—åŒ–ï¼Ÿï¼ˆJDK9ï¼‰

Javaæ¨¡å—åŒ–æ˜¯æŒ‡Java9åŠå…¶ä¹‹åå¼•å…¥çš„ä¸€ç§æ–°çš„ç»„ç»‡å’Œç®¡ç†ä»£ç çš„æ–¹å¼ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»ŸJavaåº”ç”¨çš„ç±»è·¯å¾„é—®é¢˜å’Œä¾èµ–ç®¡ç†é—®é¢˜ã€‚

å¥½å¤„ï¼š

-   æ›´å¥½çš„å°è£…ï¼šæ¨¡å—åŒ–ç³»ç»Ÿæä¾›äº†å¼ºå°è£…æœºåˆ¶ï¼Œåªæœ‰æ˜¾å¼å¯¼å‡ºçš„åŒ…æ‰èƒ½è¢«å…¶ä»–æ¨¡å—è®¿é—®ï¼Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§
-   æ¸…æ™°çš„ä¾èµ–ç®¡ç†ï¼šæ¨¡å—æè¿°ç¬¦ï¼ˆmodule-info.javaï¼‰æ˜ç¡®å£°æ˜äº†æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œé¿å…äº†ç±»è·¯å¾„æ±¡æŸ“å’Œä¾èµ–å†²çªé—®é¢˜
-   æ›´å¥½çš„æ€§èƒ½ï¼šæ¨¡å—åŒ–ç³»ç»Ÿå¯ä»¥ä¼˜åŒ–ç±»åŠ è½½è¿‡ç¨‹ï¼Œå‡å°‘ä¸å¿…è¦çš„ç±»åŠ è½½ï¼Œæé«˜åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦å’Œè¿è¡Œæ•ˆç‡
-   æ›´å¥½çš„å¯ç»´æŠ¤æ€§ï¼šæ¨¡å—åŒ–ç³»ç»Ÿé¼“åŠ±å°†diamondç»„ç»‡æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ã€‚æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§



## ä»€ä¹ˆæ˜¯Javaä¸­çš„SPIï¼ˆservice provide interfaceï¼‰æœºåˆ¶ï¼Ÿ



## ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿæ³›å‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

 åœ¨Javaä¸­ï¼Œæ³›å‹ï¼ˆGenericsï¼‰æ˜¯æä¾›ç±»å‹å®‰å…¨çš„æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£å’Œæ–¹æ³•æ˜¯ä½¿ç”¨**ç±»å‹å‚æ•°**ã€‚é€šè¿‡ä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥**é‡ç”¨**ç›¸åŒçš„ä»£ç æ¥å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡ï¼ŒåŒæ—¶ä¿æŒ**ç±»å‹çš„å®‰å…¨æ€§**ï¼Œé¿å…äº†è¿è¡Œæ—¶ç±»å‹é”™è¯¯ã€‚



## é›†åˆä½¿ç”¨æ³›å‹æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ

-   å¼ºåˆ¶é›†åˆåªå®¹çº³æŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œé¿å…äº†è¿è¡Œæ—¶å‡ºç°`ClassCastExceotion`ç±»å‹è½¬æ¢å¼‚å¸¸ï¼ŒæŠŠå…ƒç´ ç±»å‹çš„æ£€æŸ¥ä»è¿è¡Œæ—¶æå‰åˆ°äº†ç¼–è¯‘æ—¶ã€‚
-   ä»£ç æ›´æ•´æ´ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦instanceofåˆ¤æ–­å’Œæ˜¾å¼è½¬æ¢ã€‚
-   ä¼˜åŒ–äº†JVMè¿è¡Œæ—¶ç¯å¢ƒï¼Œå› ä¸ºå®ƒä¸ä¼šäº§ç”Ÿç±»å‹æ£€æŸ¥çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œç±»å‹æ£€æŸ¥åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆäº†ã€‚



## Javaä¸­æ³›å‹çš„Tã€Rã€Kã€Vã€Eæ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨Javaä¸­ï¼Œæ³›å‹ä½¿ç”¨ç±»å‹å‚æ•°æ¥è¡¨ç¤ºä¸ç¡®å®šçš„ç±»å‹ã€‚å¸¸è§çš„ç±»å‹å‚æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªï¼Œå®ƒä»¬é€šå¸¸ä»£è¡¨ç‰¹å®šçš„å«ä¹‰ï¼Œä½†è¿™äº›åªæ˜¯**çº¦å®šä¿—æˆ**çš„å‘½åä¹ æƒ¯ï¼Œå¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚

| å­—æ¯ | å«ä¹‰                    | åº”ç”¨åœºæ™¯                                                     | ç¤ºä¾‹                                                |
| ---- | ----------------------- | ------------------------------------------------------------ | --------------------------------------------------- |
| T    | è¡¨ç¤ºä»»æ„ç±»å‹Type        | å¸¸ç”¨äºè¡¨ç¤ºæ³›å‹ç±»æˆ–æ³›å‹æ–¹æ³•ä¸­çš„æŸä¸ªç±»å‹                       | `Comparable<T>`ï¼Œè¡¨ç¤ºTç±»å‹çš„æ¯”è¾ƒå™¨æ¥å£              |
| R    | è¡¨ç¤ºè¿”å›ï¼ˆReturnï¼‰ç±»å‹  | å¸¸ç”¨äºæ³›å‹æ–¹æ³•ä¸­ï¼Œè¡¨ç¤ºæ–¹æ³•çš„è¿”å›å€¼ç±»å‹                       | å‡½æ•°å¼æ¥å£`Function<T,R>`<br>æŠ½è±¡æ–¹æ³•`R apply(T t)` |
| K    | è¡¨ç¤ºé”®ï¼ˆKeyï¼‰ç±»å‹       | å¸¸ç”¨äºè¡¨ç¤ºé”®å€¼å¯¹ä¸­çš„é”®ç±»å‹ï¼Œå°¤å…¶æ˜¯åœ¨ä¸`Map`ç›¸å…³çš„ç±»æˆ–æ¥å£ä¸­  | `Map<K,V>`ï¼Œè¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹                          |
| V    | è¡¨ç¤ºå€¼ï¼ˆValueï¼‰ç±»å‹     | å¸¸ç”¨äºè¡¨ç¤ºé”®å€¼å¯¹ä¸­çš„å€¼ç±»å‹ï¼Œå°¤å…¶æ˜¯åœ¨ä¸`Map`ç›¸å…³çš„ç±»æˆ–æ¥å£ä¸­  | `Map<K,V>`ï¼Œè¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹                          |
| E    | è¡¨ç¤ºå…ƒç´ ï¼ˆElementï¼‰ç±»å‹ | å¸¸ç”¨äºè¡¨ç¤ºé›†åˆä¸­çš„å…ƒç´ ç±»å‹ï¼Œå°¤å…¶æ˜¯åœ¨ä¸`List`ã€`Set`ç­‰é›†åˆç›¸å…³çš„ç±»æˆ–æ¥å£ä¸­ | `List<E>`ï¼Œè¡¨ç¤ºä¸€ä¸ªå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹å…ƒç´ çš„åˆ—è¡¨       |



## æ³›å‹ä¸­çš„<? extends T>å’Œ<? super T>æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

åœ¨Javaæ³›å‹ä¸­ï¼Œ`<? extends T>`å’Œ`<? super T>`æ˜¯ä¸¤ç§é€šé…ç¬¦é™åˆ¶ï¼Œç”¨äºæ›´çµæ´»çš„å¤„ç†æ³›å‹ç±»å‹ã€‚å®ƒä»¬åˆ†åˆ«è¡¨ç¤ºä¸Šç•Œé€šé…ç¬¦å’Œä¸‹ç•Œé€šé…ç¬¦ã€‚

**ä¸Šç•Œé€šé…ç¬¦`<? extends T>`**

-   å«ä¹‰ï¼šè¡¨ç¤ºæœªçŸ¥ç±»å‹ï¼Œä½†è¯¥ç±»å‹æ˜¯`T`æˆ–è€…`T`çš„å­ç±»å‹ã€‚
-   ç”¨é€”ï¼šä¸»è¦ç”¨äº**è¯»å–æ•°æ®**ï¼Œè®©ç¼–è¯‘å™¨çŸ¥é“è¯¥ç±»å‹æ˜¯`T`æˆ–è€…`T`çš„å­ç±»å‹ã€‚æ‰€ä»¥å¯ä»¥ä»è¯¥ç±»å‹ä¸­å®‰å…¨çš„è¯»å–Tç±»å‹çš„æ•°æ®ï¼Œä½†ä¸èƒ½å†™å…¥ï¼ˆé™¤äº†`null`ï¼‰

ç¤ºä¾‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªæ–¹æ³•éœ€è¦ä»ä¸€ä¸ªåˆ—è¡¨åœ¨è¯»å–`Number`ç±»å‹çš„æ•°æ®ï¼š

```java
public void readNumbers(List<? extends Number> list) {
    for (Number number : list) {
        // å¯ä»¥å®‰å…¨çš„è¯»å–æ•°æ®
        System.out.println(number); 
    }
    
    // ä¸èƒ½å†™å…¥æ•°æ®ï¼Œé™¤éå†™å…¥null
    // list.add(1); // ç¼–è¯‘æŠ¥é”™
    list.add(null);
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`List<? extends Number>`å¯ä»¥æ¥å—`List<Number>`ã€`List<Integer>`ã€`List<Double>`ç­‰ç±»å‹ï¼Œä½†ä¸èƒ½å‘åˆ—è¡¨ä¸­æ·»åŠ æ–°çš„å…ƒç´ ï¼ˆé™¤äº†nullï¼‰ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…·ä½“çš„ç±»å‹ã€‚



**ä¸‹ç•Œé€šé…ç¬¦`<? super T>`**

-   å«ä¹‰ï¼šè¡¨ç¤ºæœªçŸ¥ç±»å‹ï¼Œä½†è¯¥ç±»å‹æ˜¯`T`æˆ–è€…`T`çš„çˆ¶ç±»å‹ã€‚
-   ç”¨é€”ï¼šä¸»è¦ç”¨äº**å†™å…¥æ•°æ®**ï¼Œè®©ç¼–è¯‘å™¨çŸ¥é“è¯¥ç±»å‹æ˜¯`T`æˆ–è€…`T`çš„çˆ¶ç±»å‹ã€‚æ‰€ä»¥å¯ä»¥å®‰å…¨åœ°å‘è¯¥ç±»å‹ä¸­å†™å…¥æ•°æ®ï¼Œä½†ä¸èƒ½è¯»å–ï¼ˆé™¤éè¯»å–ä¸º`Object`ç±»å‹ï¼‰

ç¤ºä¾‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªæ–¹æ³•éœ€è¦å‘ä¸€ä¸ªåˆ—è¡¨åœ¨å†™å…¥`Integer`ç±»å‹çš„æ•°æ®ï¼š

```java
public void writeInteger(List<? extends Integer> list) { 
	// å¯ä»¥å®‰å…¨çš„å†™å…¥æ•°æ®     æ³¨æ„ï¼šåªèƒ½å†™å…¥Integeræˆ–å…¶å­ç±»å‹æ•°æ®
    list.add(1); 
    
    // ä¸èƒ½è¯»å–æ•°æ®ï¼Œé™¤éè¯»å–ä¸ºObjectç±»å‹
    // Integer number = list.get(1); // ç¼–è¯‘æŠ¥é”™
    Object number = list.get(1);
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`List<? super Integer>`å¯ä»¥æ¥å—`List<Integer>`ã€`List<Number>`ã€`List<Object>`ç­‰ç±»å‹ï¼Œå¯ä»¥å‘åˆ—è¡¨ä¸­æ·»åŠ `Integer`ç±»å‹åŠå…¶å­ç±»å‹çš„æ•°æ®ï¼Œä½†ä¸èƒ½ä»åˆ—è¡¨ä¸­è¯»å–æ•°æ®ï¼ˆé™¤éè¯»å–ä¸ºObjectç±»å‹ï¼‰

**ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çš„è®°å¿†æ³•åˆ™**

ä¸ºäº†æ›´å¥½åœ°è®°ä½ `<? extends T>` å’Œ `<? super T>` çš„ä½¿ç”¨åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è®°å¿†æ³•åˆ™ï¼š

-   **PECS**ï¼š**P**roducer **E**xtends, **C**onsumer **S**uper

    -   **ç”Ÿäº§è€…ï¼ˆProducerï¼‰** ä½¿ç”¨ `<? extends T>`ï¼šå½“ä½ éœ€è¦ä»é›†åˆä¸­è¯»å–æ•°æ®æ—¶ã€‚

    -   ```java
        // é›†åˆå·¥å…·ç±»Collections
        public static <T extends Object & Comparable<? super T>> T max(Collection<? extends T> coll) 
        ```

    -   **æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰** ä½¿ç”¨ `<? super T>`ï¼šå½“ä½ éœ€è¦å‘é›†åˆä¸­å†™å…¥æ•°æ®æ—¶ã€‚

    -   ```java
        // é›†åˆå·¥å…·ç±»Collections
        public static <T> boolean addAll(Collection<? super T> c, T... elements)
        public static <T> void copy(List<? super T> dest, List<? extends T> src)    
        public static <T> void fill(List<? super T> list, T obj)
        ```

**æ€»ç»“**

| é€šé…ç¬¦          | å«ä¹‰           | ç‰¹ç‚¹                     | ä½¿ç”¨åœºæ™¯             |
| :-------------- | :------------- | :----------------------- | :------------------- |
| `<? extends T>` | æœªçŸ¥ç±»å‹çš„ä¸Šç•Œ | åå˜ï¼Œåªèƒ½è¯»å–ï¼Œä¸èƒ½å†™å…¥ | ä½œä¸ºç”Ÿäº§è€…ï¼Œè¯»å–æ•°æ® |
| `<? super T>`   | æœªçŸ¥ç±»å‹çš„ä¸‹ç•Œ | é€†å˜ï¼Œåªèƒ½å†™å…¥ï¼Œä¸èƒ½è¯»å– | ä½œä¸ºæ¶ˆè´¹è€…ï¼Œå†™å…¥æ•°æ® |

```java
<? extends Number>  // (æ— ç©·å° , Number]
// åªå…è®¸æ³›å‹ä¸º Number åŠ Number å­ç±»çš„å¼•ç”¨è°ƒç”¨
    
<? super Number>  // [Number , æ— ç©·å¤§)
// åªå…è®¸æ³›å‹ä¸º Number åŠ Number çˆ¶ç±»çš„å¼•ç”¨è°ƒç”¨
    
<? extends Comparable>
// åªå…è®¸æ³›å‹ä¸ºå®ç° Comparable æ¥å£çš„å®ç°ç±»çš„å¼•ç”¨è°ƒç”¨
```

é€šè¿‡åˆç†ä½¿ç”¨ `<? extends T>` å’Œ `<? super T>`ï¼Œä½ å¯ä»¥ç¼–å†™æ›´åŠ çµæ´»å’Œå®‰å…¨çš„æ³›å‹ä»£ç ï¼ŒåŒæ—¶ç¡®ä¿ç±»å‹å®‰å…¨æ€§å’Œä»£ç çš„å¯ç»´æŠ¤æ€§



## æ³›å‹çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ





## æ³›å‹æ“¦é™¤ï¼Ÿä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ 

æ³›å‹æ“¦é™¤æ˜¯Javaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ³›å‹ä»£ç æ—¶çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒçš„ç›®çš„æ˜¯ç¡®ä¿æ³›å‹èƒ½å¤Ÿä¸Javaçš„æ—§ç‰ˆæœ¬ï¼ˆå³ä¸æ”¯æŒæ³›å‹çš„ç‰ˆæœ¬ï¼‰å…¼å®¹ã€‚

åœ¨Javaä¸­ï¼Œæ³›å‹ä¿¡æ¯åªå­˜åœ¨äºæºä»£ç å’Œç¼–è¯‘æ—¶ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ‰€æœ‰çš„æ³›å‹ç±»å‹ä¿¡æ¯éƒ½ä¼šè¢«æ“¦é™¤ã€‚è¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶ï¼Œæ‰€æœ‰çš„æ³›å‹ç±»å‹éƒ½è¢«æ›¿æ¢ä¸ºå®ƒä»¬çš„ä¸Šé™ç±»å‹ï¼ˆå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šä¸Šé™ï¼Œåˆ™é»˜è®¤ä¸ºObjectï¼‰



è€ƒè™‘ä¸€ä¸ªç®€å•çš„æ³›å‹ç±»ï¼š

```java
public class Box<T> {
    private T value;

    public void setValue(T value) {
        this.value = value;
    }

    public T getValue() {
        return value;
    }
}
```

åœ¨ç¼–è¯‘æ—¶ï¼Œæ³›å‹ç±»å‹Tä¼šè¢«æ“¦é™¤ï¼Œå¹¶æ›¿æ¢ä¸ºå®ƒçš„ä¸Šé™ç±»å‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šä¸Šé™ç±»å‹ï¼ŒTä¼šè¢«æ›¿æ¢ä¸ºObjectã€‚ç¼–è¯‘åçš„ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š

```java
public class Box {
    private Object value;

    public void setValue(Object value) {
        this.value = value;
    }

    public Object getValue() {
        return value;
    }
}
```

**ç±»å‹æ“¦é™¤çš„å½±å“**

-   **è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥**ï¼šç”±äºæ³›å‹ç±»å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶è¢«æ“¦é™¤ï¼Œæ— æ³•åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ç±»å‹çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½ä½¿ç”¨instanceofæ“ä½œç¬¦æ£€æŸ¥æ³›å‹ç±»å‹ã€‚

```java
Box<String> stringBox = new Box<>();
if (stringBox instanceof Box<String>) { // ç¼–è¯‘é”™è¯¯
    // ...
}
```

-   **æ³›å‹æ•°ç»„**ï¼šä¸èƒ½åˆ›å»ºæ³›å‹ç±»å‹çš„æ•°ç»„ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶æ— æ³•ç¡®å®šæ³›å‹ç±»å‹

```java
List<String>[] stringLists = new List<String>[10]; // ç¼–è¯‘é”™è¯¯
```

-   **ç±»å‹å®‰å…¨**ï¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€‚ç„¶è€Œï¼Œç”±äºç±»å‹æ“¦é™¤ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä»å¯èƒ½å‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚

```java
List<String> stringList = new ArrayList<>();
List rawList = stringList; // å…è®¸ï¼Œä½†ä¸å®‰å…¨
rawList.add(123); // ç¼–è¯‘æ—¶ä¸æŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶å¯èƒ½å¯¼è‡´é—®é¢˜
String str = stringList.get(0); // è¿è¡Œæ—¶æŠ›å‡ºClassCastException
```

**ä½¿ç”¨é™åˆ¶**

-   **é™æ€ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨æ³›å‹**ï¼šä¸èƒ½åœ¨é™æ€å­—æ®µæˆ–é™æ€æ–¹æ³•ä¸­ä½¿ç”¨ç±»å‹å‚æ•°ï¼Œå› ä¸ºç±»å‹å‚æ•°æ˜¯åœ¨å®ä¾‹åŒ–æ—¶æ‰æŒ‡å®šçš„ï¼Œè€Œé™æ€æˆå‘˜ä¸å…·ä½“å®ä¾‹æ— å…³

```java
public class GenericClass<T> {
    private static T value; // ç¼–è¯‘é”™è¯¯
    
    public static T staticMethod(T param) { // ç¼–è¯‘é”™è¯¯
        return param;
    }
}
```

-   **æ³›å‹å®ä¾‹åŒ–**ï¼šä¸èƒ½ç›´æ¥å®ä¾‹åŒ–æ³›å‹ç±»å‹ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶æ³›å‹ç±»å‹ä¿¡æ¯å·²ç»è¢«æ“¦é™¤

```java
public class GenericClass<T> {
    public void createInstance() {
        T obj = new T(); // ç¼–è¯‘é”™è¯¯
    }
}
```





## Javaä¸­æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿ



## ä»€ä¹ˆæ˜¯Javaä¸­çš„Integerç¼“å­˜æ± ï¼Ÿ



## ç®€è¿°Javaçš„ç±»åŠ è½½è¿‡ç¨‹ï¼Ÿ



## ä»€ä¹ˆæ˜¯BigDecimalï¼Ÿä½•æ—¶ä½¿ç”¨ï¼Ÿ

Javaä¸­`java.math`åŒ…ä¸­æä¾›çš„APIç±»BigDecimalï¼Œç”¨æ¥å¯¹è¶…è¿‡16ä½æœ‰æ•ˆä½çš„æ•°è¿›è¡Œç²¾ç¡®çš„è¿ç®—ã€‚

åŒç²¾åº¦æµ®ç‚¹å‹å˜é‡**doubleå¯ä»¥å¤„ç†16ä½æœ‰æ•ˆæ•°**ï¼Œä½†å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦å¯¹æ›´å¤§æˆ–æ›´å°çš„æ•°è¿›è¡Œè¿ç®—å’Œå¤„ç†ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºå“ªäº›ä¸éœ€è¦å‡†ç¡®è®¡ç®—ç²¾åº¦çš„æ•°å­—ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Floatå’ŒDoubleå¤„ç†ï¼Œä½†æ˜¯**Double.valueOf()**

**å’ŒFloat.valueOf()ä¼šä¸¢å¤±ç²¾åº¦**ã€‚æ‰€ä»¥å¼€å‘ä¸­ï¼Œå¦‚æœéœ€è¦ç²¾ç¡®è®¡ç®—çš„ç»“æœï¼Œåˆ™å¿…é¡»ä½¿ç”¨BigDecimalç±»æ¥æ“ä½œã€‚

BigDecimalæ‰€åˆ›å»ºçš„æ˜¯å¯¹è±¡ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ä¼ ç»Ÿçš„ + - * / ç­‰ç®—æœ¯è¿ç®—ç¬¦ç›´æ¥å¯¹å…¶å¯¹è±¡è¿›è¡Œæ•°å­¦è¿ç®—ã€‚

 

**ä½•æ—¶ä½¿ç”¨ BigDecimalï¼Ÿ**

 **1ã€éœ€è¦é«˜ç²¾åº¦è®¡ç®—çš„åœºæ™¯**

é‡‘èè®¡ç®—ï¼šåœ¨æ¶‰åŠè´§å¸ã€ç¨ç‡ã€åˆ©æ¯ç­‰è®¡ç®—æ—¶ï¼Œç²¾åº¦è¦æ±‚éå¸¸é«˜ï¼Œä»»ä½•å¾®å°çš„è¯¯å·®éƒ½å¯èƒ½å¯¼è‡´ä¸¥é‡çš„åæœã€‚ä¾‹å¦‚ï¼š

```java
BigDecimal price = new BigDecimal("19.99");
BigDecimal taxRate = new BigDecimal("0.07");
BigDecimal tax = price.multiply(taxRate); // ç²¾ç¡®è®¡ç®—ç¨é¢
```

ç§‘å­¦è®¡ç®—ï¼šåœ¨éœ€è¦é«˜ç²¾åº¦çš„ç§‘å­¦æˆ–å·¥ç¨‹è®¡ç®—ä¸­ï¼ŒBigDecimal å¯ä»¥ç¡®ä¿ç»“æœçš„å‡†ç¡®æ€§ã€‚

**2ã€é¿å…æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜**

æµ®ç‚¹æ•°ï¼ˆfloat å’Œ doubleï¼‰åœ¨å­˜å‚¨å’Œè®¡ç®—æ—¶å¯èƒ½ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼š

```java
double a = 0.1;
double b = 0.2;
System.out.println(a + b); // è¾“å‡º: 0.30000000000000004
```

**3ã€éœ€è¦æ§åˆ¶èˆå…¥è¡Œä¸º**

åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œéœ€è¦å¯¹ç»“æœè¿›è¡Œç²¾ç¡®çš„èˆå…¥æ“ä½œï¼ˆå¦‚å››èˆäº”å…¥ã€å‘ä¸Šå–æ•´ã€å‘ä¸‹å–æ•´ç­‰ï¼‰ã€‚BigDecimal æä¾›äº†çµæ´»çš„èˆå…¥æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ setScale() æ–¹æ³•å®ç°ã€‚

```java
BigDecimal value = new BigDecimal("10.567");
BigDecimal rounded = value.setScale(2, RoundingMode.HALF_UP); // å››èˆäº”å…¥ä¿ç•™ä¸¤ä½å°æ•°
System.out.println(rounded); // è¾“å‡º: 10.57
```

**4ã€å¤„ç†å¤§èŒƒå›´æ•°å€¼**

BigDecimal æ”¯æŒä»»æ„ç²¾åº¦çš„æ•°å€¼è¡¨ç¤ºï¼Œå¯ä»¥å¤„ç†è¶…å‡º long æˆ– double èŒƒå›´çš„æ•°å€¼ã€‚ä¾‹å¦‚ï¼š

```java
BigDecimal bigValue = new BigDecimal("123456789012345678901234567890");
System.out.println(bigValue); // è¾“å‡º: 123456789012345678901234567890
```



**å¼€å‘ç»éªŒ**

-   Javaå®ä½“ç±»ä¸­ä½¿ç”¨BigDecimalï¼Œå¯¹åº”SQLä¸­åº”è¯¥ä½¿ç”¨DECIMAL

-   åˆ›å»ºBigDecimalå¯¹è±¡æ—¶ï¼Œä¼˜å…ˆæ¨èå…¥å‚ä¸ºStringç±»å‹çš„æ„é€ å™¨ æˆ– ä½¿ç”¨valueOfæ–¹æ³•

-   BigDecimalçš„ç­‰å€¼æ¯”è¾ƒåº”è¯¥ä½¿ç”¨compareToæ–¹æ³•ï¼Œè€Œä¸æ˜¯equalsæ–¹æ³•
-   BigDecimalå¯¹è±¡è¿›è¡Œé™¤æ³•æ“ä½œæ—¶ï¼Œæ³¨æ„æŒ‡å®šç²¾åº¦
-   å½“ä¸æƒ³è¾“å‡ºç§‘å­¦è®¡æ•°æ³•æ—¶ï¼Œä½¿ç”¨toPlainStringæ–¹æ³•

**é˜¿é‡Œè§„çº¦**

![1740927553936](assets/BigDecimal1.png)



![1740927598377](assets/BigDecimal2.png)

## BigDecimalæœ€ä½³å®è·µ

```java
import java.math.BigDecimal;

public class ArithmeticUtils
{
    //é»˜è®¤é™¤æ³•è¿ç®—ç²¾åº¦
    private static final int DEF_DIV_SCALE = 10;

    /**
     * æä¾›ç²¾ç¡®çš„åŠ æ³•è¿ç®—
     *
     * @param v1 è¢«åŠ æ•°
     * @param v2 åŠ æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å’Œ
     */

    public static double add(double v1, double v2) {
        BigDecimal b1 = new BigDecimal(Double.toString(v1));
        BigDecimal b2 = new BigDecimal(Double.toString(v2));
        return b1.add(b2).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„åŠ æ³•è¿ç®—
     *
     * @param v1 è¢«åŠ æ•°
     * @param v2 åŠ æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å’Œ
     */
    public static BigDecimal add(String v1, String v2) {
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.add(b2);
    }

    /**
     * æä¾›ç²¾ç¡®çš„åŠ æ³•è¿ç®—
     *
     * @param v1    è¢«åŠ æ•°
     * @param v2    åŠ æ•°
     * @param scale ä¿ç•™scale ä½å°æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å’Œ
     */
    public static String add(String v1, String v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException(
                    "The scale must be a positive integer or zero");
        }
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.add(b2).setScale(scale, BigDecimal.ROUND_HALF_UP).toString();
    }

    /**
     * æä¾›ç²¾ç¡®çš„å‡æ³•è¿ç®—
     *
     * @param v1 è¢«å‡æ•°
     * @param v2 å‡æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å·®
     */
    public static double sub(double v1, double v2) {
        BigDecimal b1 = new BigDecimal(Double.toString(v1));
        BigDecimal b2 = new BigDecimal(Double.toString(v2));
        return b1.subtract(b2).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„å‡æ³•è¿ç®—ã€‚
     *
     * @param v1 è¢«å‡æ•°
     * @param v2 å‡æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å·®
     */
    public static BigDecimal sub(String v1, String v2) {
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.subtract(b2);
    }

    /**
     * æä¾›ç²¾ç¡®çš„å‡æ³•è¿ç®—
     *
     * @param v1    è¢«å‡æ•°
     * @param v2    å‡æ•°
     * @param scale ä¿ç•™scale ä½å°æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å·®
     */
    public static String sub(String v1, String v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException(
                    "The scale must be a positive integer or zero");
        }
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.subtract(b2).setScale(scale, BigDecimal.ROUND_HALF_UP).toString();
    }

    /**
     * æä¾›ç²¾ç¡®çš„ä¹˜æ³•è¿ç®—
     *
     * @param v1 è¢«ä¹˜æ•°
     * @param v2 ä¹˜æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„ç§¯
     */
    public static double mul(double v1, double v2) {
        BigDecimal b1 = new BigDecimal(Double.toString(v1));
        BigDecimal b2 = new BigDecimal(Double.toString(v2));
        return b1.multiply(b2).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„ä¹˜æ³•è¿ç®—
     *
     * @param v1 è¢«ä¹˜æ•°
     * @param v2 ä¹˜æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„ç§¯
     */
    public static BigDecimal mul(String v1, String v2) {
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.multiply(b2);
    }

    /**
     * æä¾›ç²¾ç¡®çš„ä¹˜æ³•è¿ç®—
     *
     * @param v1    è¢«ä¹˜æ•°
     * @param v2    ä¹˜æ•°
     * @param scale ä¿ç•™scale ä½å°æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„ç§¯
     */
    public static double mul(double v1, double v2, int scale) {
        BigDecimal b1 = new BigDecimal(Double.toString(v1));
        BigDecimal b2 = new BigDecimal(Double.toString(v2));
        return round(b1.multiply(b2).doubleValue(), scale);
    }

    /**
     * æä¾›ç²¾ç¡®çš„ä¹˜æ³•è¿ç®—
     *
     * @param v1    è¢«ä¹˜æ•°
     * @param v2    ä¹˜æ•°
     * @param scale ä¿ç•™scale ä½å°æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„ç§¯
     */
    public static String mul(String v1, String v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException(
                    "The scale must be a positive integer or zero");
        }
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.multiply(b2).setScale(scale, BigDecimal.ROUND_HALF_UP).toString();
    }

    /**
     * æä¾›ï¼ˆç›¸å¯¹ï¼‰ç²¾ç¡®çš„é™¤æ³•è¿ç®—ï¼Œå½“å‘ç”Ÿé™¤ä¸å°½çš„æƒ…å†µæ—¶ï¼Œç²¾ç¡®åˆ°
     * å°æ•°ç‚¹ä»¥å10ä½ï¼Œä»¥åçš„æ•°å­—å››èˆäº”å…¥
     *
     * @param v1 è¢«é™¤æ•°
     * @param v2 é™¤æ•°
     * @return ä¸¤ä¸ªå‚æ•°çš„å•†
     */

    public static double div(double v1, double v2) {
        return div(v1, v2, DEF_DIV_SCALE);
}

    /**
     * æä¾›ï¼ˆç›¸å¯¹ï¼‰ç²¾ç¡®çš„é™¤æ³•è¿ç®—ã€‚å½“å‘ç”Ÿé™¤ä¸å°½çš„æƒ…å†µæ—¶ï¼Œç”±scaleå‚æ•°æŒ‡
     * å®šç²¾åº¦ï¼Œä»¥åçš„æ•°å­—å››èˆäº”å…¥
     *
     * @param v1    è¢«é™¤æ•°
     * @param v2    é™¤æ•°
     * @param scale è¡¨ç¤ºè¡¨ç¤ºéœ€è¦ç²¾ç¡®åˆ°å°æ•°ç‚¹ä»¥åå‡ ä½ã€‚
     * @return ä¸¤ä¸ªå‚æ•°çš„å•†
     */
    public static double div(double v1, double v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException("The scale must be a positive integer or zero");
        }
        BigDecimal b1 = new BigDecimal(Double.toString(v1));
        BigDecimal b2 = new BigDecimal(Double.toString(v2));
        return b1.divide(b2, scale, BigDecimal.ROUND_HALF_UP).doubleValue();
    }

    /**
     * æä¾›ï¼ˆç›¸å¯¹ï¼‰ç²¾ç¡®çš„é™¤æ³•è¿ç®—ã€‚å½“å‘ç”Ÿé™¤ä¸å°½çš„æƒ…å†µæ—¶ï¼Œç”±scaleå‚æ•°æŒ‡
     * å®šç²¾åº¦ï¼Œä»¥åçš„æ•°å­—å››èˆäº”å…¥
     *
     * @param v1    è¢«é™¤æ•°
     * @param v2    é™¤æ•°
     * @param scale è¡¨ç¤ºéœ€è¦ç²¾ç¡®åˆ°å°æ•°ç‚¹ä»¥åå‡ ä½
     * @return ä¸¤ä¸ªå‚æ•°çš„å•†
     */
    public static String div(String v1, String v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException("The scale must be a positive integer or zero");
        }
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v1);
        return b1.divide(b2, scale, BigDecimal.ROUND_HALF_UP).toString();
    }

    /**
     * æä¾›ç²¾ç¡®çš„å°æ•°ä½å››èˆäº”å…¥å¤„ç†
     *
     * @param v     éœ€è¦å››èˆäº”å…¥çš„æ•°å­—
     * @param scale å°æ•°ç‚¹åä¿ç•™å‡ ä½
     * @return å››èˆäº”å…¥åçš„ç»“æœ
     */
    public static double round(double v, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException("The scale must be a positive integer or zero");
        }
        BigDecimal b = new BigDecimal(Double.toString(v));
        return b.setScale(scale, BigDecimal.ROUND_HALF_UP).doubleValue();
    }

    /**
     * æä¾›ç²¾ç¡®çš„å°æ•°ä½å››èˆäº”å…¥å¤„ç†
     *
     * @param v     éœ€è¦å››èˆäº”å…¥çš„æ•°å­—
     * @param scale å°æ•°ç‚¹åä¿ç•™å‡ ä½
     * @return å››èˆäº”å…¥åçš„ç»“æœ
     */
    public static String round(String v, int scale) {
        if (scale < 0)
        {
            throw new IllegalArgumentException("The scale must be a positive integer or zero");
        }
        BigDecimal b = new BigDecimal(v);
        return b.setScale(scale, BigDecimal.ROUND_HALF_UP).toString();
    }

    /**
     * å–ä½™æ•°
     *
     * @param v1    è¢«é™¤æ•°
     * @param v2    é™¤æ•°
     * @param scale å°æ•°ç‚¹åä¿ç•™å‡ ä½
     * @return ä½™æ•°
     */
    public static String remainder(String v1, String v2, int scale) {
        if (scale < 0) {
            throw new IllegalArgumentException(
                    "The scale must be a positive integer or zero");
        }
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        return b1.remainder(b2).setScale(scale, BigDecimal.ROUND_HALF_UP).toString();
    }

    /**
     * å–ä½™æ•°  BigDecimal
     *
     * @param v1    è¢«é™¤æ•°
     * @param v2    é™¤æ•°
     * @param scale å°æ•°ç‚¹åä¿ç•™å‡ ä½
     * @return ä½™æ•°
     */
    public static BigDecimal remainder(BigDecimal v1, BigDecimal v2, int scale) {
        if (scale < 0)
        {
            throw new IllegalArgumentException("The scale must be a positive integer or zero");
        }
        return v1.remainder(v2).setScale(scale, BigDecimal.ROUND_HALF_UP);
    }

    /**
     * æ¯”è¾ƒå¤§å°
     *
     * @param v1 è¢«æ¯”è¾ƒæ•°
     * @param v2 æ¯”è¾ƒæ•°
     * @return å¦‚æœv1 å¤§äºv2 åˆ™ è¿”å›true å¦åˆ™false
     */
    public static boolean compare(String v1, String v2) {
        BigDecimal b1 = new BigDecimal(v1);
        BigDecimal b2 = new BigDecimal(v2);
        int bj = b1.compareTo(b2);
        boolean res;
        if (bj > 0)
            res = true;
        else
            res = false;
        return res;
    }
}
```



## Javaä¸­finalã€finallyã€finalizeçš„åŒºåˆ«ï¼Ÿ



## ä¸ºä»€ä¹ˆJDK9ä¸­å°†Stringçš„charæ•°ç»„æ”¹ä¸ºäº†byteæ•°ç»„?



## ä¸€ä¸ªçº¿ç¨‹åœ¨Javaä¸­è¢«ä¸¤æ¬¡è°ƒç”¨start()æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ



## æ ˆå’Œé˜Ÿåˆ—åœ¨Javaä¸­çš„åŒºåˆ«ï¼Ÿ



## Javaçš„Optionalç±»æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ



## 



# å­—ç¬¦ä¸²

## Stringç±»å¯ä»¥è¢«ç»§æ‰¿å—ï¼Ÿ

-   **String ç±»æ˜¯ final ä¿®é¥°çš„**ï¼Œä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿å…¶ä¸å¯å˜æ€§å’Œå®‰å…¨æ€§ã€‚
-   **æ›¿ä»£æ–¹æ¡ˆ**ï¼šå¯ä»¥é€šè¿‡ç»„åˆã€é™æ€å·¥å…·ç±»æˆ–åŒ…è£…ç±»çš„æ–¹å¼æ¥æ‰©å±• `String` ç±»çš„åŠŸèƒ½ï¼Œè€Œä¸ç ´åå…¶è®¾è®¡åˆè¡·ã€‚

>   é—®ï¼šä½ è¿˜çŸ¥é“å…¶ä»–finalä¿®é¥°çš„ç±»å—ï¼Ÿ
>
>   ç­”ï¼šSystemã€Mathã€åŒ…è£…ç±»ç­‰
>
>   é—®ï¼šå®ƒä»¬ä¸ºä»€ä¹ˆæ˜¯finalä¿®é¥°çš„ï¼Ÿ
>
>   ç­”ï¼šå› ä¸ºå®ƒä»¬éå¸¸çš„é‡è¦ï¼Œå¤ªåŸºç¡€äº†ï¼Œæ˜¯æ•´ä¸ªJavaçš„åŸºçŸ³ï¼Œæ‰€æœ‰è®¾è®¡è€…å°†å®ƒä»¬è®¾è®¡ä¸ºä¸å¯å˜çš„



## Stringã€StringBufferã€StringBuilderã€StringJoinerçš„åŒºåˆ«ï¼Ÿ

Stringã€StringBufferã€StringBuilderæ˜¯ç”¨äºè¡¨ç¤ºä¸€ä¸²å­—ç¬¦ï¼Œå³å­—ç¬¦åºåˆ—ã€‚StringJoineræ˜¯JDK8å¼•å…¥çš„ä¸€ä¸ªStringæ‹¼æ¥å·¥å…·ã€‚

**String**

-   å¼•å…¥ç‰ˆæœ¬ï¼šJDK1.0

-   ä¸å¯å˜çš„å­—ç¬¦åºåˆ—ï¼›åº•å±‚ä½¿ç”¨ char[]ï¼ˆJDK8ä¹‹å‰ï¼‰ï¼Œåº•å±‚ä½¿ç”¨byte[]ï¼ˆJDK9åŠå…¶ä¹‹åï¼‰
-   çº¿ç¨‹å®‰å…¨
-   æ‹¼æ¥æ–¹å¼ï¼šä½¿ç”¨ + æˆ– concat

**StringBuffer**

-   å¼•å…¥ç‰ˆæœ¬ï¼šJDK1.0

-   å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œé»˜è®¤ç¼“å†²åŒºå¤§å°16ï¼›**JDK1.0å£°æ˜ï¼Œçº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡ä½ï¼›**

-   åº•å±‚ä½¿ç”¨ char[]ï¼ˆJDK8ä¹‹å‰ï¼‰ï¼Œåº•å±‚ä½¿ç”¨byte[]ï¼ˆJDK9åŠå…¶ä¹‹åï¼‰
-   æ‹¼æ¥æ–¹å¼ï¼šappend

**StringBuilder**

-   å¼•å…¥ç‰ˆæœ¬ï¼šJDK1.5

-   å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œé»˜è®¤ç¼“å†²åŒºå¤§å°16ï¼›**JDK5.0å£°æ˜ï¼Œçº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ•ˆç‡é«˜ï¼›**

-   åº•å±‚ä½¿ç”¨ char[]ï¼ˆJDK8ä¹‹å‰ï¼‰ï¼Œåº•å±‚ä½¿ç”¨byte[]ï¼ˆJDK9åŠå…¶ä¹‹åï¼‰
-   æ‹¼æ¥æ–¹å¼ï¼šappend

**æºç å¯ç¤º**

-   å¦‚æœå¼€å‘ä¸­éœ€è¦é¢‘ç¹çš„é’ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œï¼Œå»ºè®®ä½¿ç”¨StringBuilderæˆ–StringBufferæ›¿æ¢Stringï¼Œå› ä¸ºStringæ•ˆç‡ä½
-   å¦‚æœå¼€å‘ä¸­ï¼Œä¸æ¶‰åŠçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨StringBuilderæ›¿æ¢StringBufferã€‚å› ä¸ºä½¿ç”¨StringBuilderæ•ˆç‡é«˜ã€‚
-   å¦‚æœå¼€å‘ä¸­ï¼Œå¤§ä½“çŸ¥é“ç¡®å®šè¦æ“ä½œçš„å­—ç¬¦çš„ä¸ªæ•°ï¼Œå»ºè®®ä½¿ç”¨å¸¦int capacity çš„æ„é€ å™¨ã€‚å¯ä»¥é¿å…å› ä¸ºåº•å±‚é¢‘ç¹æ‰©å®¹å¯¼è‡´çš„æ€§èƒ½ä¸‹é™

>   Stringå’ŒStringBufferä¸ºä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ
>
>   Stringå¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚å‡¡æ˜¯ä¿®æ”¹éƒ½ä¼šå¾—åˆ°æ–°å¯¹è±¡ï¼Œä¸åŒçº¿ç¨‹çš„ä¿®æ”¹ä¼šå„è‡ªå¾—åˆ°ä¸€ä¸ªæ–°å¯¹è±¡
>
>   StringBufferçš„æ“ä½œæ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚



## Stringå¯¹è±¡çœŸçš„ä¸å¯å˜å—ï¼Ÿ

é™¤éåˆ©ç”¨**åå°„**æ“ä½œè·å–å­—ç¬¦ä¸²å¯¹è±¡å†…éƒ¨çš„**å­—ç¬¦æ•°ç»„çš„å¼•ç”¨**ï¼Œç„¶åä¿®æ”¹æ•°ç»„å…ƒç´ ï¼Œå¦åˆ™å­—ç¬¦ä¸²å¯¹è±¡ä¸å¯å˜ã€‚

```java
String s1 = "helloworld";
Class<? extends String> clazz = s1.getClass();
Field valueField = clazz.getDeclaredField("value"); // è·å–å­—ç¬¦æ•°ç»„
valueField.setAccessible(true);
char[] value = (char[]) valueField.get(s1);
value[0] = 'H';
System.out.println(s1);
```



## Stringæœ‰æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Ÿ

æœ‰é™åˆ¶ã€‚å› ä¸ºå­—ç¬¦ä¸²å†…éƒ¨æ˜¯å­—ç¬¦æ•°ç»„ï¼ˆJDK9 å­—èŠ‚ï¼‰ï¼Œè€Œæ•°ç»„é•¿åº¦æ˜¯intç±»å‹ï¼Œæœ‰å¤§å°çº¦æŸã€‚

Javaä¸­æ•°ç»„çš„æœ€å¤§é•¿åº¦æ˜¯`Integer.MAX_VALUE - 8`



## Stringåº•å±‚å®ç°æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ

-   JDK9ä¹‹å‰ï¼ŒStringåº•å±‚æ˜¯**char[]**ï¼Œæ¯ä¸ªå­—ç¬¦å ç”¨**2ä¸ªå­—èŠ‚**ï¼Œé‡‡ç”¨**UTF16**ç¼–ç æ–¹å¼ã€‚
-   JDK9ä¹‹å‰ï¼ŒStringåº•å±‚æ˜¯**byte[]**ï¼Œæ¯ä¸ªå­—ç¬¦å¯èƒ½**å ç”¨1ä¸ªæˆ–2ä¸ªå­—èŠ‚**ã€‚
    -   å¦‚æœå½“å‰å­—ç¬¦ä¸²æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯Latin1å­—ç¬¦é›†çš„å­—ç¬¦ï¼Œé‚£ä¹ˆå½“å‰å­—ç¬¦ä¸²æ¯ä¸ªå­—ç¬¦å ç”¨1ä¸ªå­—èŠ‚ï¼Œé‡‡ç”¨Latin1ç¼–ç æ–¹å¼ã€‚
    -   å¦‚æœå½“å‰å­—ç¬¦ä¸²æœ‰ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯Latin1å­—ç¬¦é›†çš„å­—ç¬¦ï¼Œä¾‹å¦‚ä¸­æ–‡ã€éŸ©æ–‡ã€æ—¥æ–‡ç­‰ï¼Œé‚£ä¹ˆå½“å‰å­—ç¬¦ä¸²æ¯ä¸ªå­—ç¬¦å ç”¨2ä¸ªå­—èŠ‚ï¼Œé‡‡ç”¨UTF16ç¼–ç æ–¹å¼

è¡¥å……ï¼šLatin1å­—ç¬¦é›†ï¼Œè¿™äº›å­—ç¬¦è¦†ç›–äº†å¤§å¤šæ•°è¥¿æ¬§è¯­è¨€ï¼Œå¦‚è‹±è¯­ã€æ³•è¯­ã€å¾·è¯­ã€è¥¿ç­ç‰™è¯­ç­‰æ‰€éœ€çš„å­—æ¯å’Œç¬¦å·ï¼Œç¼–ç å€¼èŒƒå›´æ˜¯[0-255]

>   é—®ï¼šJavaä¸­ä¸€ä¸ªå­—ç¬¦å ç”¨å‡ ä¸ªå­—èŠ‚ï¼Ÿ
>
>   ç­”ï¼šå¦‚æœæ˜¯charç±»å‹çš„ä¸€ä¸ªå­—ç¬¦ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆå­—ç¬¦ï¼Œéƒ½æ˜¯å ç”¨2ä¸ªå­—èŠ‚ã€‚
>
>   â€‹		å¦‚æœæ˜¯å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼ŒJDK9ä¹‹å‰ï¼Œæ¯ä¸ªå­—ç¬¦å ç”¨1ä¸ªå­—èŠ‚ï¼Œé‡‡ç”¨UTF16ç¼–ç ï¼›JDK9ä¹‹åï¼Œæ¯ä¸ªå­—ç¬¦å¯èƒ½å ç”¨1ä¸ªæˆ–2ä¸ªå­—èŠ‚ï¼Œé‡‡ç”¨Latin1æˆ–UTF16ç¼–ç ã€‚
>
>   é—®ï¼šJavaä¸­ä¸€ä¸ªæ±‰å­—å ç”¨å‡ ä¸ªå­—èŠ‚ï¼Ÿ
>
>   ç­”ï¼š2ä¸ªå­—èŠ‚



## Stringå¦‚ä½•å®ç°ç¼–ç å’Œè§£ç ï¼Ÿ

ç¼–ç ï¼ˆå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼‰

1.  **é€‰æ‹©å­—ç¬¦é›†**ï¼šç¡®å®šè¦ä½¿ç”¨çš„å­—ç¬¦é›†ï¼Œä¾‹å¦‚ UTF-8ã€ISO-8859-1 ç­‰ã€‚
2.  **ä½¿ç”¨ getBytes() æ–¹æ³•**ï¼šé€šè¿‡æŒ‡å®šå­—ç¬¦é›†å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„

```java
import java.nio.charset.StandardCharsets;

public class StringEncodingExample {
    public static void main(String[] args) {
        String originalString = "Hello, World!";
        byte[] encodedBytes = originalString.getBytes(StandardCharsets.UTF_8);
        System.out.println("Encoded bytes: " + new String(encodedBytes));
    }
}
```

è§£ç ï¼ˆå°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼‰

1.  **é€‰æ‹©å­—ç¬¦é›†**ï¼šç¡®ä¿ä½¿ç”¨ä¸ç¼–ç æ—¶ç›¸åŒçš„å­—ç¬¦é›†ã€‚
2.  **ä½¿ç”¨ String(byte[] bytes, Charset charset) æ„é€ å‡½æ•°**ï¼šå°†å­—èŠ‚æ•°ç»„è½¬æ¢å›å­—ç¬¦ä¸²ã€‚

```java
import java.nio.charset.StandardCharsets;

public class StringDecodingExample {
    public static void main(String[] args) {
        byte[] encodedBytes = "Hello, World!".getBytes(StandardCharsets.UTF_8);
        String decodedString = new String(encodedBytes, StandardCharsets.UTF_8);
        System.out.println("Decoded string: " + decodedString);
    }
}
```

æ³¨æ„ï¼š

-   **å­—ç¬¦é›†ä¸€è‡´æ€§**ï¼šç¼–ç å’Œè§£ç æ—¶å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦é›†ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ä¹±ç é—®é¢˜ã€‚



## Stringå­—ç¬¦ä¸²å¦‚ä½•è¿›è¡Œåè½¬ï¼Ÿ

æ–¹å¼ä¸€ï¼šä½¿ç”¨ `StringBuilder` å’Œ `StringBuffer` æä¾›çš„**reverse**æ–¹æ³•

```java
String original = "Hello, World!";

// ä½¿ç”¨ StringBuilder åè½¬
String reversed = new StringBuilder(original).reverse().toString();

// ä½¿ç”¨ StringBuffer åè½¬
String reversed2 = new StringBuffer(original).reverse().toString();
```

æ–¹å¼äºŒï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º**å­—ç¬¦æ•°ç»„**ï¼Œç„¶åé€šè¿‡äº¤æ¢å­—ç¬¦ä½ç½®æ¥å®ç°åè½¬ã€‚

```java
String original = "Hello, World!";
char[] charArray = original.toCharArray();

// æ•°ç»„åè½¬
for(int left=0, right=charArray.length-1; left<right; left++, right--) {
    char temp = charArray[left];
    original[left] = original[right];
    original[right] = temp;
}
String reversed = new String(charArray);
```

æ–¹å¼ä¸‰ï¼šé€šè¿‡é€’å½’çš„æ–¹å¼é€ä¸ªå­—ç¬¦åè½¬å­—ç¬¦ä¸²

```java
public class StringReverseRecursive {
    public static String reverse(String str) {
        if (str == null || str.isEmpty()) {
            return str;
        }
        return reverse(str.substring(1)) + str.charAt(0);
    }

    public static void main(String[] args) {
        String original = "Hello, World!";
        String reversed = reverse(original);
        System.out.println("Reversed string: " + reversed);
    }
}
```

 æ–¹å¼å››ï¼šä½¿ç”¨æµï¼ˆJava 8+ï¼‰

```java
import java.util.stream.Collectors;

public class StringReverseStream {
    public static void main(String[] args) {
        String original = "Hello, World!";
        String reversed = new StringBuilder(original)
                .chars()
                .mapToObj(c -> String.valueOf((char) c))
                .collect(Collectors.joining())
                .chars()
                .mapToObj(c -> String.valueOf((char) c))
                .collect(Collectors.joining());
        System.out.println("Reversed string: " + reversed);
    }
}
```

## Stringç±»çš„isEmptyå’ŒisBlankçš„åŒºåˆ«ï¼Ÿ

`String` ç±»æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºæˆ–ç©ºç™½ï¼š`isEmpty()` å’Œ `isBlank()`ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬å¯¹â€œç©ºç™½â€çš„å®šä¹‰ä¸åŒã€‚

-   `isEmpty()`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¦ä¸º 0ã€‚å¦‚æœ**å­—ç¬¦ä¸²é•¿åº¦ä¸º 0**ï¼ˆå³æ²¡æœ‰ä»»ä½•å­—ç¬¦ï¼‰ï¼Œåˆ™è¿”å› `true`ï¼›å¦åˆ™è¿”å› `false`ã€‚

```java
String str1 = "";
String str2 = "   ";
String str3 = "Hello";

System.out.println(str1.isEmpty()); // true
System.out.println(str2.isEmpty()); // false
System.out.println(str3.isEmpty()); // false
```

-   `isBlank()`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºç™½å­—ç¬¦ä¸²ã€‚ç©ºç™½å­—ç¬¦ä¸²æ˜¯æŒ‡åªåŒ…å«ç©ºç™½å­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ï¼‰æˆ–é•¿åº¦ä¸º 0 çš„å­—ç¬¦ä¸²ã€‚å¦‚æœ**å­—ç¬¦ä¸²ä¸ºç©ºæˆ–ä»…åŒ…å«ç©ºç™½å­—ç¬¦**ï¼Œåˆ™è¿”å› `true`ï¼›å¦åˆ™è¿”å› `false`ã€‚

æ³¨æ„ï¼ï¼ï¼`isBlank()` æ–¹æ³•æ˜¯åœ¨ Java 11 ä¸­å¼•å…¥çš„

```java
String str1 = "";
String str2 = "   ";
String str3 = "Hello";
String str4 = "\t\n"; // åŒ…å«åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦

System.out.println(str1.isBlank()); // true
System.out.println(str2.isBlank()); // true
System.out.println(str3.isBlank()); // false
System.out.println(str4.isBlank()); // true
```

## Stringç±»ä¸­çš„concatå’Œ+æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

å¦‚æœæ˜¯ä¸¤ä¸ª""å­—ç¬¦ä¸²ï¼ˆå­—é¢é‡å­—ç¬¦ä¸²ï¼‰æ‹¼æ¥ï¼Œconcatä¼šäº§ç”Ÿæ–°å¯¹è±¡ï¼Œè€Œ+æ“ä½œç¬¦ä¼šåœ¨ç¼–è¯‘æ—¶ç›´æ¥åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²

```java
String s1 = "helloworld";
String s2 = "hello" + "world";			// å­˜åœ¨ç¼–è¯‘å™¨ä¼˜åŒ–
System.out.println(s1 == s2); // true

String s1 = "helloworld";
String s2 = "hello".concat("world");
System.out.println(s1 == s2); // false
```

**å®ç°æ–¹å¼ä¸åŒ**

-   concatæ–¹æ³•
    -   æ˜¯Stringç±»ä¸­çš„å®ä¾‹æ–¹æ³•ï¼Œç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²è¿½åŠ åˆ°å½“å‰å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚
    -   è¿”å›ä¸€ä¸ªæ–°çš„ `String` å¯¹è±¡ï¼ŒåŒ…å«è¿æ¥åçš„ç»“æœ
    -   ä¸ä¼šä¿®æ”¹åŸå§‹å­—ç¬¦ä¸²ï¼ˆå› ä¸º `String` æ˜¯ä¸å¯å˜çš„ï¼‰
-   **+ æ“ä½œç¬¦**
    -   åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è½¬æ¢ä¸º `StringBuilder` æˆ– `StringBuffer` çš„ `append()` æ–¹æ³•è°ƒç”¨ã€‚
    -   åŒæ ·è¿”å›ä¸€ä¸ªæ–°çš„ `String` å¯¹è±¡ï¼ŒåŒ…å«è¿æ¥åçš„ç»“æœã€‚
    -   é€‚ç”¨äºå¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æ“ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ä¸­æ›´é«˜æ•ˆï¼ˆé€šè¿‡ `StringBuilder` ä¼˜åŒ–ï¼‰ã€‚

**æ€§èƒ½**

-   concatæ–¹æ³•
    -   æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„`String`å¯¹è±¡ï¼Œé€‚åˆå°‘é‡å­—ç¬¦ä¸²è¿æ¥ã€‚
    -   å¦‚æœé¢‘ç¹è°ƒç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„ä¸´æ—¶å¯¹è±¡åˆ›å»ºï¼Œå½±å“æ€§èƒ½ã€‚

-   **+ æ“ä½œç¬¦**
    -   åœ¨ç¼–è¯‘æ—¶ä¼šä¼˜åŒ–ä¸º `StringBuilder` æˆ– `StringBuffer` çš„ `append()` æ–¹æ³•è°ƒç”¨ã€‚
    -   å¯¹äºå¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆ–åœ¨å¾ªç¯ä¸­è¿æ¥å­—ç¬¦ä¸²æ—¶ï¼Œæ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒé¿å…äº†é¢‘ç¹åˆ›å»ºæ–°çš„ `String` å¯¹è±¡

**çµæ´»æ€§**

-   concatæ–¹æ³•ï¼šåªèƒ½è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä¸èƒ½ç›´æ¥è¿æ¥å…¶ä»–ç±»å‹çš„æ•°æ®ï¼ˆå¦‚æ•°å­—ã€å¸ƒå°”å€¼ç­‰ï¼‰ï¼Œéœ€è¦å…ˆå°†å®ƒä»¬è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

```java
String result = "Value is: ".concat(Integer.toString(42)); // éœ€è¦æ˜¾å¼è½¬æ¢
```

-   **+ æ“ä½œç¬¦**ï¼šæ›´çµæ´»ï¼Œå¯ä»¥ç›´æ¥è¿æ¥ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚Java ä¼š**è‡ªåŠ¨è°ƒç”¨**è¿™äº›å¯¹è±¡çš„ `toString()` æ–¹æ³•è¿›è¡Œè½¬æ¢

```java
String result = "Value is: " + 42; // è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²
```

**ç©ºå­—ç¬¦ä¸²å¤„ç†**

-   concatæ–¹æ³•ï¼šå¦‚æœä¼ å…¥`null`ï¼Œä¼šæŠ›å‡º`NullPointerException`

```java
String result = "Hello".concat(null);
```

-   **+ æ“ä½œç¬¦**ï¼šå¦‚æœä¼ å…¥ `null`ï¼Œä¼šå°†å…¶è§†ä¸ºå­—ç¬¦ä¸² `"null"`

```java
String result = "Hello" + null; // "Hellonull"
```

**æ€»ç»“**

-   **concat() æ–¹æ³•**ï¼šé€‚åˆç®€å•çš„å­—ç¬¦ä¸²è¿æ¥æ“ä½œï¼Œç‰¹åˆ«æ˜¯å½“ä½ åªéœ€è¦è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸”ä¸éœ€è¦å¤„ç† `null` å€¼æ—¶ã€‚
-   **+ æ“ä½œç¬¦**ï¼šæ›´çµæ´»ï¼Œé€‚åˆå¤šç§æ•°æ®ç±»å‹çš„è¿æ¥ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æ—¶ä¼šè¢«ä¼˜åŒ–ä¸ºæ›´é«˜æ•ˆçš„ä»£ç ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ä¸­è¿æ¥å¤šä¸ªå­—ç¬¦ä¸²æ—¶è¡¨ç°æ›´å¥½ã€‚



## å­—ç¬¦ä¸²æ‹¼æ¥ä»€ä¹ˆæ—¶å€™ç”¨+ï¼Œä»€ä¹ˆæ—¶å€™ä¸æ¨èç”¨+ï¼Ÿ

æ¨èä½¿ç”¨+çš„åœºæ™¯

-   å°‘é‡å­—ç¬¦ä¸²æ‹¼æ¥

```java
String result = "Hello" + " " + "World";
```

-   ç¼–è¯‘æ—¶å¸¸é‡å­—ç¬¦ä¸²ï¼šå¦‚æœæ‰€æœ‰å‚ä¸æ‹¼æ¥çš„å­—ç¬¦ä¸²éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆå³åœ¨ç¼–è¯‘æ—¶å·²çŸ¥çš„å­—ç¬¦ä¸²ï¼‰ï¼ŒJava ç¼–è¯‘å™¨ä¼šå°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œä¸ä¼šåˆ›å»ºé¢å¤–çš„å¯¹è±¡ã€‚

-   ç®€å•è¡¨è¾¾å¼ï¼šåœ¨ç®€å•çš„è¡¨è¾¾å¼ä¸­ï¼Œ`+` æ“ä½œç¬¦å¯ä»¥ä½¿ä»£ç æ›´æ˜“è¯»ã€‚

```java
String message = "User ID: " + userId;
```

ä¸æ¨èä½¿ç”¨ `+` çš„åœºæ™¯

-   **é¢‘ç¹æˆ–å¤§é‡å­—ç¬¦ä¸²è¿æ¥**ï¼šå¦‚æœéœ€è¦é¢‘ç¹æˆ–å¤§é‡è¿æ¥å­—ç¬¦ä¸²ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾ªç¯ä¸­ï¼Œä½¿ç”¨ `+` ä¼šå¯¼è‡´å¤§é‡çš„ä¸´æ—¶ `String` å¯¹è±¡è¢«åˆ›å»ºï¼Œå¢åŠ åƒåœ¾å›æ”¶çš„å‹åŠ›ï¼Œå½±å“æ€§èƒ½ã€‚

```java
// ä¸æ¨è
String result = "";
for (int i = 0; i < 1000; i++) {
    result += "a"; // æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„ String å¯¹è±¡
}

æ¨èä½¿ç”¨StringBuilder æˆ– StringBufferï¼šè¿™äº›ç±»æä¾›äº†å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œé¿å…äº†é¢‘ç¹åˆ›å»ºæ–°å¯¹è±¡

// æ¨è
StringBuilder sb = new StringBuilder();
for (int i = 0; i < 1000; i++) {
    sb.append("a");
}
String result = sb.toString();
```



## :star:String str = new String("hello")åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ

ä¸€ä¸ª/ä¸¤ä¸ª

1ã€**å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æœ‰helloè¿™ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡**ã€‚

åŸå› ï¼šå› ä¸ºå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æœ‰helloå¯¹è±¡ï¼Œç›´æ¥å¤ç”¨ï¼Œåªä¼šåˆ›å»ºä¸€ä¸ªnew Stringå¯¹è±¡

2ã€**å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰helloè¿™ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±åªåˆ›å»ºä¸¤ä¸ªå¯¹è±¡**ã€‚

åŸå› ï¼šæ¯æ¬¡newï¼Œå¿…ç„¶éƒ½ä¼šåœ¨å †ç©ºé—´ä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå°±æœ‰ä¸€ä¸ªå¯¹è±¡äº†ã€‚å­—ç¬¦ä¸²å¸¸é‡ä¸­æ²¡æœ‰helloå¯¹è±¡ï¼Œæ‰€æœ‰ä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ªhelloå¯¹è±¡ï¼Œè¿™æ˜¯ç¬¬äºŒä¸ªå¯¹è±¡ã€‚

```
å †å†…å­˜:
+-------------------+
|   "hello" (new)   | <- str
+-------------------+
          |
          v
å­—ç¬¦ä¸²å¸¸é‡æ± :
+-------------------+
|    "hello"        |
+-------------------+
```



## Stringç±»çš„internæ–¹æ³•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

1ã€**æŸ¥æ‰¾å­—ç¬¦ä¸²å¸¸é‡æ± **

-   `intern()` æ–¹æ³•é¦–å…ˆä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ä¸è°ƒç”¨å¯¹è±¡å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²ã€‚
-   å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›å¸¸é‡æ± ä¸­è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚
-   å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†è¯¥å­—ç¬¦ä¸²æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶è¿”å›å…¶å¼•ç”¨ã€‚

2ã€**ç¡®ä¿å”¯ä¸€æ€§**

-   é€šè¿‡ `intern()` æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²åœ¨ JVM ä¸­åªæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œä»è€ŒèŠ‚çœå†…å­˜å¹¶æé«˜æ¯”è¾ƒæ“ä½œçš„æ•ˆç‡ã€‚

```java
String str1 = new String("hello");
String str2 = new String("hello");
String str3 = str1.intern();
String str4 = "hello";

System.out.println(str1 == str2); // false (ä¸åŒçš„å †å¯¹è±¡)
System.out.println(str1 == str3); // true (str3 å¼•ç”¨çš„æ˜¯å¸¸é‡æ± ä¸­çš„ "hello")
System.out.println(str1 == str4); // false (str1 æ˜¯å †å¯¹è±¡ï¼Œstr4 æ˜¯å¸¸é‡æ± å¯¹è±¡)
System.out.println(str3 == str4); // true (éƒ½æ˜¯å¸¸é‡æ± ä¸­çš„ "hello")
```

**ä½¿ç”¨åœºæ™¯**

-   **èŠ‚çœå†…å­˜**ï¼šå½“åº”ç”¨ç¨‹åºä¸­å­˜åœ¨å¤§é‡é‡å¤çš„å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨ `intern()` å¯ä»¥å‡å°‘å†…å­˜å ç”¨ï¼Œå› ä¸ºæ¯ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²åªå­˜å‚¨ä¸€æ¬¡
-   **æé«˜å­—ç¬¦ä¸²æ¯”è¾ƒæ•ˆç‡**ï¼šä½¿ç”¨ `==` æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨æ˜¯å¦ç›¸ç­‰æ¯”ä½¿ç”¨ `equals()` æ¯”è¾ƒå†…å®¹æ›´é«˜æ•ˆã€‚å¦‚æœç¡®ä¿æ‰€æœ‰å­—ç¬¦ä¸²éƒ½ç»è¿‡ `intern()` å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ `==` æ¥è¿›è¡Œå¿«é€Ÿæ¯”è¾ƒã€‚

```java
String a = "hello".intern();
String b = "hello".intern();
if (a == b) {
    // å¿«é€Ÿæ¯”è¾ƒ
}
```

-   **å¤„ç†ç”¨æˆ·è¾“å…¥æˆ–é…ç½®æ–‡ä»¶**ï¼šå¯¹äºä»å¤–éƒ¨ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€é…ç½®æ–‡ä»¶ï¼‰è¯»å–çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡ `intern()` ç¡®ä¿å®ƒä»¬ä¸ç¨‹åºå†…éƒ¨ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸€è‡´ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„é‡å¤

æ³¨æ„

1.  **æ€§èƒ½å¼€é”€**ï¼š
    -   `intern()` æ–¹æ³•ä¼šæ£€æŸ¥å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œè¿™å¯èƒ½ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡å­—ç¬¦ä¸²æ—¶ã€‚å› æ­¤ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨ä¸­ã€‚
2.  **JDK ç‰ˆæœ¬å·®å¼‚**ï¼š
    -   åœ¨ JDK 6 åŠä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä½äºæ°¸ä¹…ä»£ï¼ˆPermGenï¼‰ï¼Œè€Œåœ¨ JDK 7 åŠä¹‹åç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»åˆ°äº†å †å†…å­˜ä¸­ã€‚è¿™æ„å‘³ç€åœ¨ä¸åŒç‰ˆæœ¬çš„ JDK ä¸­ï¼Œ`intern()` çš„è¡Œä¸ºå’Œæ€§èƒ½å¯èƒ½æœ‰æ‰€ä¸åŒã€‚
3.  **è‡ªåŠ¨ intern**ï¼š
    -   å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå¦‚ `"hello"`ï¼‰åœ¨ç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨è¢«æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œå› æ­¤ä¸éœ€è¦æ˜¾å¼è°ƒç”¨ `intern()`ã€‚



## Javaä¸­çš„I/Oæµæ˜¯ä»€ä¹ˆï¼Ÿ

ava ä¸­çš„ I/O æµï¼ˆInput/Output Streamsï¼‰æ˜¯ç”¨äºå¤„ç†è¾“å…¥å’Œè¾“å‡ºæ“ä½œçš„æŠ½è±¡æ¦‚å¿µã€‚å®ƒä»¬æä¾›äº†è¯»å–å’Œå†™å…¥æ•°æ®çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ã€å†…å­˜ç¼“å†²åŒºç­‰è¿›è¡Œäº¤äº’ã€‚

Java çš„ I/O æµä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š**å­—èŠ‚æµï¼ˆByte Streamsï¼‰å’Œå­—ç¬¦æµï¼ˆCharacter Streamsï¼‰ã€‚**

æ­¤å¤–ï¼Œè¿˜æœ‰ä¸“é—¨ç”¨äºå¯¹è±¡åºåˆ—åŒ–çš„**å¯¹è±¡æµ**ã€‚

**å­—èŠ‚æµï¼ˆByte Streamsï¼‰**

-   å®šä¹‰ï¼šå¤„ç†åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œè¯»å†™ã€‚
-   å¸¸ç”¨ç±»
    -   `InputStream `å’Œ `OutputStream` æ˜¯æ‰€æœ‰å­—èŠ‚æµçš„é¡¶çº§æŠ½è±¡ç±»ã€‚
    -   `FileInputStream` å’Œ `FileOutputStream`ï¼šç”¨äºæ–‡ä»¶çš„è¯»å†™ã€‚
    -   `ByteArrayInputStream` å’Œ `ByteArrayOutputStream`ï¼šç”¨äºå†…å­˜ä¸­çš„å­—èŠ‚æ•°ç»„è¯»å†™
    -   `BufferedInputStream` å’Œ `BufferedOutputStream`ï¼šå¸¦ç¼“å†²åŠŸèƒ½çš„å­—èŠ‚æµï¼Œæé«˜è¯»å†™æ•ˆç‡
    -   `DataInputStream` å’Œ `DataOutputStream`ï¼šæ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹çš„è¯»å†™ã€‚

**å­—ç¬¦æµï¼ˆCharacter Streamsï¼‰**

-   å®šä¹‰ï¼šå¤„ç†å­—ç¬¦æ•°æ®ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¿›è¡Œè¯»å†™ï¼Œé€šå¸¸ç”¨äºæ–‡æœ¬æ–‡ä»¶çš„å¤„ç†ã€‚

-   å¸¸ç”¨ç±»
    -   `Reader` å’Œ `Writer` æ˜¯æ‰€æœ‰å­—ç¬¦æµçš„é¡¶çº§æŠ½è±¡ç±»ã€‚
    -   `FileReader` å’Œ `FileWriter`ï¼šç”¨äºæ–‡ä»¶çš„å­—ç¬¦è¯»å†™ã€‚
    -   `StringReader` å’Œ `StringWriter`ï¼šç”¨äºå­—ç¬¦ä¸²çš„è¯»å†™ã€‚
    -   `BufferedReader` å’Œ `BufferedWriter`ï¼šå¸¦ç¼“å†²åŠŸèƒ½çš„å­—ç¬¦æµï¼Œæé«˜è¯»å†™æ•ˆç‡ã€‚
    -   `PrintWriter`ï¼šæä¾›æ ¼å¼åŒ–è¾“å‡ºåŠŸèƒ½ã€‚

**å¯¹è±¡æµï¼ˆObject Streamsï¼‰**

-   å®šä¹‰ï¼šç”¨äºåºåˆ—åŒ–å’Œååºåˆ—åŒ– Java å¯¹è±¡ï¼Œå°†å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶æˆ–ä»æ–‡ä»¶ä¸­æ¢å¤å¯¹è±¡ã€‚

-   å¸¸ç”¨ç±»
    -   `ObjectInputStream` å’Œ `ObjectOutputStream`ï¼šç”¨äºå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–



## IOä¸­çš„è¾“å…¥æµå’Œè¾“å‡ºæµæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

åœ¨ Java çš„ I/O æµä¸­ï¼Œè¾“å…¥æµï¼ˆInputStream/Readerï¼‰å’Œè¾“å‡ºæµï¼ˆOutputStream/Writerï¼‰æœ‰æ˜ç¡®çš„åŒºåˆ«ï¼Œä¸»è¦ä½“ç°åœ¨å®ƒä»¬çš„**åŠŸèƒ½**å’Œ**æ•°æ®æµå‘**ã€‚

**æ•°æ®æµå‘**

-   è¾“å…¥æµï¼šä»å¤–éƒ¨æºè¯»å–æ•°æ®åˆ°ç¨‹åºå†…éƒ¨ã€‚

-   è¾“å‡ºæµï¼šä»ç¨‹åºå†…éƒ¨å†™å…¥æ•°æ®åˆ°å¤–éƒ¨ç›®æ ‡ã€‚

**æ“ä½œç±»å‹**

-   è¾“å…¥æµï¼šç”¨äºè¯»å–æ•°æ®ã€‚

-   è¾“å‡ºæµï¼šç”¨äºå†™å…¥æ•°æ®ã€‚

**ä½¿ç”¨åœºæ™¯**

-   è¾“å…¥æµï¼šå½“ä½ éœ€è¦ä»æ–‡ä»¶ã€ç½‘ç»œæˆ–å…¶ä»–èµ„æºè¯»å–æ•°æ®æ—¶ä½¿ç”¨ã€‚

-   è¾“å‡ºæµï¼šå½“ä½ éœ€è¦å°†æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ã€å‘é€åˆ°ç½‘ç»œæˆ–å…¶ä»–ç›®æ ‡æ—¶ä½¿ç”¨ã€‚

**å¼‚å¸¸å¤„ç†**

-   è¾“å…¥æµï¼šé€šå¸¸ä¼šæŠ›å‡º IOExceptionï¼Œä¾‹å¦‚æ–‡ä»¶ä¸å­˜åœ¨æˆ–è¯»å–é”™è¯¯ã€‚

-   è¾“å‡ºæµï¼šä¹Ÿä¼šæŠ›å‡º IOExceptionï¼Œä¾‹å¦‚ç£ç›˜ç©ºé—´ä¸è¶³æˆ–å†™å…¥é”™è¯¯ã€‚

**å…³é—­æµ**

-   è¾“å…¥æµ å’Œ è¾“å‡ºæµ éƒ½éœ€è¦åœ¨ä½¿ç”¨å®Œæ¯•åå…³é—­ä»¥é‡Šæ”¾èµ„æºã€‚æ¨èä½¿ç”¨ try-with-resources è¯­æ³•æ¥è‡ªåŠ¨ç®¡ç†èµ„æºã€‚



## å­—èŠ‚æµå’Œå­—ç¬¦æµçš„åŒºåˆ«ï¼Ÿ

å­—èŠ‚æµï¼ˆByte Streamsï¼‰å’Œå­—ç¬¦æµï¼ˆCharacter Streamsï¼‰æ˜¯ Java I/O ç³»ç»Ÿä¸­çš„ä¸¤ç§ä¸»è¦æµç±»å‹ï¼Œå®ƒä»¬åœ¨å¤„ç†æ•°æ®çš„æ–¹å¼ä¸Šæœ‰æ˜¾è‘—çš„åŒºåˆ«

**å­—èŠ‚æµï¼ˆByte Streamsï¼‰**

-   å®šä¹‰ï¼šå¤„ç†åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œè¯»å†™ã€‚
-   é€‚ç”¨åœºæ™¯
    -   é€‚åˆå¤„ç†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ–‡æœ¬æ–‡ä»¶ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚
    -   å½“éœ€è¦ç›´æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶ä½¿ç”¨ã€‚
-   é¡¶çº§æŠ½è±¡ç±»
    -   `InputStream`ï¼šç”¨äºè¾“å…¥æ“ä½œã€‚
    -   `OutputStream`ï¼šç”¨äºè¾“å‡ºæ“ä½œ

-   å¸¸ç”¨å­ç±»
    -   è¾“å…¥ï¼š
        -   `FileInputStream`ï¼šä»æ–‡ä»¶è¯»å–å­—èŠ‚ã€‚
        -   `BufferedInputStream`ï¼šå¸¦ç¼“å†²åŠŸèƒ½çš„å­—èŠ‚è¾“å…¥æµã€‚
        -   `DataInputStream`ï¼šæ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹çš„è¯»å–ã€‚
    -   è¾“å‡ºï¼š
        -   `FileOutputStream`ï¼šå‘æ–‡ä»¶å†™å…¥å­—èŠ‚ã€‚
        -   `BufferedOutputStream`ï¼šå¸¦ç¼“å†²åŠŸèƒ½çš„å­—èŠ‚è¾“å‡ºæµã€‚
        -   `DataOutputStream`ï¼šæ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹çš„å†™å…¥

```java
import java.io.*;

public class ByteStreamExample {
    public static void main(String[] args) {
        try (FileOutputStream fos = new FileOutputStream("example.bin");
             BufferedOutputStream bos = new BufferedOutputStream(fos)) {

            String data = "Hello, World!";
            byte[] bytes = data.getBytes();
            bos.write(bytes);
            System.out.println("Data written to file.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**å­—ç¬¦æµï¼ˆCharacter Streamsï¼‰**

-   å®šä¹‰
    -   å¤„ç†å­—ç¬¦æ•°æ®ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¿›è¡Œè¯»å†™ï¼Œé€šå¸¸ç”¨äºæ–‡æœ¬æ–‡ä»¶çš„å¤„ç†ã€‚
    -   **è‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç è½¬æ¢**ï¼Œä½¿å¾—å¤„ç†æ–‡æœ¬æ›´åŠ æ–¹ä¾¿ã€‚
-   é€‚ç”¨åœºæ™¯
    -   é€‚åˆå¤„ç†**çº¯æ–‡æœ¬**æ–‡ä»¶ï¼Œå¦‚ .txtã€.csvã€.xml ç­‰ã€‚
    -   å½“éœ€è¦å¤„ç†å­—ç¬¦æ•°æ®å¹¶ä¸”å¸Œæœ›è‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç æ—¶ä½¿ç”¨ã€‚

-   é¡¶çº§æŠ½è±¡ç±»
    -   `Reader`ï¼šç”¨äºè¾“å…¥æ“ä½œã€‚
    -   `Writer`ï¼šç”¨äºè¾“å‡ºæ“ä½œã€‚

-   å¸¸ç”¨å­ç±»

    -   è¾“å…¥ï¼š
        -   `FileReader`ï¼šä»æ–‡ä»¶è¯»å–å­—ç¬¦ã€‚
        -   `BufferedReader`ï¼šå¸¦ç¼“å†²åŠŸèƒ½çš„å­—ç¬¦è¾“å…¥æµã€‚
        -   `StringReader`ï¼šä»å­—ç¬¦ä¸²è¯»å–å­—ç¬¦ã€‚

    -   è¾“å‡ºï¼š
        -   `FileWriter`ï¼šå‘æ–‡ä»¶å†™å…¥å­—ç¬¦ã€‚
        -   `BufferedWriter`ï¼šå¸¦ç¼“å†²åŠŸèƒ½çš„å­—ç¬¦è¾“å‡ºæµã€‚
        -   `PrintWriter`ï¼šæä¾›æ ¼å¼åŒ–è¾“å‡ºåŠŸèƒ½ã€‚

```java
import java.io.*;

public class CharacterStreamExample {
    public static void main(String[] args) {
        try (FileWriter fw = new FileWriter("example.txt");
             BufferedWriter bw = new BufferedWriter(fw)) {

            String data = "Hello, World!";
            bw.write(data);
            System.out.println("Data written to file.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**å…³é”®åŒºåˆ«**

-   æ•°æ®å•ä½
    -   å­—èŠ‚æµï¼šä»¥**å­—èŠ‚**ï¼ˆ8ä½ï¼‰ä¸ºå•ä½å¤„ç†æ•°æ®ã€‚
    -   å­—ç¬¦æµï¼šä»¥**å­—ç¬¦**ï¼ˆé€šå¸¸æ˜¯16ä½çš„Unicodeå­—ç¬¦ï¼‰ä¸ºå•ä½å¤„ç†æ•°æ®ã€‚

-   ç¼–ç å¤„ç†
    -   å­—èŠ‚æµï¼šä¸å¤„ç†å­—ç¬¦ç¼–ç ï¼Œç›´æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚
    -   å­—ç¬¦æµï¼š**è‡ªåŠ¨å¤„ç†å­—ç¬¦ç¼–ç è½¬æ¢**ï¼Œç®€åŒ–äº†æ–‡æœ¬å¤„ç†ã€‚

-   é€‚ç”¨èŒƒå›´

    -   å­—èŠ‚æµï¼šé€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

    -   å­—ç¬¦æµï¼šä¸»è¦ç”¨äºå¤„ç†çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ›´é€‚åˆæ–‡æœ¬å¤„ç†ã€‚

-   æ€§èƒ½
    -   å­—èŠ‚æµï¼šé€šå¸¸æ¯”å­—ç¬¦æµæ›´é«˜æ•ˆï¼Œå› ä¸ºä¸éœ€è¦é¢å¤–çš„ç¼–ç è½¬æ¢ã€‚
    -   å­—ç¬¦æµï¼šç”±äºæ¶‰åŠç¼–ç è½¬æ¢ï¼Œå¯èƒ½ä¼šç¨å¾®æ…¢ä¸€äº›ï¼Œä½†åœ¨å¤„ç†æ–‡æœ¬æ—¶æ›´åŠ æ–¹ä¾¿ã€‚

-   çµæ´»æ€§
    -   å­—èŠ‚æµï¼šæ›´çµæ´»ï¼Œå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹çš„æ–‡ä»¶ã€‚
    -   å­—ç¬¦æµï¼šä¸“é—¨é’ˆå¯¹æ–‡æœ¬æ–‡ä»¶ï¼Œæä¾›äº†æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨ç¼–ç è½¬æ¢å’Œæ ¼å¼åŒ–è¾“å‡ºã€‚



## ç¼“å†²åŒºå’Œç¼“å­˜çš„åŒºåˆ«ï¼Ÿ

ç¼“å†²åŒºå’Œç¼“å­˜æ˜¯ä¸¤ä¸ªå¸¸è§çš„æ¦‚å¿µï¼Œè™½ç„¶å®ƒä»¬éƒ½ç”¨äºä¸´æ—¶å­˜å‚¨æ•°æ®ï¼Œä½†å®ƒä»¬çš„ç”¨é€”å’Œå·¥ä½œåœºæ™¯ä¸åŒã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š

-   åœ¨æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹ä¼ è¾“åˆ°å¦ä¸€ä¸ªåœ°æ–¹çš„è¿‡ç¨‹ä¸­ï¼Œç¼“å†²åŒºå¯ä»¥æš‚æ—¶å­˜å‚¨æ•°æ®ï¼Œä»¥å‡å°‘é¢‘ç¹çš„IOæ“ä½œï¼Œæé«˜æ•ˆç‡ã€‚ç¼“å†²åŒºä¸­çš„æ•°æ®é€šå¸¸æ˜¯ä¸´æ—¶çš„ï¼Œä¸€æ—¦æ•°æ®è¢«å¤„ç†å®Œæ¯•ï¼Œç¼“å†²åŒºçš„å†…å®¹å°±ä¼šè¢«æ¸…ç†æˆ–è¦†ç›–ã€‚ç¼“å†²åŒºé€šå¸¸æœ‰å›ºå®šçš„å¤§å°ï¼Œè¶…å‡ºç¼“å†²åŒºå¤§å°çš„æ•°æ®éœ€è¦åˆ†æ‰¹å¤„ç†ã€‚æ•°æ®é€šå¸¸æŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æ–¹å¼å¤„ç†ã€‚
-   ç¼“å­˜æ˜¯ä¸€ç§é«˜é€Ÿå­˜å‚¨åŒºåŸŸï¼Œç”¨äºå­˜å‚¨ç»å¸¸è®¿é—®çš„æ•°æ®ï¼Œä»¥å‡å°‘è®¿é—®ä½é€Ÿå­˜å‚¨è®¾å¤‡çš„æ¬¡æ•°ï¼Œæé«˜æ•°æ®è®¿é—®é€Ÿåº¦ã€‚ç¼“å­˜ä¸­çš„æ•°æ®å¯ä»¥é•¿æ—¶é—´ä¿å­˜ï¼Œç›´åˆ°è¢«æ˜¾å¼æ¸…é™¤æˆ–æ›¿æ¢ã€‚ç¼“å­˜çš„å†…å®¹é€šå¸¸æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ ¹æ®æ•°æ®çš„è®¿é—®é¢‘ç‡å’Œé‡è¦æ€§è¿›è¡Œæ›´æ–°ã€‚ç¼“å­˜é€šå¸¸æœ‰ç‰¹å®šçš„æ›¿æ¢ç­–ç•¥ï¼Œå¦‚LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€LFUï¼ˆæœ€ä¸ç»å¸¸ä½¿ç”¨ï¼‰ç­‰ï¼Œä»¥å†³å®šå“ªäº›æ•°æ®åº”è¯¥ä¿ç•™åœ¨ç¼“å­˜ä¸­ã€‚



## å­—èŠ‚æµæ€ä¹ˆè½¬åŒ–ä¸ºå­—ç¬¦æµï¼Ÿ

åœ¨Javaä¸­ï¼Œå­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´å¯ä»¥é€šè¿‡ä¸€äº›é€‚é…å™¨ç±»è¿›è¡Œè½¬æ¢ã€‚å…·ä½“æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨`InputStreamReader`å’Œ`OutputStreamWriter`æ¥å®ç°å­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´çš„è½¬æ¢ã€‚

>   æœ¬é¢˜æ˜¯å…³é”®ï¼šå› ä¸ºæ—©æœŸå­—ç¬¦æµä¸èƒ½æ‰‹åŠ¨å¤„ç†å­—ç¬¦ç¼–ç ï¼Œæ‰€æœ‰å¦‚æœæ•°æ®çš„ç¼–ç ä¸è¿è¡Œç¯å¢ƒä¸ä¸€è‡´ï¼Œéœ€è¦ä½¿ç”¨å­—èŠ‚æµè½¬åŒ–ä¸ºå­—ç¬¦æµä»¥è¾¾åˆ°æ‰‹åŠ¨å¤„ç†ç¼–ç çš„ç›®çš„

**å­—èŠ‚è¾“å…¥æµè½¬å­—ç¬¦è¾“å…¥æµ**

-   ä½¿ç”¨ `InputStreamReader`ï¼šå°† InputStream è½¬æ¢ä¸º Readerã€‚

-   æŒ‡å®šå­—ç¬¦ç¼–ç ï¼ˆå¯é€‰ï¼‰ï¼šå¯ä»¥æŒ‡å®šå­—ç¬¦ç¼–ç ï¼ˆå¦‚ UTF-8ï¼‰ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨å¹³å°é»˜è®¤ç¼–ç ã€‚

```java
import java.io.*;

public class ByteToCharInputStreamExample {
    public static void main(String[] args) {
        try (FileInputStream fis = new FileInputStream("example.bin");
             InputStreamReader isr = new InputStreamReader(fis, "UTF-8"); // æŒ‡å®šå­—ç¬¦ç¼–ç 
             BufferedReader br = new BufferedReader(isr)) {

            String line;
            while ((line = br.readLine()) != null) {
                System.out.println(line);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**å­—èŠ‚è¾“å‡ºæµè½¬å­—ç¬¦è¾“å‡ºæµ**

-   ä½¿ç”¨ `OutputStreamWriter`ï¼šå°† OutputStream è½¬æ¢ä¸º Writerã€‚

-   æŒ‡å®šå­—ç¬¦ç¼–ç ï¼ˆå¯é€‰ï¼‰ï¼šå¯ä»¥æŒ‡å®šå­—ç¬¦ç¼–ç ï¼ˆå¦‚ UTF-8ï¼‰ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨å¹³å°é»˜è®¤ç¼–ç ã€‚

```java
import java.io.*;

public class ByteToCharOutputStreamExample {
    public static void main(String[] args) {
        try (FileOutputStream fos = new FileOutputStream("example.txt");
             OutputStreamWriter osw = new OutputStreamWriter(fos, "UTF-8"); // æŒ‡å®šå­—ç¬¦ç¼–ç 
             BufferedWriter bw = new BufferedWriter(osw)) {

            String data = "Hello, World!";
            bw.write(data);
            System.out.println("Data written to file.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```



## è¯»å†™æ–‡æœ¬æ–‡ä»¶æ—¶å¦‚ä½•å¤„ç†å­—ç¬¦ç¼–ç ï¼Ÿ

 `FileReader`å’Œ`FileWriter`åœ¨è¯»å†™æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šæ–‡ä»¶çš„å­—ç¬¦ç¼–ç ã€‚

æ³¨æ„ï¼ï¼ï¼åœ¨**JDK11**ä¸­æ‰å¯ä»¥ç›´æ¥æŒ‡å®šå­—ç¬¦ç¼–ç 

```java
import java.io.*;

public class Utf8ToGbkConverter {
    public static void main(String[] args) {
        String inputFilePath = "input_utf8.txt";  // è¾“å…¥æ–‡ä»¶è·¯å¾„ï¼ˆUTF-8 ç¼–ç ï¼‰
        String outputFilePath = "output_gbk.txt"; // è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆGBK ç¼–ç ï¼‰

        try (
            // ä»UTF8çš„æ–‡ä»¶ä¸­è¯»å–å†…å®¹
            FileReader fr = new FileReader(inputFilePath, Charset.forName("UTF-8"));
            
            // å†™å†…å®¹åˆ°GBKçš„æ–‡ä»¶ä¸­
            FileWriter fw = new FileWriter(outputFilePath, Charset.forName("GBK"));
        
        ) {

            int len;
            char[] data = new char[10];
            while ((len = fr.read()) != -1) {
                fw.wrire(data, 0, len);
            }
            System.out.println("Conversion from UTF-8 to GBK completed successfully.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```



## Javaåºåˆ—åŒ–æ˜¯ä»€ä¹ˆï¼Ÿ

Java åºåˆ—åŒ–ï¼ˆSerializationï¼‰æ˜¯å°†å¯¹è±¡çš„çŠ¶æ€è½¬æ¢ä¸ºå­—èŠ‚æµçš„è¿‡ç¨‹ï¼Œä»¥ä¾¿å°†å…¶ä¿å­˜åˆ°æ–‡ä»¶ã€å†…å­˜æˆ–é€šè¿‡ç½‘ç»œä¼ è¾“ã€‚ååºåˆ—åŒ–ï¼ˆDeserializationï¼‰åˆ™æ˜¯å°†å­—èŠ‚æµæ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ˜¯ Java ä¸­å®ç°å¯¹è±¡æŒä¹…åŒ–å’Œè¿œç¨‹é€šä¿¡çš„é‡è¦æœºåˆ¶ã€‚

**ä¸»è¦ç”¨é€”**

-   **å¯¹è±¡æŒä¹…åŒ–**ï¼šå°†å¯¹è±¡çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜ï¼Œä»¥ä¾¿ç¨åå¯ä»¥æ¢å¤ã€‚

-   **ç½‘ç»œä¼ è¾“**ï¼šé€šè¿‡ç½‘ç»œå‘é€å¯¹è±¡æ—¶ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºå­—èŠ‚æµè¿›è¡Œä¼ è¾“ã€‚

-   **åˆ†å¸ƒå¼ç³»ç»Ÿ**ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„ JVM ä¹‹é—´ä¼ é€’ã€‚

**å®ç°åºåˆ—åŒ–çš„æ­¥éª¤**

è¦ä½¿ä¸€ä¸ªç±»çš„å¯¹è±¡å¯åºåˆ—åŒ–ï¼Œè¯¥ç±»å¿…é¡»å®ç° `java.io.Serializable` æ¥å£ã€‚Serializable æ˜¯ä¸€ä¸ª**æ ‡è®°æ¥å£**ï¼Œå®ƒä¸åŒ…å«ä»»ä½•æ–¹æ³•ï¼Œåªæ˜¯ç”¨æ¥æ ‡è¯†è¯¥ç±»çš„å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚

å¦‚æœä¸å®ç°æ­¤æ¥å£çš„ç±»å°†ä¸ä¼šä½¿ä»»ä½•çŠ¶æ€åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ï¼Œä¼šæŠ›å‡º `NotSerializableException` ã€‚ 

-   å¦‚æœå¯¹è±¡çš„æŸä¸ªå±æ€§ä¹Ÿæ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå¦‚æœè¯¥å±æ€§ä¹Ÿè¦åºåˆ—åŒ–çš„è¯ï¼Œä¹Ÿè¦å®ç°`Serializable` æ¥å£ 
-   è¯¥ç±»çš„æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªå±æ€§ä¸éœ€è¦å¯åºåˆ—åŒ–çš„ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»æ³¨æ˜æ˜¯**ç¬æ€çš„**ï¼Œä½¿ç”¨ `transient `å…³é”®å­—ä¿®é¥°ã€‚ 
-   é™æ€ï¼ˆ**static**ï¼‰å˜é‡çš„å€¼ä¸ä¼šåºåˆ—åŒ–ã€‚å› ä¸ºé™æ€å˜é‡çš„å€¼ä¸å±äºæŸä¸ªå¯¹è±¡

```java
import java.io.Serializable;

public class Person implements Serializable {
    private static final long serialVersionUID = 1L; // å»ºè®®æ˜¾å¼æŒ‡å®šç‰ˆæœ¬å·

    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person{name='" + name + "', age=" + age + "}";
    }
}
```

**åºåˆ—åŒ–å¯¹è±¡**

ä½¿ç”¨ `ObjectOutputStream` å°†å¯¹è±¡å†™å…¥æ–‡ä»¶æˆ–è¾“å‡ºæµã€‚

```java
import java.io.*;

public class SerializeExample {
    public static void main(String[] args) {
        Person person = new Person("Alice", 30);
        String filePath = "person.ser";

        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(filePath))) {
            oos.writeObject(person);
            System.out.println("Object serialized and saved to " + filePath);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**ååºåˆ—åŒ–å¯¹è±¡**

ä½¿ç”¨ `ObjectInputStream` ä»æ–‡ä»¶æˆ–è¾“å…¥æµè¯»å–å¯¹è±¡ã€‚

```java
import java.io.*;

public class DeserializeExample {
    public static void main(String[] args) {
        String filePath = "person.ser";
        Person person = null;

        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream(filePath))) {
            person = (Person) ois.readObject();
            System.out.println("Object deserialized: " + person);
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```



**ååºåˆ—åŒ–å¤±è´¥é—®é¢˜**

**é—®é¢˜1ï¼š**

å¯¹äº JVM å¯ä»¥ååºåˆ—åŒ–å¯¹è±¡ï¼Œå®ƒå¿…é¡»æ˜¯èƒ½å¤Ÿæ‰¾åˆ° class æ–‡ä»¶çš„ç±»ã€‚å¦‚æœæ‰¾ä¸åˆ°è¯¥ç±»çš„ class æ–‡ä»¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª `ClassNotFoundException` å¼‚å¸¸

**é—®é¢˜2ï¼š**

å½“ JVM ååºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œèƒ½æ‰¾åˆ° class æ–‡ä»¶ï¼Œä½†æ˜¯ class æ–‡ä»¶åœ¨åºåˆ—åŒ–å¯¹è±¡ä¹‹åå‘ç”Ÿäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆååºåˆ—åŒ–æ“ä½œä¹Ÿä¼šå¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ª `InvalidClassException`å¼‚å¸¸ã€‚å‘ç”Ÿè¿™ä¸ªå¼‚å¸¸çš„åŸå› å¦‚ä¸‹ï¼š 

-   è¯¥ç±»çš„åºåˆ—ç‰ˆæœ¬å·ä¸ä»æµä¸­è¯»å–çš„ç±»æè¿°ç¬¦çš„ç‰ˆæœ¬å·ä¸åŒ¹é… 
-   è¯¥ç±»åŒ…å«æœªçŸ¥æ•°æ®ç±»å‹ 

**è§£å†³æ–¹æ³•ï¼š**

`Serializable` æ¥å£ç»™éœ€è¦åºåˆ—åŒ–çš„ç±»ï¼Œæä¾›äº†ä¸€ä¸ªåºåˆ—ç‰ˆæœ¬å·ï¼š `serialVersionUID` ã€‚å‡¡æ˜¯å®ç° Serializable æ¥å£çš„ç±»éƒ½åº”è¯¥æœ‰ä¸€ä¸ªè¡¨ç¤ºåºåˆ—åŒ–ç‰ˆæœ¬æ ‡è¯†ç¬¦çš„é™æ€å˜é‡ï¼š 

```JAVA
static final long serialVersionUID = 234242343243L;  // å®ƒçš„å€¼ç”±ç¨‹åºå‘˜éšæ„æŒ‡å®šå³å¯
```

-   serialVersionUID ç”¨æ¥è¡¨æ˜ç±»çš„ä¸åŒç‰ˆæœ¬é—´çš„å…¼å®¹æ€§ã€‚ç®€å•æ¥è¯´ï¼ŒJava çš„åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶åˆ¤æ–­ç±»çš„ serialVersionUID æ¥éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼ŒJVM ä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„ serialVersionUID ä¸æœ¬åœ°ç›¸åº”å®ä½“ç±»çš„ serialVersionUID è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸(InvalidCastException)ã€‚ 

-   å¦‚æœç±»æ²¡æœ‰æ˜¾ç¤ºå®šä¹‰è¿™ä¸ªé™æ€å¸¸é‡ï¼Œå®ƒçš„å€¼æ˜¯ Java è¿è¡Œæ—¶ç¯å¢ƒæ ¹æ®ç±»çš„å†…éƒ¨ç»†èŠ‚ï¼ˆåŒ…æ‹¬ç±»åã€æ¥å£åã€æˆå‘˜æ–¹æ³•å’Œå±æ€§ç­‰ï¼‰è‡ªåŠ¨ç”Ÿæˆçš„ã€‚è‹¥ç±»çš„å®ä¾‹å˜é‡åšäº†ä¿®æ”¹ï¼ŒserialVersionUID å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚å› æ­¤ï¼Œå»ºè®®æ˜¾å¼å£°æ˜ã€‚ 

-   å¦‚æœå£°æ˜äº† serialVersionUIDï¼Œå³ä½¿åœ¨åºåˆ—åŒ–å®Œæˆä¹‹åä¿®æ”¹äº†ç±»å¯¼è‡´ç±»é‡æ–°ç¼–è¯‘ï¼Œåˆ™åŸæ¥çš„æ•°æ®ä¹Ÿèƒ½æ­£å¸¸ååºåˆ—åŒ–ï¼Œåªæ˜¯æ–°å¢çš„å­—æ®µå€¼æ˜¯é»˜è®¤å€¼è€Œå·²ã€‚





## åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨Javaä¸­ï¼Œ`serialVersionUID`æ˜¯ä¸€ä¸ª`private static final long`ä¿®é¥°çš„é•¿æ•´å‹å˜é‡ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªå¯åºåˆ—åŒ–çš„ç±»ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­ç¡®ä¿ç±»çš„ç‰ˆæœ¬ä¸€è‡´æ€§ã€‚å½“ç±»çš„ç»“æ„å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå¦‚æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å­—æ®µï¼‰ï¼Œ**serialVersionUIDå¯ä»¥å¸®åŠ©ç¡®ä¿æ—§ç‰ˆæœ¬çš„åºåˆ—åŒ–æ•°æ®èƒ½å¤Ÿä¸æ–°ç‰ˆæœ¬çš„ç±»å…¼å®¹**ã€‚

>   ç›¸å…³é¢è¯•é¢˜
>
>   é—®ï¼š åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰çš„æ ¼å¼æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ
>
>   ç­”ï¼š`private static final long seriaVersionUID = å€¼;`
>
>   
>
>   é—®ï¼šåºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰ä¸€å®šè¦æ˜¾å¼å£°æ˜å—ï¼Ÿ
>
>   ç­”ï¼šå¦‚æœ**æ²¡æœ‰æ˜¾å¼å£°æ˜**ï¼Œ Java è¿è¡Œæ—¶ç¯å¢ƒæ ¹æ®ç±»çš„å†…éƒ¨ç»†èŠ‚ï¼ˆåŒ…æ‹¬ç±»åã€æ¥å£åã€æˆå‘˜æ–¹æ³•å’Œå±æ€§ç­‰ï¼‰è‡ªåŠ¨ç”ŸæˆseriaVersionUIDã€‚è‡ªåŠ¨ç”Ÿæˆçš„seriaVersionUIDæ˜¯åŸºäºç±»çš„ç»“æ„è®¡ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼ã€‚å¦‚æœ**ç±»çš„ç»“æ„å‘ç”Ÿå˜åŒ–**ï¼ˆå¦‚æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å­—æ®µï¼‰ï¼Œ**ç”Ÿæˆçš„seriaVersionUIDä¹Ÿä¼šå‘ç”Ÿå˜åŒ–**ã€‚å¦‚æœåºåˆ—åŒ–æ•°æ®çš„seriaVersionUIDä¸ç±»çš„seriaVersionUIDä¸åŒ¹é…ï¼ŒJavaè¿è¡Œæ—¶ç¯å¢ƒä¼šæŠ›å‡º`InvalidCastException`ã€‚
>
>   æ‰€æœ‰ï¼Œå¦‚æœå£°æ˜äº† serialVersionUIDï¼Œå³ä½¿åœ¨åºåˆ—åŒ–å®Œæˆä¹‹åä¿®æ”¹äº†ç±»å¯¼è‡´ç±»é‡æ–°ç¼–è¯‘ï¼Œåˆ™åŸæ¥çš„æ•°æ®ä¹Ÿèƒ½æ­£å¸¸ååºåˆ—åŒ–ï¼Œåªæ˜¯æ–°å¢çš„å­—æ®µå€¼æ˜¯é»˜è®¤å€¼è€Œå·²ã€‚
>
>   
>
>   é—®ï¼šåºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰ä¸€å®šæ˜¯å”¯ä¸€çš„å—ï¼Ÿ
>
>   ç­”ï¼š**åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰å¹¶ä¸ä¸€å®šéœ€è¦æ˜¯å…¨å±€å”¯ä¸€çš„**ï¼Œä½†å®ƒå¿…é¡»åœ¨**åŒä¸€ä¸ªç±»çš„ä¸åŒç‰ˆæœ¬ç›´æ¥ä¿æŒä¸€è‡´**ï¼Œä»¥ç¡®ä¿åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹çš„å…¼å®¹æ€§ã€‚ä¸åŒç±»ä¹‹é—´çš„åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰å¯ä»¥ç›¸åŒï¼Œå› ä¸ºåºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰æ˜¯**ç±»çº§åˆ«çš„æ ‡è¯†ç¬¦ï¼Œè€Œä¸æ˜¯å…¨å±€å”¯ä¸€çš„æ ‡è¯†ç¬¦**ã€‚
>
>   
>
>   é—®ï¼šåŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡å¯ä»¥æœ‰ä¸åŒçš„åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰å—ï¼Ÿ
>
>   ç­”ï¼šä¸å¯ä»¥ã€‚åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰æ˜¯ä¸€ä¸ªé™æ€çš„ã€æœ€ç»ˆçš„é•¿æ•´å‹å˜é‡ï¼ˆ`static final long`ï¼‰ï¼Œå®ƒå±äºç±»çº§åˆ«ï¼Œè€Œä¸æ˜¯å®ä¾‹çº§åˆ«ã€‚è¿™æ„å‘³ç€åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰æ˜¯åœ¨æ•´ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ä¹‹é—´å…±äº«çš„ï¼ŒåŒä¸€ç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½å…·æœ‰ç›¸åŒçš„åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰ã€‚
>
>   
>
>   é—®ï¼šåºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰å¯ä»¥ä¿®æ”¹å—ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥ä¿®æ”¹ï¼Ÿ
>
>   ç­”ï¼šåºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰æ˜¯ä¸€ä¸ªé™æ€çš„ã€æœ€ç»ˆçš„é•¿æ•´å‹å˜é‡ï¼ˆ`static final long`ï¼‰ï¼Œä¸èƒ½åœ¨è¿è¡Œæ—¶ä¿®æ”¹ï¼Œä½†åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹å…¶å€¼ã€‚å½“ä½ å¯¹ç±»çš„ç»“æ„è¿›è¡Œäº†é‡å¤§ä¿®æ”¹ï¼Œå¦‚æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å­—æ®µï¼Œè¿™äº›ä¿®æ”¹å¯èƒ½ä¼šå½±å“åºåˆ—åŒ–æ•°æ®çš„å…¼å®¹æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¿®æ”¹åºåˆ—åŒ–IDï¼ˆseriaVersionUIDï¼‰å¯ä»¥ç¡®ä¿æ—§ç‰ˆæœ¬çš„åºåˆ—åŒ–æ•°æ®æ— æ³•è¢«æ–°ç‰ˆæœ¬çš„ç±»ååºåˆ—åŒ–ï¼Œä»è€Œé¿å…æ½œåœ¨çš„æ•°æ®æŸåæˆ–é”™è¯¯ã€‚ 



## é™æ€å˜é‡èƒ½ä¸èƒ½è¢«åºåˆ—åŒ–ï¼Ÿ

åœ¨Javaä¸­ï¼Œé™æ€å˜é‡ï¼ˆstatic å˜é‡ï¼‰ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚

è¿™æ˜¯å› ä¸ºåºåˆ—åŒ–çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†ä¿å­˜å’Œæ¢å¤å¯¹è±¡çš„çŠ¶æ€ï¼Œè€Œ**é™æ€å˜é‡å±äºç±»çº§åˆ«ï¼Œè€Œä¸æ˜¯æŸä¸ªå¯¹è±¡**ã€‚

å› æ­¤ï¼Œåºåˆ—åŒ–æœºåˆ¶ä¸ä¼šä¿å­˜é™æ€å˜é‡çš„å€¼ã€‚

>   ç•ªå¤–ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ä¼šä¹Ÿä¸åº”è¯¥åºåˆ—åŒ–é™æ€å˜é‡ï¼Œä½†æ˜¯ä½ éè¦è¿™ä¹ˆåšçš„è¯ï¼Œåªèƒ½é€šè¿‡writeObjectæ–¹æ³•æ‰‹åŠ¨å®šä¹‰åºåˆ—åŒ–è§„åˆ™ã€‚
>
>   ```java
>   // åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„ç±»å¿…é¡»æ¬¡å•Šç”¨å…·æœ‰è¿™äº›ç²¾å‡†ç­¾åçš„ç‰¹æ®Šæ–¹æ³•
>   private void readObject(java.io.ObjectInputStream s)
>           throws java.io.IOException, ClassNotFoundException 
>           
>   private void writeObject(java.io.ObjectOutputStream s)
>           throws java.io.IOException
>   ```
>
>   æ¯”å¦‚è¯´ï¼šArrayListç±»å°±æ‰‹åŠ¨å®šåˆ¶äº†åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„è§„åˆ™



## transientå…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ

åœ¨Javaä¸­ï¼Œ`transient`å…³é”®å­—ç”¨äºæ ‡è®°ç±»çš„æˆå‘˜å˜é‡ï¼Œä½¿å…¶åœ¨åºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­è¢«å¿½ç•¥ã€‚

`transient`å…³é”®å­—çš„ä¸»è¦ç”¨é€”ï¼š

-   **æ’é™¤æ•æ„Ÿæ•°æ®**ï¼šæŸäº›æ•°æ®å¯èƒ½æ˜¯æ•æ„Ÿçš„ï¼Œå¦‚å¯†ç ã€å¯†é’¥ç­‰ï¼Œè¿™äº›æ•°æ®ä¸åº”è¯¥è¢«åºåˆ—åŒ–å¹¶å­˜å‚¨åœ¨æ–‡ä»¶æˆ–ä¼ è¾“åœ¨ç½‘ç»œä¸­ã€‚

-   **ä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½**ï¼šæŸäº›æ•°æ®é‡è¾ƒå¤§çš„å­—æ®µï¼Œä¾‹å¦‚å¤§å¯¹è±¡ã€å¤§æ•°ç»„ç­‰ï¼Œå¦‚æœä¸éœ€è¦åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¿å­˜ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å…³é”®å­—æ¥æ’é™¤è¿™äº›å­—æ®µï¼Œä»è€Œå‡å°‘åºåˆ—åŒ–æ•°æ®çš„å¤§å°ï¼Œæé«˜æ€§èƒ½ã€‚å‡å°‘ä¸å¿…è¦çš„æ•°æ®åºåˆ—åŒ–å¯ä»¥èŠ‚çœç£ç›˜ç©ºé—´å’Œç½‘ç»œå¸¦å®½ã€‚
-   **åŠ¨æ€è®¡ç®—çš„å­—æ®µ**ï¼šæŸäº›å­—æ®µå¯èƒ½æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¡ç®—çš„ï¼Œè¿™äº›å­—æ®µçš„å€¼å¯ä»¥åœ¨éœ€è¦æ—¶é‡æ–°è®¡ç®—ï¼Œä¸éœ€è¦ä¿å­˜åœ¨åºåˆ—åŒ–æ•°æ®ä¸­ã€‚



## ArrayListé›†åˆä¸­çš„elementDataæ•°ç»„ä¸ºä»€ä¹ˆè¦åŠ transientä¿®é¥°ï¼Ÿ

elementDataæ•°ç»„ä¸­å¯èƒ½æœ‰å¾ˆå¤š`null`å€¼ï¼Œé€šå¸¸æƒ…å†µä¸‹`size` < `elementData.length`ï¼Œå› æ­¤åºåˆ—åŒ–æ—¶ï¼Œåªéœ€è¦åºåˆ—åŒ–sizeä¸ªå¯¹è±¡å³å¯ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„ã€‚

å› æ­¤ArrayListç±»ä¸­æ‰‹åŠ¨å®ç°äº†`writeObject`å’Œ`readObject`æ–¹æ³•å®šåˆ¶äº†ç‰¹æ®Šçš„åºåˆ—åŒ–è¿‡ç¨‹ã€‚



## åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæœ‰å“ªäº›éœ€è¦æ³¨æ„çš„ï¼Ÿ

åœ¨è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

-   å¦‚æœä¸€ä¸ªç±»çš„å¯¹è±¡éœ€è¦åºåˆ—åŒ–ï¼Œè¯¥ç±»**å¿…é¡»å®ç°`Serializable`æ¥å£**
-   å»ºè®®**æ˜¾å¼å®šä¹‰`serialVersionUID`**ï¼Œä»¥é¿å…å› ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„serialVersionUIDä¸ä¸€è‡´è€Œå¯¼è‡´çš„é—®é¢˜ã€‚
-   æ˜ç¡®å“ªäº›å˜é‡ä¸åºåˆ—åŒ–ï¼š`static`å’Œ`transient`æ ‡è¯†çš„å˜é‡ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚
-   å°½é‡é¿å…å¤æ‚çš„å¯¹è±¡å›¾ï¼Œæˆ–è€…ä½¿ç”¨`transient`å…³é”®å­—æ¥æ’é™¤ä¸å¿…è¦çš„å¼•ç”¨ã€‚å¦‚æœå¯¹è±¡å›¾ä¸­æœ‰å¾ªç¯å¼•ç”¨ï¼ˆå³å¯¹è±¡Aå¼•ç”¨å¯¹è±¡Bï¼Œå¯¹è±¡Båˆå¼•ç”¨å¯¹è±¡Aï¼‰ï¼Œåºåˆ—åŒ–æœºåˆ¶ä¼šè‡ªåŠ¨å¤„ç†è¿™ç§æƒ…å†µï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚
-   å¦‚æœéœ€è¦å¯¹åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¯ä»¥åœ¨ç±»ä¸­å®ç° writeObject å’Œ readObjectæ–¹æ³•



## Javaæœ‰å“ªä¸¤ç§åºåˆ—åŒ–æ–¹å¼ï¼Ÿ

-   å®ç°`Serializable`æ¥å£ã€‚è¯¥æ¥å£ä¸åŒ…å«ä»»ä½•æŠ½è±¡æ–¹æ³•ã€‚å¦‚æœéœ€è¦æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¯ä»¥åœ¨ç±»ä¸­æ‰‹åŠ¨å®ç° writeObject å’Œ readObjectæ–¹æ³•
-   å®ç°`Externalizable`æ¥å£ã€‚è¯¥æ¥å£åŒ…å«writeExternal å’Œ readExternal æ–¹æ³•



## åºåˆ—åŒ–ä¸­@Serialæ³¨è§£çš„ä½œç”¨ï¼Ÿï¼ˆJDK16ï¼‰

åœ¨Java16åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°æ³¨è§£`@Serial`ï¼Œç”¨äºåœ¨åºåˆ—åŒ–ç›¸å…³çš„ä»£ç ä¸­æä¾›æ›´å¥½çš„æ–‡æ¡£åŒ–å’Œç»´æŠ¤æ€§ã€‚`@Serial`æ³¨è§£ä¸»è¦ç”¨äºæ ‡è®°å“ªäº›ä¸åºåˆ—åŒ–ç›¸å…³çš„ç‰¹æ®Šæ–¹æ³•å’Œå­—æ®µã€‚ä½¿å¾—è¿™äº›æ–¹æ³•å’Œå­—æ®µåœ¨ä»£ç å®¡æŸ¥å’Œç»´æŠ¤æ—¶æ›´åŠ æ¸…æ™°ã€‚

å…·ä½“æ¥è¯´ï¼Œ`@Serial`æ³¨è§£å¯ä»¥ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š

-   æ ‡è®°SerialVersionUIDå­—æ®µ
-   æ ‡è®°  writeObject å’Œ readObjectæ–¹æ³•
-   æ ‡è®° readResolve å’Œ writeReplaceæ–¹æ³•

>   ä¸ªäººç†è§£ï¼š`@Serial`æ³¨è§£å°±ç±»ä¼¼äº`        @Override`æ³¨è§£ï¼Œåè€…æ˜¯ç”¨äºæ ‡è®°å“ªäº›æ–¹æ³•æ˜¯é‡å†™çš„æ–¹æ³•



## Javaåºåˆ—åŒ–ä¸­å¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–å¦‚ä½•å¤„ç†ï¼Ÿ

ä¸¤ç§æ–¹æ¡ˆï¼š

-   ä½¿ç”¨transientå…³é”®å­—æ¥æ ‡è®°è¿™äº›å­—æ®µ
-   è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹æ³•

**ä½¿ç”¨transientå…³é”®å­—**

å¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–ï¼Œå¯ä»¥ä½¿ç”¨transientå…³é”®å­—æ¥æ ‡è®°è¿™äº›å­—æ®µã€‚è¢«æ ‡è®°ä¸ºtransientçš„å­—æ®µåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥ï¼Œä¸ä¼šè¢«å†™å…¥åˆ°åºåˆ—åŒ–æµä¸­ã€‚

**è‡ªå®šä¹‰åºåˆ—åŒ–æ–¹æ³•**

é™¤äº†ä½¿ç”¨transientå…³é”®å­—ï¼Œè¿˜å¯ä»¥é€šè¿‡æ‰‹åŠ¨å®ç°`writeObject`å’Œ`readObject`æ–¹æ³•å®šåˆ¶äº†ç‰¹æ®Šçš„åºåˆ—åŒ–è¿‡ç¨‹

```java
import java.io.*;

class User implements Serializable {

    private static final long serialVersionUID = 1L;
    
    private String username;
    private transient String password; // ä¸æƒ³åºåˆ—åŒ–çš„å­—æ®µ

    public User(String username, String password) {
        this.username = username;
        this.password = password;
    }

    private void writeObject(ObjectOutputStream oos) throws IOException {
        oos.defaultWriteObject(); // åºåˆ—åŒ–étransientå­—æ®µ
        oos.writeObject(encryptPassword(password)); // è‡ªå®šä¹‰åºåˆ—åŒ–password
    }

    private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException {
        ois.defaultReadObject(); // ååºåˆ—åŒ–étransientå­—æ®µ
        this.password = decryptPassword((String) ois.readObject()); // è‡ªå®šä¹‰ååºåˆ—åŒ–password
    }

    private String encryptPassword(String password) {
        // ç®€å•åŠ å¯†ç¤ºä¾‹ï¼ˆå®é™…ä½¿ç”¨ä¸­è¯·ä½¿ç”¨æ›´å®‰å…¨çš„åŠ å¯†æ–¹æ³•ï¼‰
        return "encrypted_" + password;
    }

    private String decryptPassword(String encryptedPassword) {
        // ç®€å•è§£å¯†ç¤ºä¾‹ï¼ˆå®é™…ä½¿ç”¨ä¸­è¯·ä½¿ç”¨æ›´å®‰å…¨çš„è§£å¯†æ–¹æ³•ï¼‰
        return encryptedPassword.replace("encrypted_", "");
    }

    @Override
    public String toString() {
        return "User{username='" + username + "', password='" + password + "'}";
    }
}

public class CustomSerializationExample {
    public static void main(String[] args) {
        User user = new User("john_doe", "secret_password");

        // åºåˆ—åŒ–
        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("user.ser"))) {
            oos.writeObject(user);
        } catch (IOException e) {
            e.printStackTrace();
        }

        // ååºåˆ—åŒ–
        User deserializedUser = null;
        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream("user.ser"))) {
            deserializedUser = (User) ois.readObject();
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }

        // æ‰“å°ååºåˆ—åŒ–åçš„å¯¹è±¡
        System.out.println(deserializedUser);
    }
}
```



## ä»€ä¹ˆæ˜¯BIOã€NIOã€AIOï¼Ÿ 

BIOã€NIO å’Œ AIO æ˜¯ Java ä¸­ç”¨äºå¤„ç†è¾“å…¥è¾“å‡ºï¼ˆI/Oï¼‰æ“ä½œçš„ä¸‰ç§ä¸åŒæ¨¡å‹ã€‚å®ƒä»¬åˆ†åˆ«ä»£è¡¨é˜»å¡ I/Oã€éé˜»å¡ I/O å’Œå¼‚æ­¥ I/O

|          | BIO                                                          | NIO                                                          | AIO                                                          |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| æ¦‚å¿µ     | Blocking I/Oï¼ˆé˜»å¡å¼I/Oï¼‰ï¼Œå®ƒå°±æ˜¯ä¼ ç»Ÿçš„IO                    | Non-blocking I/Oï¼ˆéé˜»å¡å¼I/Oï¼‰ï¼Œä¹Ÿæˆä¸ºNew I/O               | Asynchronous I/Oï¼ˆå¼‚æ­¥I/Oï¼‰                                  |
| æŠ€æœ¯     | åŸºäºæµæ¨¡å‹                                                   | åŸºäºç¼“å†²åŒºå’Œé€šé“                                             | åŸºäºäº‹ä»¶å›è°ƒæœºåˆ¶                                             |
| åº”ç”¨åœºæ™¯ | é€‚ç”¨äºè¿æ¥æ•°è¾ƒå°‘ä¸”æ¯ä¸ªè¿æ¥çš„æ•°æ®é‡è¾ƒå¤§çš„åœºæ™¯                 | é€‚ç”¨äºè¿æ¥æ•°è¾ƒå¤šä¸”æ¯ä¸ªè¿æ¥çš„æ•°æ®é‡è¾ƒå°çš„åœºæ™¯                 | é€‚ç”¨äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„åœºæ™¯ï¼Œå¦‚é«˜æ€§èƒ½æœåŠ¡å™¨                   |
| ç‰¹ç‚¹     | 1ï¼‰å½“å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªI/Oæ“ä½œè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯ä¼šé˜»å¡ï¼ŒçŸ¥é“I/Oæ“ä½œå®Œæˆ<br>2ï¼‰ä»…æ”¯æŒä»è¾“å…¥æµä¸­è¯»å–æ•°æ®ï¼Œå°†æ•°æ®å†™å…¥è¾“å‡ºæµ<br>3ï¼‰æ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ¥å¤„ç† | 1ï¼‰å®¢æˆ·ç«¯å‘èµ·I/Oæ“ä½œè¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯ä¸ä¼šé˜»å¡ï¼Œå¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡<br/>2ï¼‰ä½¿ç”¨é€šé“ï¼ˆChannelï¼‰å’Œç¼“å†²åŒºï¼ˆBufferï¼‰è¿›è¡Œæ•°æ®è¯»å†™<br/>3ï¼‰æ”¯æŒé€‰æ‹©å™¨ï¼ˆSelectorï¼‰ï¼Œå¯ä»¥ç›‘å¬å¤šä¸ªé€šé“çš„äº‹ä»¶ | 1ï¼‰å®¢æˆ·ç«¯å‘èµ·I/Oæ“ä½œè¯·æ±‚åï¼ŒæœåŠ¡å™¨ç«¯ç«‹å³è¿”å›ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡<br/>2ï¼‰I/Oæ“ä½œå®Œæˆåï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥æœåŠ¡å™¨ç«¯ç¨‹åº<br/>3ï¼‰AIOçš„å·¥ä½œæœºåˆ¶åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶ä½¿å¾—çº¿ç¨‹å¯ä»¥åœ¨I/Oæ“ä½œå®Œæˆæ—¶é€šè¿‡å›è°ƒæœºåˆ¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä¸éœ€è¦è½®è¯¢æ£€æŸ¥I/Oæ“ä½œçš„çŠ¶æ€ |

**BIOï¼ˆBlocking I/Oï¼‰**

**ç‰¹ç‚¹**

-   **é˜»å¡**ï¼šæ¯ä¸ª I/O æ“ä½œéƒ½ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æ“ä½œå®Œæˆã€‚
-   **ä¸€å¯¹ä¸€è¿æ¥**ï¼šæ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ¥å¤„ç†è¯·æ±‚ã€‚
-   **ç®€å•æ˜“ç”¨**ï¼šä»£ç ç¼–å†™ç®€å•ç›´è§‚ï¼Œé€‚åˆå°è§„æ¨¡å¹¶å‘åœºæ™¯ã€‚

**å·¥ä½œåŸç†**

å½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”è¯¥çº¿ç¨‹ä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°æ•°æ®è¯»å–æˆ–å†™å…¥å®Œæˆã€‚è¿™ç§æ–¹å¼åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¼šå¯¼è‡´å¤§é‡çº¿ç¨‹å ç”¨èµ„æºï¼Œä»è€Œå½±å“æ€§èƒ½

```java
ServerSocket serverSocket = new ServerSocket(8080);
while (true) {
    Socket socket = serverSocket.accept(); // é˜»å¡ç­‰å¾…è¿æ¥
    new Thread(() -> {
        try (BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
             PrintWriter out = new PrintWriter(socket.getOutputStream(), true)) {
            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                if ("bye".equals(inputLine)) break;
                out.println("Echo: " + inputLine);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }).start();
}
```

**NIOï¼ˆNon-blocking I/Oï¼‰**

**ç‰¹ç‚¹**

-   **éé˜»å¡**ï¼šI/O æ“ä½œä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œå¯ä»¥ç«‹å³è¿”å›ç»“æœæˆ–çŠ¶æ€ã€‚
-   **å¤šè·¯å¤ç”¨**ï¼šé€šè¿‡é€‰æ‹©å™¨ï¼ˆSelectorï¼‰ç®¡ç†å¤šä¸ªé€šé“ï¼ˆChannelï¼‰ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†å¤šä¸ªè¿æ¥ã€‚
-   **é«˜æ€§èƒ½**ï¼šé€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œå‡å°‘çº¿ç¨‹æ•°é‡ï¼Œæé«˜ç³»ç»Ÿååé‡ã€‚

**å·¥ä½œåŸç†**

NIO ä½¿ç”¨é€‰æ‹©å™¨ï¼ˆSelectorï¼‰æ¥ç›‘å¬å¤šä¸ªé€šé“çš„çŠ¶æ€å˜åŒ–ï¼ˆå¦‚å¯è¯»ã€å¯å†™ï¼‰ã€‚å½“æŸä¸ªé€šé“å‡†å¤‡å¥½è¿›è¡Œ I/O æ“ä½œæ—¶ï¼Œé€‰æ‹©å™¨ä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚è¿™ç§æ–¹å¼é¿å…äº†ä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºç‹¬ç«‹çº¿ç¨‹ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚

```java
Selector selector = Selector.open();
ServerSocketChannel serverChannel = ServerSocketChannel.open();
serverChannel.configureBlocking(false);
serverChannel.socket().bind(new InetSocketAddress(8080));
serverChannel.register(selector, SelectionKey.OP_ACCEPT);

while (true) {
    selector.select();
    Set<SelectionKey> selectedKeys = selector.selectedKeys();
    Iterator<SelectionKey> iterator = selectedKeys.iterator();

    while (iterator.hasNext()) {
        SelectionKey key = iterator.next();
        iterator.remove();

        if (key.isAcceptable()) {
            // å¤„ç†æ–°è¿æ¥
            ServerSocketChannel serverChannel = (ServerSocketChannel) key.channel();
            SocketChannel clientChannel = serverChannel.accept();
            clientChannel.configureBlocking(false);
            clientChannel.register(selector, SelectionKey.OP_READ);
        } else if (key.isReadable()) {
            // å¤„ç†è¯»æ“ä½œ
            SocketChannel clientChannel = (SocketChannel) key.channel();
            ByteBuffer buffer = ByteBuffer.allocate(1024);
            int bytesRead = clientChannel.read(buffer);
            if (bytesRead == -1) {
                clientChannel.close();
            } else {
                buffer.flip();
                System.out.println("Received: " + new String(buffer.array(), 0, bytesRead));
                buffer.clear();
            }
        }
    }
}
```

**AIOï¼ˆAsynchronous I/Oï¼‰**

**ç‰¹ç‚¹**

-   **å¼‚æ­¥**ï¼šI/O æ“ä½œæ˜¯å®Œå…¨å¼‚æ­¥çš„ï¼Œè°ƒç”¨æ–¹æ³•åç«‹å³è¿”å›ï¼Œå®é™…çš„ I/O æ“ä½œç”±æ“ä½œç³»ç»Ÿå®Œæˆã€‚
-   **äº‹ä»¶é©±åŠ¨**ï¼šé€šè¿‡å›è°ƒå‡½æ•°æˆ– Future å¯¹è±¡è·å–æ“ä½œç»“æœã€‚
-   **é«˜æ•ˆ**ï¼šé€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œè¿›ä¸€æ­¥å‡å°‘äº†çº¿ç¨‹çš„ä½¿ç”¨ï¼Œæé«˜äº†å“åº”é€Ÿåº¦ã€‚

**å·¥ä½œåŸç†**

AIO ä½¿ç”¨å¼‚æ­¥é€šé“ï¼ˆAsynchronousChannelï¼‰ï¼Œå½“å‘èµ· I/O æ“ä½œæ—¶ï¼Œçº¿ç¨‹ä¸ä¼šè¢«é˜»å¡ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚å½“ I/O æ“ä½œå®Œæˆæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°æˆ– Future å¯¹è±¡è·å–ç»“æœã€‚

```java
AsynchronousServerSocketChannel serverChannel = AsynchronousServerSocketChannel.open();
serverChannel.bind(new InetSocketAddress(8080));

serverChannel.accept(null, new CompletionHandler<AsynchronousSocketChannel, Void>() {
    @Override
    public void completed(AsynchronousSocketChannel clientChannel, Void attachment) {
        // å¤„ç†æ–°è¿æ¥
        serverChannel.accept(null, this); // ç»§ç»­æ¥å—æ–°çš„è¿æ¥
        ByteBuffer buffer = ByteBuffer.allocate(1024);
        clientChannel.read(buffer, buffer, new CompletionHandler<Integer, ByteBuffer>() {
            @Override
            public void completed(Integer result, ByteBuffer attachment) {
                if (result == -1) {
                    clientChannel.close();
                } else {
                    attachment.flip();
                    System.out.println("Received: " + new String(attachment.array(), 0, result));
                    attachment.clear();
                }
            }

            @Override
            public void failed(Throwable exc, ByteBuffer attachment) {
                exc.printStackTrace();
            }
        });
    }

    @Override
    public void failed(Throwable exc, Void attachment) {
        exc.printStackTrace();
    }
});
```



## Javaå¦‚ä½•é«˜æ•ˆç‡è¯»å†™å¤§æ–‡ä»¶ï¼Ÿ

-   **ä½¿ç”¨ç¼“å†²æµå’Œæ–‡ä»¶æµ**ï¼šç®€å•æ˜“ç”¨ï¼Œé€‚åˆå¤§å¤šæ•°å¸¸è§„æ–‡ä»¶æ“ä½œï¼Œç‰¹åˆ«æ˜¯å½“éœ€è¦é€è¡Œå¤„ç†æ—¶
-   **ä½¿ç”¨Fileså·¥å…·ç±»çš„æ–¹æ³•**ï¼šæä¾›äº†ä¾¿æ·çš„ APIï¼Œä»£ç ç®€æ´ï¼Œé€‚ç”¨äºä¸éœ€è¦å¤æ‚é€»è¾‘çš„æ–‡ä»¶æ“ä½œã€‚
-   **ä½¿ç”¨NIOçš„FileChannelå’ŒBuffer**ï¼šæ€§èƒ½æœ€ä¼˜ï¼Œé€‚åˆå¤„ç†éå¸¸å¤§çš„æ–‡ä»¶æˆ–éœ€è¦æ›´é«˜æ€§èƒ½çš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ã€‚

**ä½¿ç”¨ç¼“å†²æµå’Œæ–‡ä»¶æµ**

é€šè¿‡ä½¿ç”¨ BufferedInputStream å’Œ BufferedOutputStream æ¥æé«˜è¯»å†™æ•ˆç‡ã€‚è¿™äº›ç¼“å†²æµå¯ä»¥åœ¨åº•å±‚æ–‡ä»¶æµä¸Šæ·»åŠ ä¸€å±‚ç¼“å†²åŒºï¼Œ**å‡å°‘ I/O æ“ä½œçš„æ¬¡æ•°**ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚

å…³é”®ç‚¹ï¼š

-   **ç¼“å†²åŒºå¤§å°**ï¼šå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ç¼“å†²åŒºå¤§å°ï¼ˆå¦‚ 8KB æˆ–æ›´å¤§ï¼‰ï¼Œä»¥å¹³è¡¡å†…å­˜å ç”¨å’Œ I/O æ€§èƒ½ã€‚
-   **è‡ªåŠ¨å…³é—­èµ„æº**ï¼šä½¿ç”¨ try-with-resources è¯­æ³•ç¡®ä¿èµ„æºè¢«æ­£ç¡®å…³é—­ã€‚

```java
import java.io.*;

public class BufferedStreamExample {
    public static void main(String[] args) {
        String inputFilePath = "large_input.txt";
        String outputFilePath = "large_output.txt";

        try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(inputFilePath));
             BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(outputFilePath))) {

            byte[] buffer = new byte[8192]; // 8KB ç¼“å†²åŒº
            int bytesRead;

            while ((bytesRead = bis.read(buffer)) != -1) {
                bos.write(buffer, 0, bytesRead);
            }

            System.out.println("File copied successfully using buffered streams.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**ä½¿ç”¨ Files å·¥å…·ç±»çš„æ–¹æ³•**

Java 7 å¼•å…¥äº† `java.nio.file.Files` ç±»ï¼Œæä¾›äº†è®¸å¤šä¾¿æ·çš„æ–¹æ³•æ¥å¤„ç†æ–‡ä»¶æ“ä½œï¼ŒåŒ…æ‹¬è¯»å–å’Œå†™å…¥å¤§æ–‡ä»¶ã€‚è¿™äº›æ–¹æ³•é€šå¸¸æ›´ç®€æ´ï¼Œå¹¶ä¸”å†…éƒ¨å·²ç»ä¼˜åŒ–äº†æ€§èƒ½

å…³é”®ç‚¹ï¼š

-   **æ‰¹é‡æ“ä½œ**ï¼šFiles.copy æ–¹æ³•å¯ä»¥ä¸€æ¬¡æ€§å¤åˆ¶æ•´ä¸ªæ–‡ä»¶ï¼Œé€‚ç”¨äºä¸éœ€è¦é€è¡Œå¤„ç†çš„æƒ…å†µã€‚

-   **é€è¡Œå¤„ç†**ï¼šå¦‚æœéœ€è¦é€è¡Œå¤„ç†æ–‡ä»¶å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ `Files.newBufferedReader `å’Œ `Files.newBufferedWriter`ï¼Œç»“åˆ `BufferedReader `å’Œ `BufferedWriter` æé«˜æ•ˆç‡ã€‚

```java
import java.nio.file.*;
import java.io.IOException;

public class FilesExample {
    public static void main(String[] args) {
        Path inputPath = Paths.get("large_input.txt");
        Path outputPath = Paths.get("large_output.txt");

        try {
            // å¤åˆ¶æ–‡ä»¶å†…å®¹
            Files.copy(inputPath, outputPath, StandardCopyOption.REPLACE_EXISTING);

            System.out.println("File copied successfully using Files.copy.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

// æˆ–è€…é€è¡Œè¯»å–å¹¶å†™å…¥
public class FilesLineByLineExample {
    public static void main(String[] args) {
        Path inputPath = Paths.get("large_input.txt");
        Path outputPath = Paths.get("large_output.txt");

        try (BufferedReader reader = Files.newBufferedReader(inputPath);
             BufferedWriter writer = Files.newBufferedWriter(outputPath)) {

            String line;
            while ((line = reader.readLine()) != null) {
                writer.write(line);
                writer.newLine();
            }

            System.out.println("File processed line by line successfully.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

**ä½¿ç”¨ NIO çš„ FileChannel å’Œ Buffer**

NIOï¼ˆNew Input/Outputï¼‰æä¾›äº†éé˜»å¡ I/O æ“ä½œå’Œæ›´é«˜æ•ˆçš„ç¼“å†²æœºåˆ¶ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤§æ–‡ä»¶ã€‚FileChannel å¯ä»¥ç›´æ¥ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œæä¾›æ›´é«˜çš„æ€§èƒ½ã€‚

å…³é”®ç‚¹ï¼š

-   ç›´æ¥ç¼“å†²åŒºï¼šä½¿ç”¨ ByteBuffer.allocateDirect åˆ›å»ºç›´æ¥ç¼“å†²åŒºï¼Œå¯ä»¥ç›´æ¥æ˜ å°„åˆ°æœ¬åœ°å†…å­˜ï¼Œå‡å°‘æ•°æ®æ‹·è´æ¬¡-æ•°ã€‚

-   éé˜»å¡ I/Oï¼šFileChannel æ”¯æŒéé˜»å¡æ“ä½œï¼Œé€‚åˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„é«˜æ€§èƒ½ I/Oã€‚

-   æ‰¹é‡ä¼ è¾“ï¼šé€šè¿‡ transferTo å’Œ transferFrom æ–¹æ³•å¯ä»¥æ›´é«˜æ•ˆåœ°ä¼ è¾“å¤§æ–‡ä»¶ï¼Œå‡å°‘æ‰‹åŠ¨ç®¡ç†ç¼“å†²åŒºçš„éœ€æ±‚ã€‚

```java
import java.nio.file.*;
import java.nio.channels.*;
import java.nio.ByteBuffer;

public class FileChannelExample {
    public static void main(String[] args) {
        Path inputPath = Paths.get("large_input.txt");
        Path outputPath = Paths.get("large_output.txt");

        try (FileChannel sourceChannel = FileChannel.open(inputPath, StandardOpenOption.READ);
             FileChannel destChannel = FileChannel.open(outputPath, StandardOpenOption.CREATE, StandardOpenOption.WRITE, StandardOpenOption.TRUNCATE_EXISTING)) {

            ByteBuffer buffer = ByteBuffer.allocateDirect(8192); // ç›´æ¥ç¼“å†²åŒº
            long bytesTransferred = 0;
            long fileSize = sourceChannel.size();

            while (bytesTransferred < fileSize) {
                buffer.clear(); // æ¸…ç©ºç¼“å†²åŒºå‡†å¤‡è¯»å–
                int bytesRead = sourceChannel.read(buffer);

                if (bytesRead == -1) break; // æ–‡ä»¶ç»“æŸ

                buffer.flip(); // åˆ‡æ¢ä¸ºå†™æ¨¡å¼
                destChannel.write(buffer);
                bytesTransferred += bytesRead;
            }

            System.out.println("File copied successfully using FileChannel.");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```



## å¦‚ä½•æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Ÿ

é€‰æ‹©å“ªç§æ–¹å¼å–å†³äºæ–‡ä»¶çš„å¤§å°å’Œç±»å‹ã€‚

1ã€æŸ¥çœ‹ä¸¤ä¸ªè·¯å¾„æ˜¯ä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶

-   ä½¿ç”¨Filesç±»çš„ isSameFile æ–¹æ³•ï¼šæ£€æŸ¥ä¸¤ä¸ªæ–‡ä»¶è·¯å¾„æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ã€‚ä¸é€‚ç”¨äºå†…å®¹ç›¸åŒï¼Œä½†è·¯å¾„ä¸åŒçš„æ–‡ä»¶

2ã€æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶å¤§å°æ˜¯ä¸æ˜¯ä¸€è‡´

-   è·å–ä¸¤ä¸ªæ–‡ä»¶å¤§å°ï¼Œç„¶åæ¯”è¾ƒå¤§å°

3

-   å¦‚æœæ–‡ä»¶ä¸å¤§ï¼Œä½¿ç”¨Filesç±»çš„ readAllBytes æ–¹æ³•ä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶çš„æ‰€æœ‰å­—èŠ‚ï¼Œç„¶åç”¨ Arrays.equals(byte[] a, byte[] b) æ–¹æ³•å¯¹å­—èŠ‚æ•°ç»„è¿›è¡Œæ¯”è¾ƒã€‚é€‚ç”¨äºè¾ƒå°çš„æ–‡ä»¶

-   å¯¹äºè¾ƒå¤§çš„æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨é€è¡Œæ¯”è¾ƒæˆ–é€å­—èŠ‚æ¯”è¾ƒï¼Œä»¥é¿å…å†…å­˜æº¢å‡º
    -   ä»»æ„ç±»å‹æ–‡ä»¶ï¼šä½¿ç”¨å­—èŠ‚æµä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚ï¼Œç„¶åç”¨  Arrays.equals(byte[] a, byte[] b) æ–¹æ³•å¯¹å­—èŠ‚æ•°ç»„è¿›è¡Œæ¯”è¾ƒ
    -   çº¯æ–‡æœ¬æ–‡ä»¶ï¼šä½¿ç”¨ BufferedReader æˆ– Scanner é€è¡Œè¯»å–ï¼Œç„¶åç”¨ Object.equals(Object s1, Object s2) æ–¹æ³•æ¯”è¾ƒè¡Œæ–‡æœ¬ã€‚



# ç•ªå¤–

## å¦‚ä½•åœ¨Javaä¸­è°ƒç”¨å¤–éƒ¨å¯æ‰§è¡Œç¨‹åºæˆ–ç³»ç»Ÿå‘½ä»¤ï¼Ÿ