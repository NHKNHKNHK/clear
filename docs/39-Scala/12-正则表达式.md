---
permalink: /scala/scala-regular-expression
---

# 正则表达式

## 1 正则表达式简介

Scala 的正则表达式继承了 Java 的语法规则，Java 则大部分使用了 Perl 语言的规则。

常用的一些正则表达式规则：

| 表达式         | 匹配规则                                                     |
|-------------| ------------------------------------------------------------ |
| `^`         | 匹配输入字符串开始的位置                                     |
| `$`         | 匹配输入字符串结尾的位置                                     |
| `.`         | 匹配除"\r\n"之外的任何单个字符                               |
| `[...]`     | 字符集。匹配包含的任一字符。例如，"[abc]"匹配"plain"中的"a"  |
| `[^...]`      | 反向字符集。匹配未包含的任何字符。例如，"[^abc]"匹配"plain"中"p"，"l"，"i"，"n" |
| `\\A`       | 匹配输入字符串开始的位置（无多行支持）                       |
| `\\z`       | 字符串结尾(类似$，但不受处理多行选项的影响)                  |
| `\\Z`       | 字符串结尾或行尾(不受处理多行选项的影响)                     |
| `re*`       | 重复零次或更多次                                             |
| `re+`       | 重复一次或更多次                                             |
| `re?`       | 重复零次或一次                                               |
| `re{ n}`    | 重复n次                                                      |
| `re{ n,}`   |                                                              |
| `re{ n, m}` | 重复n到m次                                                   |
| `a\|b`      | 匹配 a 或者 b                                                |
| `(re)`      | 匹配 re,并捕获文本到自动命名的组里                           |
| `(?: re)`   | 匹配 re,不捕获匹配的文本，也不给此分组分配组号               |
| `(?> re)`   | 贪婪子表达式                                                 |
| `\\w`       | 匹配字母或数字或下划线                                       |
| `\W `       | 匹配任意不是字母，数字，下划线，汉字的字符                   |
| `\\s`       | 匹配任意的空白符,相等于 [\t\n\r\f]                           |
| `\\S`       | 匹配任意不是空白符的字符                                     |
| `\\d`       | 匹配数字，类似 [0-9]                                         |
| `\\D`       | 匹配任意非数字的字符                                         |
| `\\G`       | 当前搜索的开头                                               |
| `\\n`       | 换行符                                                       |
| `\\b`       | 通常是单词分界位置，但如果在字符类里使用代表退格             |
| `\\B`       | 匹配不是单词开头或结束的位置                                 |
| `\\t`       | 制表符                                                       |
| `\\Q`       | 开始引号：**\Q(a+b)\*3\E** 可匹配文本 "(a+b)*3"。            |
| `\\E`       | 结束引号：**\Q(a+b)\*3\E** 可匹配文本 "(a+b)*3"。            |



## 2 基本语法

Scala 通过 `scala.util.matching` 包中的 **Regex** 类来支持正则表达式

```scala
import scala.util.matching.Regex

object ScalaRegex {
    def main(args: Array[String]): Unit = {
        // 构建正则表达式
        val pattern = "Scala".r  // 使用 String 类的 r() 方法构造了一个Regex对象
        val str = "Scala is Scalable Language"

        // 匹配字符串 - 第一个
        println(pattern findFirstIn str)  // 使用 findFirstIn 方法找到首个匹配项

        // 匹配字符串 - 所有
        val iterator: Regex.MatchIterator = pattern findAllIn str  //findAllIn匹配所有匹配项
        while ( iterator.hasNext ) {
            println(iterator.next())
        }

        println("***************************")
        // 匹配规则：大写，小写都可
        val pattern1 = new Regex("(S|s)cala")
        val str1 = "Scala is scalable Language"
        println((pattern1 findAllIn str1).mkString(","))
    }
}
```



## 3 案例实操

###  手机号正则表达式验证方法

```scala
object ScalaRegex {
    def main(args: Array[String]): Unit = {
        // 构建正则表达式
        println(isMobileNumber("18801234567"))
        println(isMobileNumber("11111111111"))
    }
    def isMobileNumber(number: String): Boolean ={
        val regex = "^((13[0-9])|(14[5,7,9])|(15[^4])|(18[0-9])|(17[0,1,3,5,6,7,8]))[0-9]{8}$".r
        val length = number.length
        regex.findFirstMatchIn(number.slice(length-11,length)) != None
    }
}
```

### 提取邮件地址的域名部分


```scala
object ScalaRegex {
    def main(args: Array[String]): Unit = {
        // 构建正则表达式
        val r = """([_A-Za-z0-9-]+(?:\.[_A-Za-z0-9-\+]+)*)(@[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)*(?:\.[A-Za-z]{2,})) ?""".r
        println(r.replaceAllIn("abc.edf+jianli@gmail.com   hello@gmail.com.cn", (m => "*****" + m.group(2))))  // 使用 **replaceAllIn( )** 方法替换所有匹配项
    }
}
```


