## scirpt标签放在header里面和放在body底部里面有什么区别？







## 前端项目部署后刷新页面会出现404的问题

>   注意！！！
>
>   ​     这个问题经常发生在我们使用Vue、React编写的单页面应用中，并且由于使用的路由模式是history模式导致的

前端项目部署后刷新页面出现 404 的问题，通常与 **前端路由模式** 和 **服务器配置** 有关

**根本原因**

-   **前端路由模式**：现代前端框架（如 Vue/React/Angular）通常使用两种路由模式：
    -   **Hash 模式**：URL 中包含 `#`（如 `https://example.com/#/home`），刷新时不会向服务器发送 `#` 后的路径。
    -   **History 模式**：使用 HTML5 History API（如 `https://example.com/home`），刷新时会向服务器请求 `/home` 路径，但服务器可能没有该路径的资源。
-   **服务器配置问题**：如果使用 History 模式，服务器未正确配置将所有请求重定向到入口文件（如 `index.html`），会导致 404。

>   hash模式通过监听浏览器的onhashchange()事件变化，查找对应的路由规则；
>
>   history模式是利用h5的history中新增的两个API pushState() 和 replaceState() 和一个事件onpopstate监听其URL变化；
>
>   hash模式能兼容到IE8，history模式 只能兼容到 IE10；
>
>   由于 hash 值变化不会导致浏览器向服务器发出请求，而且 hash 改变会触发 hashchange 事件（hashchange只能改变 # 后面的url片段）；
>
>   虽然hash路径出现在URL中，但是不会出现在HTTP请求中，对服务器完全没有影响，因此改变hash值不会重新加载页面，基本都是使用 hash 来实现前端路由的。
>
>   **重点：**
>
>   ​	hash模式在每次刷新页面时是直接更改“#”后的路径，history模式每次刷新会重新像服务器重新请求资源，但是服务器会把vue、react的路由地址当成文件路径访问（如: /pages/index），服务器又没有这个文件路径，且服务端没有配置相应的路由重定向，就会访问404；
>
>   ​	history模式的好处是可以进行修改历史记录，并且不会立刻像后端发起请求。不过如果对于项目没有硬性标准要求，我们可以直接使用hash模式开发。



**解决方案**

需配置服务器将所有非静态资源请求指向 `index.html`，由前端路由处理路径。

**Nginx 服务器**

修改 Nginx 配置文件（如 `nginx.conf` 或站点配置文件）：

```shell
server {
  listen 80;
  server_name example.com;
  root /path/to/your/project/dist;

  location / {
    try_files $uri $uri/ /index.html; # 关键配置
  }

  # 省略1w行
}
```

修改完配置文件，记得重新加载！！！



 **Apache 服务器**

在项目根目录或虚拟主机配置中添加 `.htaccess` 文件：

```xml
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```



 **其他注意事项**

1.  **前端路由配置**：
    -   Vue Router 需设置 `mode: 'history'`。
    -   React Router 使用 `<BrowserRouter>`。
2.  **静态资源路径**：
    -   确保项目构建时配置了正确的 `publicPath`（如 `./` 相对路径）。
3.  **CDN/缓存问题**：
    -   清除 CDN 或浏览器缓存，避免旧配置残留。



## 当项目部署到服务器子文件路径时资源404问题

当项目部署到服务器的子文件路径（如 `/sub-path/`）时，出现资源 404 问题，通常是因为 **前端静态资源路径未正确配置** 或 **服务器未正确处理子路径请求**。



**核心原因**

-   **前端静态资源路径错误**：构建时未指定子路径作为基础路径（如 `publicPath` 或 `base`），导致资源引用路径错误（如 `/static/js/app.js` 而非 `/sub-path/static/js/app.js`）。
-   **服务器未配置子路径路由**：服务器未将子路径请求正确映射到前端入口文件（如 `index.html`）。
-   **前端路由未适配子路径**：前端路由未配置 `base` 路径，导致路由跳转错误



如比，我们将项目部署到了h5文件夹中，这时候的访问路径应该是http://127.0.0.1:8080/h5/，访问后会出现js和css资源404，因为配置默认是指向到绝对路径'/',也就是根目录，但是根目录没有这些资源文件，就会让项目访问失败。

**vue2.0**

```js
// vue.config.js
module.exports = {
    publicPath: '/h5/',
    ...
}
```

```js
// router
const createRouter = () => new Router({
  mode: 'history',
  base: '/h5',
  ...
})
```

**vue3.0**

```js
// vite.config.ts
export default defineConfig({
    base:'/h5/', // 替换为你的子路径
    ...
})
```

```js
// router
const router = createRouter({
    history: createWebHistory('/h5'),
    routes: []
});
```

**React **

```js
// package.json
{
  "homepage": "/h5",  // 替换为你的子路径
  "scripts": {
    "build": "react-scripts build"
  }
}
```

#