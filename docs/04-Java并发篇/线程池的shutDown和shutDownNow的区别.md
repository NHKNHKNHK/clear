# 线程池的shutDown和shutDownNow的区别

ExecutorService接口中，shutdown()和shutdownNow()都是用于关闭线程池的方法

## **shutdown()**

shutdown()方法会启动线程池的关闭过程。

它会**停止接受新的任务提交**，但会继续执行已经提交的任务（包括正在执行的和已提交但尚未开始执行的任务（即队列中的任务））。

调用shutdown()后，线程池会进入一个**平滑的关闭**过程，等待所有已提交的任务完成后才会完全终止

## **shutdownNow()**

shutdownNow()方法会**尝试停止所有正在执行的任务**，并返回一个包含尚未开始执行的任务的列表。

它会立即停止接收新的任务，并试图中断正在执行的任务。

调用shutdownNow()后，线程池**会尽快停止所有正在执行的任务**（即它会尽力的**中断**任务），并返回尚未开始执行的任务列表。

需要注意的是，**无法保证所有正在执行的任务都能被中断**。

| 特性                   | `shutdown()`                   | `shutdownNow()`                                              |
| :--------------------- | :----------------------------- | :----------------------------------------------------------- |
| **停止接收新任务**     | 是                             | 是                                                           |
| **等待现有任务完成**   | 是（包括正在执行和排队的任务） | 否（尝试中断正在执行的任务）                                 |
| **中断正在执行的任务** | 否                             | 是（通过 `interrupt()` 方法）<br>具体的中断效果取决于任务对中断信号的响应 |
| **返回未执行任务**     | 否                             | 是（返回尚未开始的任务列表）                                 |
| **关闭速度**           | 较慢（等待所有任务完成）       | 较快（立即尝试关闭）                                         |

