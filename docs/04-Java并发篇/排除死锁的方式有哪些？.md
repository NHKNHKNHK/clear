# 排除死锁的方式有哪些？

-   通过纯命令的方式
    -    jps -l   查询出进行编号
    -   jstack  进程编号
-   jconsole图形化工具

示例

```java
package com.clear.juc.locks;

import java.util.concurrent.TimeUnit;

public class DeadLockDemo {
    public static void main(String[] args) {
        StringBuilder s1 = new StringBuilder();
        StringBuilder s2 = new StringBuilder();

        new Thread(() -> {
            synchronized (s1) {
                s1.append("a");
                s2.append("1");
                try { TimeUnit.SECONDS.sleep(1);} catch (InterruptedException e) { e.printStackTrace();}
                synchronized (s2) {
                    s1.append("b");
                    s2.append("2");
                    System.out.println(s1);
                    System.out.println(s2);
                }
            }
        }, "t1").start();

        new Thread(() -> {
            synchronized (s2) {
                s1.append("c");
                s2.append("3");
                try { TimeUnit.SECONDS.sleep(1);} catch (InterruptedException e) { e.printStackTrace();}
                synchronized (s1) {
                    s1.append("d");
                    s2.append("4");
                    System.out.println(s1);
                    System.out.println(s2);
                }
            }
        }, "t2").start();
    }
}
```

运行上面代码会发现终端迟迟没有结果，使用如下命令查看死锁：

```shell
D:\video\workspace\explore\springboot\juc\src\main\java\com\clear\juc\locks>jps -l
31888 com.clear.juc.locks.DeadLockDemo
11188 
25748 org.jetbrains.idea.maven.server.RemoteMavenServer36
14888 sun.tools.jps.Jps
30684 org.jetbrains.jps.cmdline.Launcher

D:\video\workspace\explore\springboot\juc\src\main\java\com\clear\juc\locks>jstack 31888
2025-03-10 18:24:31
Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.131-b11 mixed mode):

# 省略1万行 ^v^

Java stack information for the threads listed above:
===================================================
"t2":
        at com.clear.juc.locks.DeadLockDemo.lambda$main$1(DeadLockDemo.java:30)
        - waiting to lock <0x000000076e2a1258> (a java.lang.StringBuilder)
        - locked <0x000000076e2a12a0> (a java.lang.StringBuilder)
        at com.clear.juc.locks.DeadLockDemo$$Lambda$2/1078694789.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:748)
"t1":
        at com.clear.juc.locks.DeadLockDemo.lambda$main$0(DeadLockDemo.java:16)
        - waiting to lock <0x000000076e2a12a0> (a java.lang.StringBuilder)
        - locked <0x000000076e2a1258> (a java.lang.StringBuilder)
        at com.clear.juc.locks.DeadLockDemo$$Lambda$1/990368553.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:748)

Found 1 deadlock. 
```



