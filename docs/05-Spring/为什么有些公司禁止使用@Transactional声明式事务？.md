# 为什么有些公司禁止使用@Transactional声明式事务？

主要与性能、复杂性和维护性有关

-   **长事务问题**：如果一个方法中存在较多耗时的操作，很容易引发长事务问题。长事务会带来锁的竞争，影响性能。同时也会导致数据库的连接池被消耗尽，影响程序正常执行
    -   替代方案：**编程式事务管理**

-   **嵌套调用混乱问题：**如果方法存在嵌套调用，而被嵌套调用的方法也声明了@Transactional事务，那么就会出现事务嵌套的调用行为，容易引起事务混乱，造成程序运行结果异常

-   **代码可读性和维护性**：@Transactional声明式事务是将事务控制逻辑放在注解里面，如果项目中的复杂性增加，事务的控制可能会变动更加复杂，导致代码的可读性和维护性下降
-   **异常处理不当**： @Transactiona默认只会在遇到运行时异常（如 `RuntimeException`）时回滚事务。如果业务逻辑中抛出的是受检异常（如 `IOException`），则需要显式配置回滚规则。如果开发人员没有正确处理这些异常，可能会导致事务未按预期回滚。

