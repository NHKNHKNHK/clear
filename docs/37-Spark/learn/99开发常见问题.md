# java.lang.SecurityException

**问题描述：**

我们使用如下Spark程序提交命令提交jar包执行时

```shell
$ /opt/software/spark-yarn/bin/spark-submit --class com.clear.wordcount.JavaSparkWordCount --master yarn --deploy-mode client /opt/data/spark-
core/spark-core-demo-1.0.jar
```

遇到了如下错误

**报错信息：**

```shell
Exception in thread "main" java.lang.SecurityException: Invalid signature file digest for Manifest main attributes
```

**报错原因：**

这个错误通常是由于 JAR 文件中的签名文件损坏或不完整导致的。

**解决思路：**

我是通过修改了项目POM文件，参考如下：

```xml
<dependencies>
    <!-- spark-core依赖-->
    <dependency>
        <groupId>org.apache.spark</groupId>
        <artifactId>spark-core_2.13</artifactId>
        <version>3.2.0</version>
        <scope>provided</scope>
    </dependency>
    <!-- spark-sql分析-->
    <dependency>
        <groupId>org.apache.spark</groupId>
        <artifactId>spark-sql_2.13</artifactId>
        <version>3.2.0</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <!-- windows 入口配置-->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifest>
                        <!-- mainClass标签填写主程序入口-->
                        <mainClass>com.clear.demo1.CreateFileUtil</mainClass>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                    </manifest>
                </archive>
                <classesDirectory>
                </classesDirectory>
            </configuration>
        </plugin>

        <!-- 复制依赖文件到编译目录中 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>3.1.1</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/lib</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build>
```

