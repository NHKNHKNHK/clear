# Redis常用类型的应用场景？

**口语化**

Redis 的常用类型的应用场景，最常见的就是用来做各种各样的缓存，主要是 string 和 hash 用的会比较多。string 支持了各种方式的缓存，配合过期时间，非常的方便，string 的 value 可以存 json 等等这些东西，用起来也非常灵活。

还有一个大的场景就是基于 redis 实现的分布式锁，setnx 命令天然支持锁的机制。

针对一些对象的处理，hash 结构就比较常用，省去了 json 序列化的性能消耗。

另一种常用的就是 sortset，经常用来实现排行榜功能，也可以做一些延迟队列的操作。

还有就是 set 可以用来做黑名单，

list 可以实现一些简单的消息队列！

**字符串（string）**

-   **缓存**：最常见的就是缓存，利用set方法，可以将字符串数据放入到redis中。get方法直接读取。set里面可以放字符串，也可以放json串。配合过期时间等等，实现性能的提升。
-   **计数器**：incrby、decrby很轻松的就可以实现数字的加减，比如说库存的扣减。在高并发的情况下就可以使用这种方式来快速处理。又比如说点赞功能，点赞数量，也可以通过此来实现。总之和数字加减有关的，可以考虑计数器。

-   **分布式锁**：可以使用**setnx**命令，来做一些分布式锁的处理，判断是否拿到了锁，一般如果setnx成功放入了val，就认为是拿到了锁，否则就是没拿到
-   **常量存储**：平时的一些简单的配置信息，比如一些标志位，假设现在有一个任务在跑，如果跑完成功了，则想在redis中写一个值，后续其他人做业务逻辑的时候，就可以通过这个值来知道，任务是否成功

**哈希（hash）**

-   **对象存储**：大家用java，肯定离不开和对象打交道，对象就是一堆属性，假设我们把这个存储到缓存里面，用hash再适合不过了。当然你也可以使用string，但是每次都要做json序列化，得不偿失，考虑性能后，还是要对象存储，直接就可以拿到某个属性的值

-   其他：网上有很多把hash存储不同的数据，列为不同用途的说话，我个人不这么看。因为本质上就是对象存储的用途，所以都可以归为同一类。可能大家看到了其他用途，如用户信息存储、地理位置村里等，都是同一类的。

**列表（list）**

-   超简单的**消息队列**：list的push和pop命令，天然支持，针对一些简单的消费场景，可以考虑使用redis的队列。
-   **实现栈**：list的push和pop命令可以非常容易的实现栈结构，其实本质上和消费队列差不多
-   **分页查询**：假设需要分页查询，又不想用数据库，小数据量的操作，可以配合lrange来实现，不过开发中很少人这么干

**集合（set）**

-   **黑名单**：黑名单用的非常常用，不重复的数据，比如存储一些用户的id、用户的ip地址等，来做拉黑
-   一些**标签**数据：比如商品的打标等，如新品、饮料、冻品等
-   共同关注、爱好等等**交集**：redis的set有个非常好的功能，可以快速帮我们找到两个set之间的交集、差集、并集等。比如说想知道两个人共同关注的博主、共同的爱好等这些（交集），又比如说想知道我关注了他没关注的博主等（差集），set实现起来非常的方便

**有序集合（sorted set）**

-   **排行榜**：这是一个非常常用常见的场景，zset的分数机制，非常适合用来做带数据的排名，同时性能又非常的高。比如游戏排名、销量排行榜、点赞排行榜、积分排行、考试分数排行等
-   **延迟队列**：zset实现的延迟队列，也是轻量级比较常见的一种方式。分数可以用来存储毫秒数（下单时间+超时时间），来判断什么时候取出来指向。配合扫描机制，只要当前时间大于score就取出来
-   **时间排序的数据**：比如股票的时间的价格变化
