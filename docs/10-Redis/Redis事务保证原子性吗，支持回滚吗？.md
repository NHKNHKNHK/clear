# Redis事务保证原子性吗，支持回滚吗？

**Redis事务并不支持回滚机制**。如果在事务执行过程中发生错误，已经执行的命令不会被回滚

回顾一下两个命令：

-   **multi**

MULTI命令用于标记一个事务的开始。执行MULTI后，客户端的所有的命令都会被放入一个队列中，而不是立即执行。

-   **exec**

执行队列中的所有命令 

所有命令会按顺序执行，并且在执行过程中不会被其他客户端的命令打断。

Redis事务在执行EXEC命令时具有原子性，即所有命令要么全部执行，要么全部不执行。



在EXEC命令执行时，所有被MULTI命令包裹的命令会按顺序一次性执行。意味着在EXEC执行时，Redis会将所有命令作为一个整体进行处理。Redis保证单个命令的原子性，即每个命令在执行时是不可分割的。

但是，Redis事务并不完全等同于传统关系型数据库的事务。

如果在EXEC执行过程中某个命令失败（例如，命令语法错误），该命令会被跳过，但其他命令仍然会继续执行。这与关系型数据库的事务不同，后者通常会在某个命令失败时回滚整个事务。

Redis事务没有回滚机制。如果某个命令执行失败，已经执行的命令不会被撤销

>   redis事务与关系型事务区别：
>
>   是否先执行
>
>   -   mysql开启事务后，命令会一条一条立即执行，最后统一提交
>   -   redis开启事务后，命令不会立即执行，使用exec命名后才执行
>
>   错误回滚
>
>   -   mysql在执行某条sql发生错误后，所有的命令都会回滚。（原子性：要么全部成功，要么全部失败）
>   -   redis在执行过程中某个命令失败，该命令会被跳过，但其他命令仍然会继续执行。（不存在回滚机制，只保证单条命令的原子性）


