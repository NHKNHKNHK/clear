# 本地缓存与分布式缓存的区别？

## **口语化**

本地缓存与分布式缓存的本质区别在于一个是存在应用内部，属于JVM级别，一个是独立于应用外，大家共享。

本地缓存比如hashMap、caffine、guava cache 这些都是比较常用的，本地缓存的优点就是速度非常快，没有网络消耗，缺点就是应用重启或宕机，缓存就会丢失。

分布式缓存像 redis 这种，也很快，但是多了一些网络的开销。在高并发的情况，有时候 redis 这种会成为性能瓶颈，就需要我们上一个本地缓存，配合 redis 做**多级缓存架构**来进行处理和优化。



缓存在日常开发中启动至关重要的作用，由于是存储在内存中，数据的读取速度是非常快的，能大量减少对数据库的访问，减少数据库的压力。我们把缓存分为两类：

-   分布式缓存，例如Redis：
    -   优点：存储容量更大、可靠性更好、可以在集群间共享
    -   缺点：访问缓存有网络开销
    -   场景：缓存数据量较大、可靠性要求较高、需要在集群间共享
-   进程本地缓存，例如HashMap、GuavaCache、guava cache：
    -   优点：读取本地内存，没有网络开销，速度更快
    -   缺点：存储容量有限、可靠性较低、无法共享（无法在多个tomcat之间共享，数据存在冗余）
    -   场景：性能要求较高，缓存数据量较小

**Caffeine**是一个基于Java8开发的，提供了近乎最佳命中率的高性能的本地缓存库。目前Spring内部的缓存使用的就是Caffeine。GitHub地址：[https://github.com/ben-manes/caffeine](https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Fben-manes%2Fcaffeine)


## 主要区别

**存储位置**

-   **本地缓存**：存储在应用服务器的内存中，与应用程序运行在同一台机器上。
-   **分布式缓存**：存储在独立的缓存服务中，通常分布在多台服务器上，可以被多个应用实例共享。

**访问速度**

-   **本地缓存**：由于数据存储在本地内存中，访问速度非常快，延迟低。
-   **分布式缓存**：需要通过网络通信访问远程缓存服务，因此访问速度相对较慢，但仍然比直接访问数据库快很多。

 **一致性**

-   **本地缓存**：每个应用实例都有自己的缓存副本，容易出现数据不一致的问题（例如，一个实例更新了数据，其他实例的缓存未同步）。
-   **分布式缓存**：所有应用实例共享同一个缓存，能够保证数据的一致性（前提是正确配置缓存失效策略和同步机制）。

**扩展性**

-   **本地缓存**：受限于单机内存容量，扩展性较差。
-   **分布式缓存**：可以通过增加缓存节点实现水平扩展，支持更大的数据量和更高的并发访问。

 **高可用性**

-   **本地缓存**：如果应用实例崩溃或重启，本地缓存的数据会丢失。
-   **分布式缓存**：通常具备持久化和数据复制功能，即使某个节点故障，数据也不会完全丢失。

**适用场景**

-   **本地缓存**：适合读多写少、对性能要求极高且数据更新频率较低的场景，例如热点数据的临时存储。
-   **分布式缓存**：适合多实例部署的应用，尤其是需要跨服务共享数据或处理大规模并发请求的场景。


