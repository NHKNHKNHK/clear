# MySQL中`limit 1000000,10`和`limit 10`的执行速度是否相同？

>   本题考察面试者对数据库查询语句的优化、性能调优的了解

口语化

`limit 1000000,10`和`limit 10`的执行速度差异主要却决于两个关键因素

1、数据量

如果数据库中的数据量很小，那么两个查询的速度相差可能不是很大

但是如果数据库中的数据量很大，那么 limit 1000000,10 会跳过大量的数据行才能返回结果；而limit 10则不需要跳过

2、索引

如果表中有合适的索引，那么使用 limit 1000000,10 的时候数据库可以通过索引直接定位到指定的行号返回结果，而对于limit 10数据库只需要返回前10行数据即可。



但是不管什么因素，limit 1000000,10的查询速度肯定是要慢于limit 10，而随着数据量的增加前者的查询速度会更慢。

因此我认为可以从两个方面来优化：

1、SQL语句层面优化

假设存在主键id，可以使用子查询语句的查询结果作为过滤条件，从第999999行的主键值开始获取10行数据，这样可以跳过大量的数据行，提高查询效率

```sql
select * from where id (select id from order by id limit 1 offset 999999)
    order by id
    limit 10;
```

2、从业务层面优化

正常情况下，很少会出现翻100w页查询一个数据的情况，这种设计本身就会存在问题。

如果涉及到大量数据翻页的查询，可以尝试做冷热数据的分离，减少热数据的查询量。

或者针对运营用到的数据做分析，形成固化表以后展示出来。



 **执行速度差异的原因**

(1) **偏移量的影响**

-   `LIMIT 1000000, 10` 的偏移量为 1000000，这意味着 MySQL 必须先扫描或跳过前 1000000 条记录，才能定位到目标记录。
-   如果数据量较大且没有合适的索引支持，这种操作可能会非常耗时。

(2) **索引的作用**

-   如果查询条件中使用了索引（例如通过 `WHERE` 子句过滤数据），MySQL 可以利用索引快速定位到目标记录，从而减少扫描的开销。
-   然而，即使有索引，`LIMIT 1000000, 10` 仍然需要遍历索引树中的前 1000000 条记录，这仍然是一个较大的开销。

(3) **内存和磁盘 I/O**

-   对于较大的偏移量（如 1000000），MySQL 可能需要从磁盘加载更多的数据块到内存中，进一步增加查询的延迟。
