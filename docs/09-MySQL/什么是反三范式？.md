# 什么是反三范式？

反三范式（Denormalization）是数据库设计中的一种策略，它与三范式（Normalization）的设计理念相反。



**定义**：反三范式是指有意地打破数据库的规范化设计原则，通过引入冗余数据或重复存储数据来优化查询性能、减少复杂的连接操作（JOIN）或提高系统的可扩展性。

>   因为我们需要考虑API接口中需要的数据，减少在接口中的复杂计算。
>
>   比如：一个表中有单价、数量，我们可以多加一个冗余字段 总价，以减少金额在内存中的计算

**目的**

-   **提升查询效率**：通过减少表之间的连接操作，加快查询速度。
-   **简化应用逻辑**：在某些场景下，避免复杂的嵌套查询或关联查询。
-   **支持高并发读取**：在读多写少的系统中，冗余数据可以减少锁竞争和资源争用。

**常见实现方式**

-   **冗余列**：将常用的数据复制到多个表中，避免频繁的表连接。
-   **汇总表**：创建专门用于统计或分析的汇总表，存储预计算的结果。
-   **缓存表**：将复杂查询的结果存储在单独的表中，供后续快速访问。

**缺点**

-   **数据一致性问题**：由于存在冗余数据，更新操作需要同步多个地方，增加了复杂性。
-   **存储成本增加**：冗余数据会占用更多的存储空间。
-   **维护难度加大**：随着系统规模扩大，反三范式设计可能使数据库结构更难以理解和维护。

**总结**

反三范式并不是对三范式的否定，而是一种**权衡**设计。

在实际开发中，是否采用反三范式取决于具体的应用需求和性能瓶颈。如果查询性能是关键因素，且可以通过冗余数据显著改善，则可以考虑使用反三范式设计。


