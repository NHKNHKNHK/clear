# 数据库的三大范式是什么？

数据库设计中的三范式（3NF）是关系数据库理论中的一种规范化标准，用于**减少数据冗余和提高数据一致性**。

**第一范式 (1NF)**

-   **原子性**：确保每个字段都是不可分割的基本数据项。

-   **唯一性**：表中的每一列都必须是唯一的，不能有重复的列。

-   **消除重复组**：不允许存在多值属性或重复组。

**第二范式（2NF）**

-   满足第一范式：表必须先符合第一范式的要求。
-   **完全依赖**：**非主键字段必须完全依赖于主键**，而不能部分依赖于主键的一部分（即不存在部分函数依赖）。这通常意味着需要将多值依赖的数据拆分到多个表中。
    -   如果主键是复合主键，就要注意是否有部分依赖

**第三范式（3NF）**

-   满足第二范式：表必须先符合第二范式的要求。
-   **无传递依赖**：非主键字段之间不能存在传递依赖关系，即一个非主键字段不能依赖于另一个非主键字段。所有非主键字段应该直接依赖于主键。

**总结**

-   第一范式1NF的核心原则就是：**属性不可切割**

-   第二范式2NF的核心原则就是：**不能存在 ”部分函数依赖“**

-   第三范式3NF的核心原则就是：**不能存在传递函数依赖**

示例

现有一张表，如下

| 学号           | 姓名   | 系名   | 系主任 | 课名           | 分数 |
| -------------- | ------ | ------ | ------ | -------------- | ---- |
| **1022211101** | 李小明 | 经济系 | 王强   | **高等数学**   | 95   |
| **1022211101** | 李小明 | 经济系 | 王强   | **大学英语**   | 87   |
| **1022211101** | 李小明 | 经济系 | 王强   | **普通化学**   | 76   |
| **1022211102** | 张莉莉 | 经济系 | 王强   | **高等数学**   | 72   |
| **1022211102** | 张莉莉 | 经济系 | 王强   | **大学英语**   | 98   |
| **1022211102** | 张莉莉 | 经济系 | 王强   | **计算机基础** | 88   |
| **1022511101** | 高芳芳 | 法律系 | 刘玲   | **高等数学**   | 82   |
| **1022511101** | 高芳芳 | 法律系 | 刘玲   | **法学基础**   | 82   |

**完全依赖**

​	设X、Y是关系R的两个属性集合，X’ 是 X的真子集，存在 X -> Y，但对每一个 X’ 都有 X‘ !-> Y，则称Y完全依赖于X。

说人话：

​	 比如，通过**(学号, 课名) 推出分数**，但是**单独用学号推断不出分数**，那么就可以说：**分数完全依赖于(学号, 课名)**

即，通过AB能推断出C，但是AB单独推断不出C，那么说C完全依赖与AB

**部分依赖**

​	设Y函数依赖与X，但同时Y并不完全函数依赖与X，那么我们就称Y部分函数依赖于X。

说人话：

​	 比如，通过**(学号, 课名) 推出姓名**，因为其实**直接可以通过学号推断出姓名**，所以：**姓名 部分依赖于(学号, 课名)** 

即，通过AB能推断出C，但是通过A也能推断出C，或者通过B也能推断出C，那么说C部分依赖与AB

**传递函数依赖**

​	传递函数依赖：设X、Y、Z是关系R中互不相同的属性集合，存在 X -> Y（Y !->X）,Y -> Z，则称Z传递函数依赖于X。

说人话：

​	 比如，**学号 推断出 系名，系名 推断出 系主任**，但是**，系主任 推断不出 学号，系主任也要依赖于系名**。这种情况下可以说 **系主任 传递依赖于 学号**

即，通过A得到B，通过B得到C，但是C得不到A，那么就可以说C 传递依赖于 A

**第一范式**

第一范式1NF的核心原则就是：**属性不可切割**

| ID   | 商品        | 商家ID    | 用户ID |
| ---- | ----------- | --------- | ------ |
| 001  | **5台电脑** | XXX旗舰店 | 00001  |

​	很明显，上表不符合第一范式，商品列的数据不是原子数据项，是可以进行分割，因此需要对表格进行优化，让表格符合第一范式，如下

| ID   | 商品     | 数量 | 商家ID    | 用户ID |
| ---- | -------- | ---- | --------- | ------ |
| 001  | **电脑** | 5    | XXX旗舰店 | 00001  |

​	实际上，**1NF是所有关系型数据库的最基本要求**，你在关系型数据库管理系统（RDBMS），例如MySQL、Oracle等创建数据表时，**如果数据表的设计不符合最基本的要求，那么操作也一定是不能成功的**。也就是说，只要是RBDMS中存在的表，一定是符合1NF的。

**第二范式**

第二范式2NF的核心原则就是：**不能存在 ”部分函数依赖“**

| 学号           | 姓名   | 系名   | 系主任 | 课名           | 分数 |
| -------------- | ------ | ------ | ------ | -------------- | ---- |
| **1022211101** | 李小明 | 经济系 | 王强   | **高等数学**   | 95   |
| **1022211101** | 李小明 | 经济系 | 王强   | **大学英语**   | 87   |
| **1022211101** | 李小明 | 经济系 | 王强   | **普通化学**   | 76   |
| **1022211102** | 张莉莉 | 经济系 | 王强   | **高等数学**   | 72   |
| **1022211102** | 张莉莉 | 经济系 | 王强   | **大学英语**   | 98   |
| **1022211102** | 张莉莉 | 经济系 | 王强   | **计算机基础** | 88   |
| **1022511101** | 高芳芳 | 法律系 | 刘玲   | **高等数学**   | 82   |
| **1022511101** | 高芳芳 | 法律系 | 刘玲   | **法学基础**   | 82   |

​	以上表格明显存在，部分函数依赖。比如，这张表的**主键是(学号, 课名)**，分数确实完全依赖于(学号, 课名)，但是姓名并不完全依赖于(学号, 课名)，我们直接通过**学号 就可以推断出 姓名，所以存在部分函数依赖**

优化如下，拆分称两个表

| 学号           | 课名           | 分数 |
| -------------- | -------------- | ---- |
| **1022211101** | **高等数学**   | 95   |
| **1022211101** | **大学英语**   | 87   |
| **1022211101** | **普通化学**   | 76   |
| **1022211102** | **高等数学**   | 72   |
| **1022211102** | **大学英语**   | 98   |
| **1022211102** | **计算机基础** | 88   |
| **1022511101** | **高等数学**   | 82   |
| **1022511101** | **法学基础**   | 82   |

| 学号           | 姓名   | 系名   | 系主任 |
| -------------- | ------ | ------ | ------ |
| **1022211101** | 李小明 | 经济系 | 王强   |
| **1022211102** | 张莉莉 | 经济系 | 王强   |
| **1022511101** | 高芳芳 | 法律系 | 刘玲   |

通过以上拆分后，符合第二范式，去除了部分函数依赖

**第三范式**

第三范式3NF的核心原则就是：**不能存在传递函数依赖**

在下面这张表中，存在传递函数依赖：学号 -> 系名 -> 系主任 ，但是系主任 推不出 学号 

| 学号           | 姓名   | 系名   | 系主任 |
| -------------- | ------ | ------ | ------ |
| **1022211101** | 李小明 | 经济系 | 王强   |
| **1022211102** | 张莉莉 | 经济系 | 王强   |
| **1022511101** | 高芳芳 | 法律系 | 刘玲   |

所有需要对盖表进行拆分，以满足第三范式

| 学号           | 姓名   | 系名   |
| -------------- | ------ | ------ |
| **1022211101** | 李小明 | 经济系 |
| **1022211102** | 张莉莉 | 经济系 |
| **1022511101** | 高芳芳 | 法律系 |

| 系名   | 系主任 |
| ------ | ------ |
| 经济系 | 王强   |
| 法律系 | 刘玲   |

>   相关补充
>
>   ​	关系型数据库的范式一共有六种，分别是第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF）。遵循的范式级别越高，数据冗余性就越低。

