# 什么是hash索引？

哈希索引（hash index）基于哈希表实现。哈希索引通过hash算法将数据库的索引列数据转换为定长的哈希码作为key，将这条数据的行的地址作为value，一并存入hash表的对应位置。

在MySQL中，只有 MEMORY引擎显式的支持哈希索引，这也是MEMORY引擎默认的索引结构，MEMORY同时也支持b-tree索引。并且，MEMORY引擎支持非唯一哈希索引，如果多个列的哈希值相同（发送hash碰撞），索引会在对应hash键以下形成链表形式存储多个记录地址。

## hash索引的特点

-   hash索引不支持部分索引列的匹配查找，因为哈希索引始终是使用索引列的全部内容来计算哈希值的。
    -   例如，在数据列（A，B）上建立了哈希索引，如果查询只有数据列A，则无法使用该索引
-   hash索引具有哈希表的特性，因此只有精确匹配所有列的查询对于哈希索引才有效
    -   比如 =、<>、in（因为数据的存储是无序的），**无法使用任何范围查询**
-   因为数据的存储是无序的，哈希索引还**无法利用索引完成排序操作**
-   对于**精确查询**，哈希索引效率很高，**时间复杂度为O(1)**，除非有很多哈希冲突的情况下。如果发生了哈希冲突，则存储引擎必须遍历链表字段所有数据指针，逐一比较，直到找到所有符合条件的行。哈希冲突越多，代价就越大。

## 结论

hash索引只适用于等值查询（=、in），不支持做范围查询（between、>、<、<>、like、is null、is not null）