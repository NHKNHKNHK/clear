# MySQL事务的四大特性

## 口语化

MySQL事务的四大特性就是ACID，分别是原子性、一致性、隔离性、持久性。其中：

1. 原子性就是确保事务中的所有操作要么全部成功，要么全部失败；

2. 一致性是指数据库从一个一致性的状态转换到另外一个一致性的状态；

3. 隔离性确保并发执行的事务彼此隔离开来，避免相互干扰；

4. 持久性确保事务一旦提交，其结果是永久性的。

## 1、原子性（Atomicity）

定义：事务是一个不可分割的最小工作单元。原子性确保事务中的所有操作要么全部完成，要么全部不完成。

保证：如果事务在执行过程中遇到错误或中断，整个事务将被回滚（Rollback），以确保数据库状态不会部分更新。

例子：假设有一个银行转账操作，事务包括从账户A中扣钱和向账户B中加钱。如果任何一个操作失败，整个事务都会回滚，账户A和账户B的余额不会发生变化。

## 2、一致性（Consistency）

定义：一致性确保事务在完成后，数据库从一个一致状态转换到另一个一致状态。即事务开始前和结束后，数据库的完整性约束没有被破坏。

保证：事务执行过程中，任何中间状态对外部都是不可见的，只有当事务成功提交后，结果才会对其他事务可见

例子：在银行转账操作中，一致性确保转账后总金额保持不变。如果账户A减少了100元，账户B就应该增加100元。

## 3、隔离性（Isolation）

定义：隔离性确保并发执行的事务彼此隔离开来，避免相互干扰。不同的事务之间的操作是互不可见的，直到事务提交。

保证：通过不同的隔离级别（如读未提交、读已提交、可重复读、串行化）来控制并发事务之间的可见性和冲突。

## 4、持久性（Durability）

定义：持久性确保事务一旦提交，其结果是永久性的，即使系统发生故障，数据也不会丢失。

保证：通过日志记录和定期备份等机制，确保事务提交后的数据能够持久保存。

例子：在银行转账操作中，一旦事务提交，转账操作的结果（账户A和账户B的余额变化）将永久保存在数据库中，即使之后系统崩溃，数据也不会丢失。

## 扩展

### 事务隔离级别

1.  **读未提交（Read Uncommitted）**：允许一个事务可以读到另一个未提交事务的数据，**可能导致脏读**。
2.  **读已提交（Read Committed）**：一个事务只能读到已提交事务的数据，避免脏读。
3.  **可重复读（Repeatable Read）**：一个事务在整个过程中看到的数据是一致的，避免不可重复读。
4.  **串行化（Serializable）**：最高隔离级别，事务完全串行化执行，完全避免了并发问题，但性能较低。
