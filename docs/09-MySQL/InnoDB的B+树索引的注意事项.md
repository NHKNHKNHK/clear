# InnoDB的B+树索引的注意事项

## 根页面位置万年不动

B+树的形成过程：

1、每当为某个表创建一个B+树索引（聚簇索引不需要手动创建，默认就有）的时候，都会为这个索引创建一个`根节点`页面。最开始表中没有数据的时候，每个B+树的索引对应的`根节点`中既没有用户记录，也没有目录项记录

2、随后向表中插入用户记录，先把用户记录存储到这个`根节点`中

3、当根节点中的可用`空间用完时`继续插入记录，此时就会将根节点中的所有记录复制到一个新分配的页，比如`页a`中，然后对这个新页进行`页分裂`的操作，得到另一个新页，比如`页b`。这时新插入的记录根据键值（也就是聚簇索引中的主键值，二级索引中对应的索引列的值）的大小就会被分配到`页a`或者`页b`中，而`根节点`便升级到存储目录项记录的页

特别注意：

一个B+树索引的根节点自诞生之日起，便不会再移动。这样只要我们对某个表建立一个索引，那么它的根节点的页号便会被记录到某个地方，然后凡是InnoDB存储引擎需要用到这个索引的时候，就会去这个固定地方获取根节点的页号，从而来访问这个B+树索引。




## 内节点中目录项记录的唯一性

## 一个页面最少存储2条记录