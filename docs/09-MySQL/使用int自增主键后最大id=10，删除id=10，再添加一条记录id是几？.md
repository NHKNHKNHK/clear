# 使用int自增主键后最大id=10，删除id=10，再添加一条记录id是几？

Q1：使用int自增主键后最大id=10，**删除id=10，再添加一条记录id是几**？

A1：id是11

Q2：**如果重启MySQL后，再添加一条记录id是几**？

A2：id会从最大的id开始递增，也就是10

MySQL的自增id是基于内存的，重启后并不会重置自增值。但是，如果在事务中删除了一个记录并且没有提交（或者说在事务中没有执行下一个插入操作），那么这个删除操作的自增id是不会被释放回池中的。只有在当前事务提交之后，或者在非事务

需要说明的是，上述情况针对的是MySQL5.7版本，在MySQL8中通过redo log实现了自增主键的持久化

## 扩展

### 自增变量的持久化

> [MySQL 8.0新特性—自增变量的持久化](./MySQL约束.md#mysql8-auto-increment-persist)

### 自增主键不连续场景

> 参考：https://mp.weixin.qq.com/s/qci10h9rJx_COZbHV3aygQ
