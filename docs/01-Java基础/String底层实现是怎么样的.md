# String底层实现是怎么样的？

-   JDK9之前，String底层是**char[]**，每个字符占用**2个字节**，采用**UTF16**编码方式。
-   JDK9开始，String底层是**byte[]**，每个字符可能**占用1个或2个字节**。
    -   如果当前字符串所有字符都是Latin1字符集的字符，那么当前字符串每个字符占用1个字节，采用Latin1编码方式。（**节省内存**）
    -   如果当前字符串有任意一个字符不是Latin1字符集的字符，例如中文、韩文、日文等，那么当前字符串每个字符占用2个字节，采用UTF16编码方式

>   补充：
>
>   ​	Latin1 是 ISO-8859-1 的别名，有些环境下写作Latin-1。
>
>   ​	Latin1编码是单字节编码，向下兼容ASCII
>
>   ​	ASCII编码是采用7为二进制数表示，ISO-8859-1（Latin1）编码采用8为二进制数表示
>
>   ​	ASCII编码范围是 0x00-0x7F，Latin1编码范围是  0x00-0xFF
>
>   ​	Latin1字符集，这些字符覆盖了大多数西欧语言，如英语、法语、德语、西班牙语等所需的字母和符号，编码值范围是[0-255]
>
>   ​	所以，Latin1 编码是一种扩展的 ASCII 编码，前128个字符与ASCII码完全兼容，后128个字符用于表示西欧语言中的特殊字符（如 `á`, `ü`, `ñ` 等）
>
>   ​	但是，Latin1相对ASCII而言，极少被提及，但Latin1使用的还是比较广泛的，例如MySQL8.0之前的数据表默认编码就是Latin1



>   问：Java中一个字符占用几个字节？
>
>   答：如果是char类型的一个字符，无论是什么字符，都是占用2个字节。
>
>   ​		如果是字符串中的一个字符，JDK9之前，每个字符占用1个字节，采用UTF16编码；JDK9之后，每个字符可能占用1个或2个字节，采用Latin1或UTF16编码。
>
>   问：Java中一个汉字占用几个字节？
>
>   答：2个字节

