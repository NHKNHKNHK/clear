# 为什么JDK9中将String的char数组改为了byte数组?

主要是为了**节省内存空间，提升内存利用率**

JDK9之前，String底层是**char[]**，每个字符占用**2个字节**，采用**UTF16**编码方式。如果当前字符串所有字符都是Latin1字符集的字符，那么当前字符串每个字符占用1个字节，就造成了浪费

因此JDK做了优化，String底层是**byte[]**，每个字符可能**占用1个或2个字节**。

并引入了**coder**变量来标识编码方式（Latin1 或 UTF-16）。如果当前字符串有任意一个字符不是Latin1字符集的字符，例如中文、韩文、日文等，那么当前字符串每个字符占用2个字节，采用UTF16编码方式

这种机制在保持了兼容性的同时，又减少了内存占用。