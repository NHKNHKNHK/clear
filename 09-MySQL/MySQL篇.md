## MySQL事务的四大特性？

**口语化表述**

MySQL事务的四大特性就是ACID，分别是原子性、一致性、隔离性、持久性。其中原子性就是确保事务中的所有操作要么全部成功，要么全部失败；一致性是指数据库从一个一致性的状态转换到另外一个一致性的状态；隔离性确保并发执行的事务彼此隔离开来，避免相互干扰；持久性确保事务一旦提交，其结果是永久性的。

-   **1、原子性（Atomicity）**

原子性确保事务中的所有操作要么全部完成，要么全部不完成。事务是一个不可分割的最小工作单元。

**例子**：假设有一个银行转账操作，事务包括从账户A中扣钱和向账户B中加钱。如果任何一个操作失败，整个事务都会回滚，账户A和账户B的余额不会发生变化。

-   **2、一致性（Consistency）**

一致性确保事务在完成后，数据库从一个一致状态转换到另一个一致状态。事务开始前和结束后，数据库的完整性约束没有被破坏。

**例子**：在银行转账操作中，一致性确保转账后总金额保持不变。如果账户A减少了100元，账户B就应该增加100元。

-   **3、隔离性（Isolation）**

隔离性确保并发执行的事务彼此隔离开来，避免相互干扰。不同的事务之间的操作是互不可见的，直到事务提交。

**隔离级别**：

1.  **读未提交（Read Uncommitted）**：一个事务可以读到另一个未提交事务的数据，可能导致脏读。
2.  **读已提交（Read Committed）**：一个事务只能读到已提交事务的数据，避免脏读。
3.  **可重复读（Repeatable Read）**：一个事务在整个过程中看到的数据是一致的，避免不可重复读。
4.  **串行化（Serializable）**：最高隔离级别，事务完全串行化执行，避免幻读。

-   **4、持久性（Durability）**

持久性确保事务一旦提交，其结果是永久性的，即使系统发生故障，数据也不会丢失。

**例子**：在银行转账操作中，一旦事务提交，转账操作的结果（账户A和账户B的余额变化）将永久保存在数据库中，即使之后系统崩溃，数据也不会丢失。



## 简述一条SQL在MySQL中的执行过程？



## MySQL的存储引擎有哪些？有什么区别？



## MySQL中InnoDB和MyISAM的区别？



## MySQL中数据排序的实现原理是什么？



## MySQL的索引类型有哪些？



## MySQL  InnoDB引擎中的聚簇索引和非聚簇索引有什么区别？



## MySQL中的回表是什么？



## MySQL索引最左前缀匹配原则？



## MySQL的覆盖索引？

## MySQL中建立索引需要注意什么？



## MySQL在使用索引一定有效吗？如何排查索引效果？





## MySQL中索引数量是否越多越好？为什么？



## 在什么情况下，不推荐为数据库建立索引？



## b树和b+树的理解？



## 简述MySQL的b+树查询数据的全过程？



## 为什么MySQL选择使用B+树作为索引结构？



## MySQL是如何实现事务的？



## MySQL中长事务可能会导致哪些问题？



## MySQL中MVCC是什么？





## 如果MySQL没有MVCC，会有什么影响？



## MySQL在的事务隔离级别？



## MySQL默认事务隔离级别是什么？为什么选这个级别？



## 脏读、不可重复读和幻读分别是什么？



## innoDB如何解决幻读？



## MySQL中有哪些锁类型？



## MySQL的乐观锁和悲观锁有什么区别？



## MySQL中如果发生死锁如何解决？





## 如何使用MySQL中的explain语句进行查询分析？





## MySQL中count(*)、count(1)和count(字段名)有什么区别？



## MySQL中int(11)的11表示什么？



## MySQL的varchar和char有什么区别？



## MySQL如何进行SQL调优？





## MySQL中如何避免单点故障？



## MySQL如何实现读写分离？Java代码中如何实现？







## MySQL的主从同步机制？它是如何实现的？



## 如何处理MySQL的主从同步延迟？



## 什么是分库分表？分库分表有哪些策略？如何实现？



## 如何在MySQL中实施分库分表策略？



## 对数据库实施分库分表可能会引发哪些问题？



## 从MySQL中获取数据，是从磁盘读取的吗？



## MySQL的Doublewriter Buffer是什么？有什么用？



## MySQL的Long Buffer是什么？有什么用？



## 为什么在MySQL在不推荐使用对表join？



阿里规范：



## MySQL在如何解决数据深度分页的问题？



## 如何在MySQL中监控和优化慢SQL？





## MySQL中delete、drop和truncate的区别？



## MySQL在inner join、left join、right join的区别是什么？



## MySQL中`limit 1000000,10`和`limit 10`的执行速度是否相同？



## MySQL中datetime和timestamp类型的区别？



## 数据库三大范式？



## 在MySQL中，你使用过哪些函数？常用函数？



## MySQL中text类型最大可以存储多长的文本？



## MySQL中auto_increment列到达最大值时会发生什么？



## 在MySQL存储金额数据，应该使用什么数据类型？



## 什么是视图？



## 什么是游标？



## 为什么不推荐在MySQL中直接存储图片、音频、视频等大容量内容？





## 相比Oracle，MySQL的优势有哪些？

## MySQL中varchar(100)和varchar(10)的区别？



## MySQL中exists和in的区别？



## 你是否在面试中被问过MySQL相关优化的问题呢？



## MySQL数据库的性能优化方法有哪些？



## MySQL的查询优化器如何选择执行计划？



## 什么是数据库逻辑删除？与物理删除有啥区别？



## 什么是数据库逻辑外键？和物理外键有啥区别？



## 如何实现数据库的不停服迁移？



## 你们生产环境的MySQL中使用了什么事务隔离级别？为什么？



## 为什么阿里手册不推荐使用存储过程？



## 什么是Write-Ahead-Logging（WAL）技术？它有啥优点？MySQL中是否用到了？



## MySQL的行级锁到底锁的是什么东西？





## 慢SQL优化思路？

1、SQL本身

-   **避免使用 select ***
    -   避免查询所有的字段。1、只查询我们需要的字段，减少数据传输量，提高IO性能
-   **避免子查询，使用JOIN替代**
    -   子查询都是嵌套查询，会创建临时表，增加性能损耗
-   **避免使用or查询，使用 union/union all 代替**
    -   mysql 5.0之前应该避免使用or查询，因为可能导致索引失效
    -   union可去重，union all不去重
-   **避免使用 != 或 < > 操作符，使用 in 代替**
    -   因为 != 或 < > 操作符等操作符导致查询引擎放弃使用索引来查找数据，转为变为全表查询
    -   注意，使用  != 时，字段上有索引也会走全表扫描，但是这个情况不是决定的
-   **避免使用 % 开头的 like 查询**
    -   会导致索引失效
-   **避免字段上使用函数**
    -   会导致索引失效

2、索引

-   **查询条件和连接条件的列上建立索引**
-   **利用覆盖索引**
    -   覆盖索引会减少回表查询
-   **适当使用前缀索引**
    -   比如说邮箱，后面几位是固定的，只需要针对前缀进行索引建立即可，减低索引的空间占用，提高索引查询效率
-   **正确使用联合索引，避免过多的列使用复合索引**
    -   因为如果联合索引中的字段过多的话，每当我们插入数据的时候都有可能会触发索引树的重构
-   **更新频繁的列慎用索引**
-   **避免范围查询数据量过多**，可能会导致索引失效
    -   因为在mysql中，是否走索引取决于执行计划的成本，这个成本是由mysql的优化器来进行选择的

3、其他

-   善用 **explain**
    -   分析sql执行计划，可以知道sql也没有使用到索引
-   **分页优化、排序优化、分组优化**
    -   确保排序、分组字段存在索引，并且能够成功利用索引
    -   深分页问题
-   **分解复杂查询**
    -   比如一个sql有1000行，通过物理手段来进行拆分（在代码中拆分），加速查询
-   **批量插入**
    -   每插入一条数据，提交事务非常浪费性能。比如可以优化为每500条数据提交一下事务
        -   需要进行压测，根据压测结果评测出一个性能最高的提交数量
-   **监控和分析工具**
    -   监控整个数据库或是哪一些地方出现了慢sql
-   硬件资源优化
    -   能够加机器解决的事都不是事